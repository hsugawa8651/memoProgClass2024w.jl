var documenterSearchIndex = {"docs":
[{"location":"ch02/#ch02","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"","category":"section"},{"location":"ch02/#リテラル","page":"第2回：▼ 複数のプロットを描く","title":"■ リテラル","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"リテラル（literal）とは， 「文字の並び」の通りに解釈される量をいう．","category":"page"},{"location":"ch02/#数字リテラル","page":"第2回：▼ 複数のプロットを描く","title":"数字リテラル","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"1 や 1.1 はリテラルである． それぞれ，整数 1 ，小数 1.1 という値として評価される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\n計算機の中の小数は■ 浮動小数点数と呼ばれ，筆算の小数とは異なる．","category":"page"},{"location":"ch02/#文字列リテラル","page":"第2回：▼ 複数のプロットを描く","title":"文字列リテラル","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"文字列とは，「文字の並び」として表される量である． 文字列のリテラルは，「二重引用符（double quotation mark） \" で囲まれた文字の並び」である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"\"Hello world\"","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"文字列を連結するには，演算子 * を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"h = \"Hello\"\nw = \"world\"\nh * w\nh * \" \" * w","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\n演算子 * は，数どうしに対して用いると乗算の意味になる．文字列どうしに用いると文字列の連結の意味になる．このように，同じ演算子 * に対して，複数の意味があり，適用する値の型（の組合せ）に応じて，適切な意味が選ばれて，計算される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"数字を表す文字列を作るには，string 関数を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"string(0)\nstring(1)\nstring(1.1)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"特定の書式で文字列を作る場合には，@sprintf マクロを用いる．→ ▶ 書式付き文字列と出力 ","category":"page"},{"location":"ch02/#シンボル","page":"第2回：▼ 複数のプロットを描く","title":"シンボル","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"コロン : から始まる空白以外の文字の並びは，シンボルと呼ばれる固定の文字列である．文字列リテラルよりも効率よく処理される．これから説明するキーワード引数について，特別な意味を持つ値としても用いられる．","category":"page"},{"location":"ch02/#論理値-:-true-と-false","page":"第2回：▼ 複数のプロットを描く","title":"論理値 : true と false","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"true と false は，条件が成立すること（真），または，成立しないことを表すリテラルである．この先の ■ 論理型 で詳しく説明する．","category":"page"},{"location":"ch02/#プロット全体の見かけの調整","page":"第2回：▼ 複数のプロットを描く","title":"■ プロット全体の見かけの調整","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"プロットを描画するためには， 寸法，線幅，色，フォントの種類と大きさなど， 様々な属性（properties）を指定する必要がある． プロットごとに，すべての属性を指定するのは大変なので， 何も指定されなかった属性は， あらかじめ用意した設定や値を使うことになっている．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\nあらかじめ用意した設定や値を，既定値（default values）という．既定値を使わず，設定や値を個別に指定することを，既定値を「上書き（override）する」ともいう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"以下の節では，プロットのいくつかの属性を変更する方法を紹介する．","category":"page"},{"location":"ch02/#全体に太くする","page":"第2回：▼ 複数のプロットを描く","title":"▼ 全体に太くする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"これまで描いてきたプロットは，軸やデータ系列の線が細く，文字が小さい．プロット全体を太くするには，thickness_scaling=数字 を指定するとよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"★ thickness_scaling= を指定しない場合","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\n\nplot() # <= 単に枠を描くだけ\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"★ thickness_scaling=2 を指定した場合","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2) # <=\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\n関数を呼び出すときに渡す値を，引数（ひきすう）または実引数（じつひきすう，argument）という．thickness_scaling=数字 のように名前付きで渡す引数を，キーワード引数（keyword argument）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"この指定は，既存のプロット・オブジェクトに対しても指定できる．関数 plot! を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"★ データ系列を描いた後に指定する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)\nplot!(thickness_scaling=2) # <=\nnothing #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"(図は同じ．省略)","category":"page"},{"location":"ch02/#箱型にする","page":"第2回：▼ 複数のプロットを描く","title":"▼ 箱型にする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"縦軸と横軸を右と上に複製して「箱」のように見せるには，属性 framestyle=:box を指定する．（:boxはシンボルである）","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2)\nplot!(framestyle=:box) # <= 二つ目以降は plot! 関数\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"関数 plot または plot! 関数に与える キーワード引数は，順番を問わない． また，複数のキーワード引数を， 一つの plot または plot! 関数に書いてもよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box) # <=\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)\nnothing #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"(図は同じ．省略)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"### ▼ 背景を透明にする","category":"page"},{"location":"ch02/#軸の見かけの調整","page":"第2回：▼ 複数のプロットを描く","title":"■ 軸の見かけの調整","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"▼ 軸にテキストを付与する\n▼ プロットの描画範囲を指定する\n▼ アスペクト比を等しくする\n▼ グリッド線を消去する","category":"page"},{"location":"ch02/#軸にテキストを付与する","page":"第2回：▼ 複数のプロットを描く","title":"▼ 軸にテキストを付与する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"既定では，横軸と縦軸には，テキストは表示されない．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"横軸・縦軸に，テキストを付与するには， キーワード引数 xlabel=文字列 と ylabel=文字列を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xlabel=文字列 : 横軸のテキストを指定\nylabel=文字列 : 縦軸のテキストを指定","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"★ データ系列を描画する前に，軸テキストを指定","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box)\nplot!(xlabel=\"x\") # <=\nplot!(ylabel=\"y\") # <=\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"★ データ系列を描画した後に，軸テキストを指定","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box)\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, -1 * xs)\nplot!(xlabel=\"x\", ylabel=\"y\")  # <= 1行にまとめた\nnothing #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"(図は同じ．省略)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"属性 xlabel=，ylabel= を指定する代わりに， 関数 xlabel!(文字列)と関数 ylabel!(文字列) を用いてもよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box)\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xs, xs)\nxlabel!(\"x\")\nylabel!(\"y\")\nnothing #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"(図は同じ．省略)","category":"page"},{"location":"ch02/#プロットの描画範囲を指定する","page":"第2回：▼ 複数のプロットを描く","title":"▼ プロットの描画範囲を指定する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"横軸，縦軸の描画範囲を指定するには， plotまたはplot!関数で， キーワード引数 xlims= と ylims= を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xlims=(左限, 右限)\nylims=(下限, 上限)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"上のプログラムに続けて","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"# 描画範囲\nplot!(xlims=(-0.5, 0.5)) # <=\nplot!(ylims=(-0.5, 0.5)) # <=","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"既に描いたプロットオブジェクトの描画範囲を変更するなら， 属性 xlims=，ylims= を指定する代わりに， 関数 xlabel!(文字列)と ylabel!(文字列) を用いてもよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xlims!(左限, 右限)\nylims!(下限, 上限)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"上のプログラムに続けて","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"# 描画範囲\nxlims!(-2, 2) # <=\nylims!(-2, 2) # <=","category":"page"},{"location":"ch02/#アスペクト比を等しくする","page":"第2回：▼ 複数のプロットを描く","title":"▼ アスペクト比を等しくする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ここまで示したプロットでは，直線 y=x と y=-x を描画した．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"y=x は傾き 1（斜め45°で増加）の直線\ny=-x は傾き -1（斜め45°で減少）の直線","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"であるが，これまで描いたプロットでは，それらの傾きで描画されていない．これは，縦横の寸法が異なるためである． 「単位長さを表す縦横の寸法の比」をアスペクト比（aspect ratio）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"アスペクト比を指定するには， キーワード引数 aspect_ratio=値 を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"既定値は aspect_ratio=:auto であり，アスペクト比を適当に調節する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"「アスペクト比を等しく」するには，aspect_ratio=:equal またはaspect_ratio=1 を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box)\nplot!(aspect_ratio=:equal) # <=\n\nxs = -1:0.2:1 \nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"直線 y=x と y=-x が正しい傾きで描画できた．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"「アスペクト比を等しく」しても，上の結果のように 縦横の描画範囲が等しい軸（正方形）が設定されるとは限らない． 必要なら，描画範囲を追加で設定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"# 上に続けて\nxlims!(-1.2,1.2)\nylims!(-1.2,1.2)\nplot!() #hide","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\nアスペクト比は，横軸全体の寸法に対する縦軸全体の寸法ではない．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"今度は，横 2，縦 1 の枠を描画してみよう． 「アスペクト比が等しい」ので，正しく 横 2 ，縦 1 の長方形の枠が描画された．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box)\nplot!(aspect_ratio=:equal) # <=\nxlims!(0,2)\nylims!(0,1)\nplot!(xs,xs)\nplot!(xs,1 .- xs)\nplot!() #hide","category":"page"},{"location":"ch02/#練習：三角形の拡大縮小・平行移動を描画する","page":"第2回：▼ 複数のプロットを描く","title":"▲ 練習：三角形の拡大縮小・平行移動を描画する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"※ この練習は，本節を読み終えてから着手しても良い．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"点を結んで図形を書く場合は， アスペクト比を等しくする必要がある． さもないと，図形が歪になる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"第1回の■ ベクトルをスカラーで乗除すると■ ベクトルをスカラーで加減する では， 三角形を拡大縮小したり，平行移動したりした．それぞれの操作を行った三角形を同じ描画範囲で描け． 確かに拡大縮小または平行移動となっていることを観察せよ． 解答例 → ■ ベクトルに対する更新演算：乗除，■ ベクトルに対する更新演算：加減","category":"page"},{"location":"ch02/#グリッド線を消去する","page":"第2回：▼ 複数のプロットを描く","title":"▼ グリッド線を消去する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"属性 grid は，グリッド線の描画を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"すべてのグリッド線を消去するには， 属性 grid=false を指定すればよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box,\naspect_ratio=:equal, \nxlims=(-1,1), ylims=(-1,1))\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(grid=false)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"横軸，縦軸のグリッド線の有無を指定するには， 属性 xgrid，ygrid を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(thickness_scaling=2, framestyle=:box,\naspect_ratio=:equal, \nxlims=(-1,1), ylims=(-1,1))\n\nxs = -1:0.1:1\nplot!(xs, -1 * xs)\nplot!(xgrid=true, ygrid=false)","category":"page"},{"location":"ch02/#凡例を調整する","page":"第2回：▼ 複数のプロットを描く","title":"■ 凡例を調整する","text":"","category":"section"},{"location":"ch02/#データ系列の凡例テキストを指定する","page":"第2回：▼ 複数のプロットを描く","title":"▼ データ系列の凡例テキストを指定する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"データ系列を区別するための説明書きを， プロットの凡例（はんれい，legend）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"何も指定しなければ， 各データ系列に y1，y2, y3 というラベルが順番に付与される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"各データ系列に，独自のラベルを付与したい場合には， データ系列に続けて，キーワード引数 label=文字列 を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal)\n\nxs = -3:0.1:3\nplot!(xs, -1 * xs, label = \"y=-x\")\nplot!(xs, xs, label = \"y=x\")\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"特定のデータ系列の凡例を表示させないようにするには， labelに空文字列を指定する label=\"\"する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box, \n   aspect_ratio=:equal,\n   xlabel=\"x\", ylabel=\"y\")\n\nxs = -3:0.1:3\nplot!(xs, -1 * xs, label = \"\") # <=\nplot!(xs, xs, label = \"y=x\") # <=\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/#凡例の位置を調整する","page":"第2回：▼ 複数のプロットを描く","title":"▼ 凡例の位置を調整する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"キーワード引数 legend は，凡例の位置を指定するのにも用いられる． 既定値は legend=:best であり， データ系列となるべく干渉しない位置に凡例を配置する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"例えば，凡例をプロットの下側に配置するには， legend=:bottom と指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal)\n\nxs = -3:0.1:3\nplot!(xs, -1 * xs, label = \"y=-x\")\nplot!(xs, xs, label = \"y=x\")\nplot!(legend=:bottom) # <=\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"legend 属性の取りうる位置の値は，以下の通りである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":":right 右\n:left 左\n:top 上中央\n:bottom 下中央\n:inside 中央\n:topleft 左上\n:topright 右上\n:bottomleft 左下\n:bottomright 右下\n:outtoprint 枠外（利用できない場合がある）","category":"page"},{"location":"ch02/#凡例を透明にする","page":"第2回：▼ 複数のプロットを描く","title":"▼ 凡例を透明にする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"凡例を透明にして枠を消去するには，以下の二つの属性を指定する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"legend_foreground_color=nothing\nlegend_background_color=nothing","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal)\nplot!(\n   legend=:bottom,\n   legend_foreground_color=nothing, # <=\n   legend_background_color=nothing) # <=\nxs = -3:0.1:3\nplot!(xs, -1 * xs, label=\"y=-x\")\nplot!(xs, xs, label=\"y=x\")\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/#凡例を非表示にする","page":"第2回：▼ 複数のプロットを描く","title":"▼ 凡例を非表示にする","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"すべてのデータ系列の凡例を消去するには， キーワード引数 legend=false を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal)\n\nplot(legend=false) # <=\nxs = -3:0.1:3\nplot!(xs, -1 * xs) \nplot!(xs, xs)\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/#水平線・垂直線を加える","page":"第2回：▼ 複数のプロットを描く","title":"▼ 水平線・垂直線を加える","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"式 y=ax は，すべて原点 (00) を通る． 水平線や垂直線の補助線を引いて，これを見やすくしよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"関数 hline!(ys) は，水平線（horizontal line）を追加する． 引数 ys として，水平線を引く y 座標のコレクションを指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"また，関数 vline!(xs) は，垂直線（vertical line）を追加する． 引数 xs として，垂直線を引く x 座標のコレクションを指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"今までのプロットに，y軸 x=0 とx軸 x=0 を黒い細線で追加しよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"linewidth=数字 は，線幅（linewidth）を指定する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"※ 別名 lw=数字","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"linecolor=:black は，黒色（black）で描くことを指定する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"※ 別名 lcolor=色，lc=色","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal)\n\nplot!(legend=false) # <=\nxs = -3:0.1:3\nplot!(xs, -1 * xs)\nplot!(xs, xs)\nhline!([0], color = :black, linewidth = 0.5) # <=\nvline!([0], color = :black, linewidth = 0.5) # <=\nplot!(xlims=(-3,3),ylims=(-3,3))","category":"page"},{"location":"ch02/#プロットの既定値を指定する","page":"第2回：▼ 複数のプロットを描く","title":"▼ プロットの既定値を指定する","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"関数 plot または plot!()のキーワード引数として，これまでに，以下を紹介した．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"thickness_scaling=数字\nframestyle=:box\nxlabel=文字列\nylabel=文字列\nxlims=(左限, 右限)\nylims=(下限, 上限)\naspect_ratio=値\ngrid=trueまたはfalse\nxgrid=trueまたはfalse\nygrid=trueまたはfalse","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"これらの指定は，新しいプロットオブジェクトを作成するたびに行う必要がある．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"default 関数を用いると， プロットの既定値を変更できる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\ndefault(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:equal, \n   xlims=(-1,1), ylims=(-1,1))\n\nxs = -1:0.1:1\nplot()\nplot!(xs, -1 * xs)\nplot!(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"新しいプロット・オブジェクトをplot() 関数で作ったとき，関数 default() 関数で設定した既定値が用いられる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"plot(xs, xs)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"default 関数で設定したプロットの既定値を元に戻すには Plots.reset_defaults()を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"Plots.reset_defaults()","category":"page"},{"location":"ch02/#プロットデフォルトの設定2","page":"第2回：▼ 複数のプロットを描く","title":"プロットデフォルトの設定2","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"この章の，ここから下は，以下のような既定値を設定しよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nPlots.reset_defaults()\n\ndefault(\n   thickness_scaling=2, framestyle=:box,\n   aspect_ratio=:auto, \n   legend_foreground_color=nothing,\n   legend_background_color=nothing,\n   xlabel=\"x\", ylabel=\"y\")","category":"page"},{"location":"ch02/#for-文","page":"第2回：▼ 複数のプロットを描く","title":"■ for 文","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"Repeated Evaluation: Loops (section)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for 文を用いると，■ コレクション から要素を一つづつ取り出して， end 文が出現するまでの文を繰り返して，計算を行うことができる． この繰り返される部分をブロック（block）という． ブロックは，字下げ（indent）で表記される． が，字下げは見やすさのためだけである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"繰り返しをループ（loop）ともいう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\nブロックは，for 文以外にも出現する（たとえば，■ if文）． 区別する場合は for ブロックとも称する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"次の例では，変数 i にベクトルの各要素を入れて，end 文までの計算を繰り返す． コレクションの各要素が入る変数をループ変数（loop variable）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for i in [1, 3, 2]\n   @show i   # 式 i の値を表示する\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"@show i は，式 i の値を表示するマクロである．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"範囲を用いた for 文の例を示す．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"println(x) 関数は，x を印字してから，改行する命令である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for i = 1:5\n   println(string(i))\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"\n## ■ 内包表記\n\n[Comprehensions (section)](https://docs.julialang.org/en/v1.10/manual/arrays/#man-comprehensions)\n\n[ 2x for x in [1:2] ]","category":"page"},{"location":"ch02/#for-文でパラメータを変えて，複数のプロットを描く","page":"第2回：▼ 複数のプロットを描く","title":"▼ for 文でパラメータを変えて，複数のプロットを描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"比例関係 y = ax（ただし a = 1 2 3 4 5 ）のプロットを描こう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"plot(aspect_ratio=:equal,legend=:bottomright)\nxs = -4:0.1:4\nplot!(xs, xs, label = \"y= x\")\nplot!(xs, 2 * xs, label = \"y=2x\")\nplot!(xs, 3 * xs, label = \"y=3x\")\nplot!(xs, 4 * xs, label = \"y=4x\")\nplot!(xs, 5 * xs, label = \"y=5x\")\nplot!(xlims=(-4,4),ylims=(-4,4))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"データ系列を描画する部分は，ほぼ同じ文を書いている． 「繰り返し」を用いて，ほぼ同じ文をまとめよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"次の例の for 文では， ループ変数 a に，1, 2, 3, 4, 5 の値を順番に入れて，end までの文を実行する． ここで，繰り返しの中で xs は書き換えられないから，xs への代入は繰り返しの前に一度だけ行えばよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"plot(aspect_ratio=:equal,legend=:bottomright)\nxs = -4:0.1:4\n\nfor a = 1:5\n   plot!(xs, a * xs)\nend\nplot!(xlims=(-4,4),ylims=(-4,4))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"次に，label=文字列 に与える文字列を，for文を用いて作ってみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for a = 1:5\n   label1 = \"y=\" * string(a) * \"x\"\n   println(label1)\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"各データ系列の label に，上で計算された文字列を与えればよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"plot(aspect_ratio=:equal,legend=:bottomright)\nxs = -4:0.1:4\n\nfor a = 1:5\n   label1 = \"y=\" * string(a) * \"x\"\n   plot!(xs, a * xs, label=label1)\nend\nplot!(xlims=(-4,4),ylims=(-4,4))","category":"page"},{"location":"ch02/#練習","page":"第2回：▼ 複数のプロットを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"さらに補助線 x = 0 と y = 0 を追加せよ．","category":"page"},{"location":"ch02/#冪乗関数を描く","page":"第2回：▼ 複数のプロットを描く","title":"▼ 冪乗関数を描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"Base.:^ - Method","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"x^y は，冪（べき，power）ないし冪乗（べきじょう）x^y を表す． x を底（base），y を冪指数（exponent）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"2^2\n2^3\n2^4","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"スカラー c とベクトル v に演算子 .^ を適用した式 c .^ v は， 各々の冪指数に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"底が整数の場合は .^ の前に空白を入れる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"2 .^[2,3,4]","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\n整数（底）の直後に .^ と書くと例外が出るので注意しよう．julia> 2.^[2,3,4]\nERROR: syntax: invalid syntax \"2.^\"; add space(s) to clarify","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"底が小数の場合は，その直後に .^ と書いてよい．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"2.0.^[2, 3, 4]","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルとスカラーに演算子 .^ を適用した式 v .^ c は， 各々の底に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"[2, 3, 4] .^ 2\n[2, 3, 4] .^ 2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"範囲 v とスカラー c に演算子 .^ を適用した式 v .^ c は， 各々の底に対して冪乗した値を要素とするベクトルを与える．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"(2:4) .^ 2\n2:4 .^ 2    # `^`は `:` よりも優先度が高い","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"区間 x= 01 で，冪乗 y=x^a（ただし a = 2345 ）のプロットを描こう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = 0:0.1:1\nplot!(xs, xs .^ 2)\nplot!(xs, xs .^ 3)\nplot!(xs, xs .^ 4)\nplot!(xs, xs .^ 5)\n\n# 描画範囲を設定\nxlims!(-0.05, 1.05)\nylims!(-0.05, 1.05)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for 文を使って，繰り返しの処理をまとめる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"plt.axes().set_aspect(\"equal\") は，プロットを書く前に一度だけ実行する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"区間を x= 02 に拡大して，凡例を追加しよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = 0:0.05:2\nfor a = 2:5\n   plot!(xs, xs .^ a, label = \"y=x^\" * string(a))\nend\n\n# 描画範囲を設定\nxlims!(-0.05, 2)\nylims!(-0.05, 2)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"冪乗 y=x^a （ただし a = 2 3 4 5 はすべて点 (11) を通る． 直線 x = 1 と y = 1 を付与して，これを見やすくしよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\n# 間隔を狭めた\nxs = 0:0.05:2\nfor a = 2:5\n   plot!(xs, xs .^ a, label = \"y=x^\" * string(a))\nend\n# 描画範囲を設定\nxlims!(-0.05, 2)\nylims!(-0.05, 2)\n# 水平線 y=1\nhline!([1], color = :black, linewidth = 0.5, label=\"\")\n# 垂直線 x=1\nvline!([1], color = :black, linewidth = 0.5, label=\"\")","category":"page"},{"location":"ch02/#ローレンツ関数を描く","page":"第2回：▼ 複数のプロットを描く","title":"▼ ローレンツ関数を描く","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"Lorentzian Function","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"以下の曲線を， ローレンツ関数（Lorentzian function）という．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"begingathered\ny = dfracdfracgamma2(x-x_0)^2+left(dfracgamma2right)^2 \ngamma  0\nendgathered","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"パラメータを x_0 = 0 gamma = 2 のように選ぶと， 以下のように簡単な形となる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"y = dfrac1x^2+1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"まず，この曲線を描いてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"分母 x^2+1 を計算するには，「ベクトル」 xs.^2 にスカラー 1 を加算する． このとき，+ の前にピリオド . を付与した ドット演算子（dot operator）.+ を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = -3:0.5:3\nxs.^ 2 .+ 1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"「スカラー」1 を「ベクトル」 (xs^2+1) の各要素で割る には，/ の前にピリオド . を付与したドット演算子 ./ を用いる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"1 ./ (xs.^ 2 .+ 1)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"上のプロットを描こう．xs の刻みを小さくしておく．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -3:0.1:3\nys = 1 ./ (xs.^ 2 .+ 1)\nplot!(xs, ys)\nplot!(xlims=(-3,3),ylims=(0,1.2))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"以下のように，パラメータ gamma を追加する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"y = dfracdfracgamma2x^2+left(dfracgamma2right)^2","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"3つのパラメータ gamma=05 1 2 について，この曲線を描く．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -3:0.05:3\ngamma = 0.5\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplot!(xs, ys, label = gamma)\ngamma = 1.0\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplot!(xs, ys, label = gamma)\ngamma = 2.0\nys = (gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\nplot!(xs, ys, label = gamma)\nplot!(xlims=(-2,2),ylims=(0,4.2))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"gamma の値が変わっても，それぞれの曲線を描くための命令は変わらない． for 文を用いて，gamma の値を変えてみよう（結果のプロットは前出のため省略）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -3:0.05:3\nfor gamma in [0.5, 1.0, 2.0]\n   ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2)\n   plot!(xs, ys, label = gamma)\nend\nplot!(xlims=(-2,2),ylims=(0,4.2))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\n本章のプログラムを順に打ち込みながら対話すると，変数 ys が定義済みである．上のコードの forブロックの最初の文 local ys は，forブロックの外で定義された（＝全域）変数 ys の値を変更するのではなく，forブロック内部のみで定義される（＝局所）変数 ys を用いることをJuliaに指示する．Julia 1.6では，localを付けなくても上のプログラムは動作するが警告メッセージが表示される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ローレンツ関数には，次の性質がある．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"点 x = 0 で 最大値 y = dfrac2gamma\n点 x = pmdfracgamma2 で，最大値の半分 y = dfrac12dfrac2gamma","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"2つ目の性質を観察するため，最大値に対する比を描いてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -3:0.05:3\nfor gamma in [0.5, 1.0, 2.0]\n   ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2) / (2 / gamma)\n   plot!(xs,ys, label = gamma,\n   )\nend\nhline!( [ 1/2 ], color = :black, linewidth = 0.5, label=\"\")\nplot!(xlims=(-3,3),ylims=(0,1.2))","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\nplot 関数の文は，複数の行にまたがっていることに注目したい．式や文が次の行に続くことを示す記法は，とくに用意されていない．構文が行末で終わらなければ，次の行まで読みにいく．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"パラメータ gamma は，半値全幅（Full Width of Half Maximum, FWHM）と呼ばれる． gamma を非常に小さくすると，Diracのデルタ関数（Dirac delta function）の近似（の1つ）となる．","category":"page"},{"location":"ch02/#同じ寸法のコレクションどうしの加減","page":"第2回：▼ 複数のプロットを描く","title":"▼ 同じ寸法のコレクションどうしの加減","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"同じ寸法のコレクションに演算子 + または - を使うと， 対応する要素どうしの加減ができる． ■ ドット演算子は不要である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"・ベクトル（の対応する要素）どうしの加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs + ys\nxs - ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"・範囲（の対応する要素）どうしの加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = 100:100:300\nys = 1:2:5\nxs + ys\nxs - ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"結果も範囲となる（賢い！）．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"・範囲とベクトル（の対応する要素どうし）の加減算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = 100:100:300\nys = [1,3,5]\nxs + ys\nxs - ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"「範囲どうしの加算」の例と比較せよ．範囲 1:2:5 とベクトル [1,3,5] は，実質同じ値であるが，範囲とベクトルの加減算はベクトルになる．","category":"page"},{"location":"ch02/#同じ寸法のコレクションどうしの乗除","page":"第2回：▼ 複数のプロットを描く","title":"▼ 同じ寸法のコレクションどうしの乗除","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"同じ寸法を持つコレクションどうしに対して ドット付きの .* または ./ を適用すると， 対応する要素どうしで乗除を行う． 要素の数が異なると，例外（exception, エラー）が発生する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"・ベクトル（の対応する要素）どうしの乗除算","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 4, 3]\nys = [2, 1, 2, 1]\nxs .* ys\nxs ./ ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"結果が範囲で表せない場合には， ベクトルに変換される．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = 100:100:300\nys = [1,3,5]\nxs + ys\nxs - ys","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"note: Note\nコレクションどうしの乗算 * は，配列どうしの積という別の演算に対応する．参考 → ■ 行列とベクトルの積# 列ベクトルと行ベクトルの積 => 行列\n[2,3] * [4,5]'参考 → ■ 行列と行列の積# 行ベクトルと列ベクトルの積 => 内積\n[2,3]' * [4,5]","category":"page"},{"location":"ch02/#更新演算子","page":"第2回：▼ 複数のプロットを描く","title":"■ 更新演算子","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"Updating operators","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"変数に加減乗除などを行って，元の変数に再代入する場合には， 更新演算子（updating operator）を用いるとよい． たとえば，加算の更新演算子は+記号の直後に = の文字を付与する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"x = 1\n# 再代入\nx = x + 1\n# 更新演算子\nx += 1","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"スカラー変数に対する演算子 +，-，*，/，^ に対して， 更新演算子 +=，-=，*=，/=，^= が用意されている．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"以下の例は，変数 gamma を 2 で繰り返し割り算する．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"gamma = 2\nfor i = 1:5\n   global gamma\n   gamma /= 2\n   @show gamma\nend","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"更新演算子 /= を利用して，ローレンツ関数のパラメータ gamma を変えてみる．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for 文の次の global gamma に注目してほしい． 対話型で実行する場合，for 文の外側で定義された変数の値を変更することは， 安全のために通常禁止されている．これを可能とするのが global 文である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = -3:0.05:3\ngamma = 2\nfor i = 1:5\n   global gamma\n   ys=(gamma / 2) ./ (xs.^ 2 .+ (gamma / 2)^2) / (2 / gamma)\n   plot!(xs,ys, label = gamma)\n   gamma /= 2\nend\nhline!([1/2], color = :black, linewidth = 0.5, label=\"\")\nplot!(xlims=(-3,3),ylims=(0,1.2))","category":"page"},{"location":"ch02/#練習-2","page":"第2回：▼ 複数のプロットを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ローレンツ関数において，パラメータ x_0 を変えたプロットを作成せよ． for 文を使う方法，更新演算子を使う方法の，2つで描いてみよ．","category":"page"},{"location":"ch02/#ベクトルに対する更新演算：乗除","page":"第2回：▼ 複数のプロットを描く","title":"■ ベクトルに対する更新演算：乗除","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルを保持する変数に対しても，更新演算が用意されている．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"・ベクトルを保持する変数を，スカラー倍して更新する","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルをスカラー倍して更新するには，更新演算子 *= を用いる． 式 v *= c は，v = v * c と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 2, 1]\nxs *= 2\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"前節の三角形を描く例題で，更新演算子 *= を用いて，図形を繰り返し拡大してみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = [1.0, 2.0, 2.0, 1.0]\nys = [1.0, 1.0, 3.0, 1.0]\nfor i = 1:5\n   global xs, ys\n   plot!(xs, ys)\n   xs *= 1.2\n   ys *= 1.2\nend\nxlims!(0, 7)\nylims!(0, 7)","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルをスカラーで除して更新するには， 更新演算子 /= を用いる． 式 v /= c は，v = v / c と同じ動作をする．","category":"page"},{"location":"ch02/#ベクトルに対する更新演算：加減","page":"第2回：▼ 複数のプロットを描く","title":"■ ベクトルに対する更新演算：加減","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルにスカラーを加減して更新するには，更新演算子 .+=または .-= を用いる． 式 v .+= c は，v = v .+ c と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 2, 1]\nxs .+= 1\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"前節の三角形を描く例題で，更新演算子 .+= を用いて， 図形を繰り返し並行移動してみよう．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"for 文の中で，変数 xs と ys を更新するので，global xs, ys の文が必要である．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = [1.0, 2.0, 2.0, 1.0]\nys = [1.0, 1.0, 3.0, 1.0]\nfor i = 1:5\n   global xs, ys\n   plot!(xs, ys)\n   xs .+= 0.5\n   ys .+= 0.5\nend\nxlims!(0, 6)\nylims!(0, 6)","category":"page"},{"location":"ch02/#ベクトルとコレクションとの更新演算","page":"第2回：▼ 複数のプロットを描く","title":"■ ベクトルとコレクションとの更新演算","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルとコレクションに対する演算にも更新演算子が用意されている． ベクトル v とコレクション w に対して， 式 v .+= w は，v = v .+ w と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs .+= ys\nxs\nxs .-= ys\nxs","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"同様に，式 v .*= w は，v = v .* w と同じ動作をする．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\nxs .*= ys\nxs\nxs ./= ys\nxs","category":"page"},{"location":"ch02/#練習-3","page":"第2回：▼ 複数のプロットを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"ベクトルの要素どうしの乗算 .* と for文を用いて，いくつかの冪乗関数のプロットを描いてみよ．","category":"page"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"さらに，ベクトルの要素どうしの乗算の代わりに，ベクトル要素の乗算と更新演算子 *= も使ってみよ．","category":"page"},{"location":"ch02/#今回のまとめ","page":"第2回：▼ 複数のプロットを描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch02/","page":"第2回：▼ 複数のプロットを描く","title":"第2回：▼ 複数のプロットを描く","text":"文字列\nプロット全体の見かけの調整\n冪乗関数\nfor 文\nローレンツ関数\n同じ寸法のコレクションどうしの加減乗除\n更新演算子","category":"page"},{"location":"ch01/#ch01","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"","category":"section"},{"location":"ch01/#対話形式で使う","page":"第1回：▼ 簡単なプロットを描く","title":"■ 対話形式で使う","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"本文では，対話形式で，Julia を利用する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Juliaをコマンドラインから利用している場合は， プロンプト julia> が印字され，利用者の入力を待っている．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"命令を打ち込み，ENTER キーを押すと， その命令を計算（評価）した結果が印字される．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"上の例では，1 という文字の並びから， 1 という数を内部で作成し， それを計算の結果として印字したのである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"計算機側から見ると， 利用者の入力を読み込み（Read）， 入力された命令を評価し（Eval, Evaluate）， その結果を印字する（Print）ことを，繰り返す（Loop）． この４つの頭文字をとって， 対話型利用のことを REPL とも呼ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\nevaluate の訳として「評価する」をあてる． 「value を出すこと」すなわち，結果を得ることを意味する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Jupyter notebookを用いる場合には， Code cellが表示されている． ここに命令を打ち込み，SHIFT + ENTER キーを押すと， その命令を評価した結果が出力される．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\nREPLから抜け出るには関数 exit() を用いる．julia> exit()","category":"page"},{"location":"ch01/#電卓として使う","page":"第1回：▼ 簡単なプロットを描く","title":"■ 電卓として使う","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"数と数との加減乗除をしてみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"加算には + ， 減算には - の文字を使う． 乗算には *（アスタリスク asterisk と読む）， 除算には /（スラッシュ slash と読む）の文字を用いる．（なお % は残余を表す→ ■ 残余 rem と整商 div ）","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"1 + 2\n3 * 4","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"数式と同じように，乗算と除算は，加算・減算に優先する． 計算の順序を変えるには，括弧 ( と ) との組を用いる","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"2 + 3 * 4\n(2 + 3) * 4","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"除算の結果は，小数となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"2 / 2\n1 / 3\n5 / 2","category":"page"},{"location":"ch01/#変数に値を代入する","page":"第1回：▼ 簡単なプロットを描く","title":"■ 変数に値を代入する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"値には，名前（名札，ラベル）をつけることができる． この名前を変数（variable）といい，名前をつける操作を「値を変数に代入する（assign）」という． 変数には，色々な種類（「型」）の値を代入できる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数を評価すると，変数の値となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# 変数 x に 値 2 を代入する\nx = 2\n# 変数 x の値を用いる\nx + 1\n# 変数 x に 別の値 3 を再代入する\nx = 3","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# はコメントである． # から行末までの文字は，すべて無視される．","category":"page"},{"location":"ch01/#変数名の規則","page":"第1回：▼ 簡単なプロットを描く","title":"■ 変数名の規則","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Allowed Variable Names (section)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数の名前（変数名）は，以下のようにつける．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数名の最初の文字は， 半角のアルファベット（ a から z まで，A から Z まで）， または，下線（アンダースコア _ ）のいずれかでなければならない． 変数の2文字目以降は，さらに，半角の数字（ 0 から 9 ）， または，半角の感嘆符 ! を含めることができる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"半角文字とは「かな漢字変換機能」を用いずに， キーボードから打ち込める文字と考えてよい．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数名には，漢字やギリシャ文字などを使うことができるが， ここでは説明を省略する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Stylistic Conventions (section)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"今後出現する，定数，型，関数，マクロ，モジュール，パッケージの名前も，変数名の約束と同じである． ただし，慣習として，以下のように使い分ける．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数名は小文字で始める．\n型，モジュール，パッケージの名前は大文字で始める．\n関数やマクロの名前は小文字で始める．下線（アンダースコア _)は用いない．","category":"page"},{"location":"ch01/#ベクトル","page":"第1回：▼ 簡単なプロットを描く","title":"■ ベクトル","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"角括弧 [ と ] との間に，半角文字のカンマ , で区切って 数を並べたものを，（数の）ベクトルという．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"ベクトルは，縦に印字される（列ベクトル，column vector）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"[1, 3, 2]","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"変数に，ベクトルを代入しよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n本文の筆者は，（ベクトルなど）複数の値を内部に含むデータに対する変数の名前を「英語の複数形の名詞」とすることが多い（多くの場合，末尾を s で終える）．そのデータの各要素を表す変数の名前を単数形とする．（大文字は定数などを表す約束だから）大文字と小文字で，ベクトルなどとその要素を区別することは避けたほうがよい．","category":"page"},{"location":"ch01/#三角形を描く","page":"第1回：▼ 簡単なプロットを描く","title":"▼ 三角形を描く","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"「パッケージ」とは， 関連する関数，定数，変数などをまとめたものである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Plots パッケージは， プロットを描くためのパッケージの一つである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"命令 using <<パッケージ名>> で，パッケージを読み込む．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Plots パッケージは， プロットを描くための様々な関数を含んでいる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\nPlots ","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"関数 plot はプロットを描く関数である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"単に plot() として実行すると，新しいプロット枠を描く．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"using Plots\n#gr() #pythonplot()\nplot()","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"データ系列(data series)を関数 plot に渡して，プロットを描こう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"関数 plot(xs,ys) の形で呼び出すと， ベクトル xs， ys から一つづつ数を取り出し． それらを各々 x 座標，y 座標とする点を順番に線で結ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# Plots パッケージの読み込み\nusing Plots\n#gr() #pythonplot()\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 新しいプロットを作成する\nplot(xs, ys)","category":"page"},{"location":"ch01/#練習","page":"第1回：▼ 簡単なプロットを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs や ys の値を変えて，別の図形を表示してみよ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs と ys の要素の「数」が等しくない場合は，どうなるか？  試してみよ．","category":"page"},{"location":"ch01/#ベクトルをスカラーで乗除する","page":"第1回：▼ 簡単なプロットを描く","title":"■ ベクトルをスカラーで乗除する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"ベクトル v \nスカラー c ","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 v * c は， ベクトル r にスカラー c を乗じたベクトルである． すなわち， v * c の各要素は，v の各要素に c を乗じた積である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = [1, 2, 2, 1] #hide\nys = [1, 1, 3, 1] #hide\nxs * 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 c * v も，同じ結果を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# 続けて\n2 * xs","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"v / c は， ベクトル r をスカラー c で除したベクトルである． すなわち， v / c の各要素は，v の各要素を c で除した商である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = [1, 2, 2, 1]  #hide\nys = [1, 1, 3, 1]  #hide\nxs / 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"先に描いた三角形を拡大してみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"関数 plot!(xs,ys) の形で呼び出すと， 直近で描かれたプロットに対して， ベクトル xs , ys から一つづつ数を取り出し． それらを各々 x 座標，y 座標とする点を線で結ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"すなわち，関数 plot(xs,ys) と同じ動作であるが， 直近に描かれたプロットに追加する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# Plots パッケージの読み込み\nusing Plots\n#gr() #pythonplot()\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 新しいプロットを作成する\nplot(xs, ys)\n# それぞれ 2 倍する\nxs2 = 2*xs\nys2 = 2*ys\n# 直近のプロットにデータ系列を追加する\nplot!(xs2, ys2)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\nJulia では，渡された引数の値を変える関数の名前の末尾に感嘆符 ! をつける習慣がある．","category":"page"},{"location":"ch01/#ベクトルをスカラーで加減する","page":"第1回：▼ 簡単なプロットを描く","title":"■ ベクトルをスカラーで加減する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"ベクトル v \nスカラー c ","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 v .+ c は， ベクトル v にスカラー c を加えたベクトルである． すなわち， v .+ c の各要素は， v の各要素に c を加えた和である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"同様に， 演算 v .- c は， ベクトル v からスカラー c を減じたベクトルである． すなわち， v .- c の各要素は， v の各要素に c を減じた差である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算子 + や -の前のピリオド . は， 「各要素に対する演算 （element-wise operation）」を意味する． （以下の ■ ドット演算子 で説明する）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = [1, 2, 2, 1] #hide\nys = [1, 1, 3, 1] #hide\nxs .+ 2\nxs .- 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"先に描いた三角形を平行移動してみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# Plots パッケージの読み込み\nusing Plots\n#gr() #pythonplot()\n\nxs = [1, 2, 2, 1]\nys = [1, 1, 3, 1]\n# 最初のプロット\nplot(xs, ys)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# 続けて\n# それぞれ1を加える\nxs2 = xs .+ 1\nys2 = ys .+ 1\n# データ系列を追加する\nplot!(xs2, ys2)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"関数 plot と plot! は， 既定では，すべてのデータが見えるように， 描画範囲を設定しようとする．（が，そのようにならないこともある）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"同じ描画範囲に設定してプロットを比較したい場合は，以下を参照せよ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"▼ プロットの描画範囲を指定する\n▼ アスペクト比を等しくする\n▲ 練習：三角形の拡大縮小・平行移動を描画する","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\nピリオドが付かない演算子 +や - を用いると，例外（exception, エラー）が発生するので注意しよう．julia> xs + 2\nERROR: MethodError: no method matching +(::Array{Int64,1}, ::Int64)","category":"page"},{"location":"ch01/#範囲","page":"第1回：▼ 簡単なプロットを描く","title":"■ 範囲","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"Base.:: — Function","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"二つまたは三つの数字を半角文字のコロン（ : ）で区切ったデータは， 有限の（＝要素の数が定まった，finite）等差数列（arithmetic sequence）を 表す． このようなデータの種類を 範囲型（range type）という． 範囲型を持つデータを 範囲 （range）と呼ぶ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n「型（type，かた）」とは「データの種類」である．詳しくは，後の節で述べる．→ ■ 型","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"二つの数をコロン（ : ）で区切った量 a:b は， a から 1 づつ増やして b を超えるまでの数からなる等差数列である． 三つの数をコロンで区切った量 a:c:b は， a から c づつ増やして b を超えるまでの数からなる等差数列である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"呼び方","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"a : 初項（initial term, first term）\nb : 末項（last term）\nc : 等差（common difference）","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n一定間隔 c を「等差（common difference）」と本文では呼ぶ． 数学では「公差」と呼ばれることもあるが，工学での「公差」は tolerance を意味することが多いので，区別した．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"1:5\nxs = 0:0.1:1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"範囲から各要素を取り出してベクトルに変換するには，collect 関数を用いる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 0:0.1:1 #hide\ncollect(xs)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"等差 c は，負の値でもよい． この場合，a:c:b は，a から c づつ増やして b を「下回る」までの数からなる有限の等差数列となる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 10:-1:0\ncollect(xs)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"等差 c が負で，a  b だと，要素は0個になる．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 2:-1:5\ncollect(xs)","category":"page"},{"location":"ch01/#範囲の各要素をスカラーで乗除する","page":"第1回：▼ 簡単なプロットを描く","title":"■ 範囲の各要素をスカラーで乗除する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"範囲 r \nスカラー c ","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 r * c は，範囲 r のスカラーc倍である． すなわち， r の各要素に c を乗じた結果に相当する「範囲」を与える． 演算 r * v も，同じ結果を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 1:2:10\n# 各要素を2倍する\nxs * 2\n2 * xs","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"結果も範囲となる（賢い！）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n範囲のスカラー倍は，初項，末項，等差を，すべてスカラー倍した範囲である（確かめよ）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 r / c は，範囲 r のスカラーc商である． すなわち， r の各要素を c を除した結果に相当する「範囲」を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 1:2:10 #hide\n# 各要素を2で除す\nxs / 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"末項が数字で終わる場合には，範囲のスカラー乗除は，範囲全体を括弧で囲む必要がある．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"(2:2:4) * 2\n(2:2:4) / 2","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n注意：括弧をつけないと，解釈が異なる． 範囲の演算子 : は，加減乗除の演算子よりも優先度が低いので， 2:2:4 * 2は 2:2:(4 * 2) と解釈される．julia> 2:2:4 * 2\n2:2:8","category":"page"},{"location":"ch01/#範囲の各要素をスカラーで加減する","page":"第1回：▼ 簡単なプロットを描く","title":"■ 範囲の各要素をスカラーで加減する","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"範囲 r \nスカラー c ","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算 r .+ c は，範囲 r にスカラー c を加えた範囲である． すなわち， r .+ c の各要素は， r の各要素に c を加えた和である．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"同様に，演算 v .- c は，v の各要素から c を減算した要素からなる範囲を与える．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"演算子 + や -の前のピリオド . は， 「各要素に対する演算 （element-wise operation）」を意味する． （この先の ■ ドット演算子 で再度説明する）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"xs = 1:2:10\n# 各要素に1を加える\nxs .+ 1\n# 各要素から1を減じる\nxs .- 1","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n範囲のスカラー和差は，等差を変えず，初項と末項にスカラーを加えた範囲である（確かめよ）．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"この場合， ピリオドが付かない演算子 + や - を用いると， 例外（exception, エラー）が発生する．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"julia> xs + 1\nERROR: MethodError: no method matching +(::StepRange{Int64, Int64}, ::Int64)","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"note: Note\n末項が数字で終わる場合には，範囲のスカラー加減は，範囲全体を括弧で囲む必要がある． 範囲とスカラーの和でドットをつけないと，解釈が異なる． 範囲の演算子 : は，加減乗除の演算子よりも優先度が低いので， 2:2:4 + 2は 2:2:(4 + 2) と解釈される．julia> 2:2:4 + 2\n2:2:6ドットの付け忘れが怖いなら，範囲を括弧で囲むとよい．julia> (2:2:4) .+ 2\n4:2:6","category":"page"},{"location":"ch01/#コレクション","page":"第1回：▼ 簡単なプロットを描く","title":"■ コレクション","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"一つずつ要素を取り出すことができる量をコレクション（collection）という． ベクトルや範囲は，コレクションである．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"ベクトルと範囲は，異なる種類（■ 型）の値であるが， スカラーの加減乗除が同じ形式で記載するよう，うまく設計されている． このような例は，Juliaの随所で観察される．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"これから説明する例","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"▼ 同じ寸法のコレクションどうしの加減\n▼ 同じ寸法のコレクションどうしの乗除","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"今後説明する■ 行列も，コレクションの一つである．","category":"page"},{"location":"ch01/#ドット演算子","page":"第1回：▼ 簡単なプロットを描く","title":"■ ドット演算子","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"コレクションとスカラーとの間の加減で，.+ ，.-  のように， 半角文字のピリオド（ドッド）で始まるドット演算子（dot operator）を用いた． ドット演算子は，「コレクションの各要素に対して演算する（element-wise operation）」という意味を持つ．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"加減乗除のドット演算子を適用される値の 一方がコレクション，他方がスカラーの場合には， 「スカラーをコレクションと同じ寸法を持つベクトルに拡張して」から，要素どうしの演算を行う仕組みになっている． この仕組みを「ブロードキャスト（broadcast）」と呼ぶ．","category":"page"},{"location":"ch01/#式のプロットを描く","page":"第1回：▼ 簡単なプロットを描く","title":"▼ 式のプロットを描く","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"plot またはplot! 関数に対して， 同じ寸法を持つ二つのベクトルまたは範囲 xs，ys を渡すと，  xs , ys から一つづつ要素を取り出し， これらを x y 座標とする点どうしを結んで，図形が描かれるのであった．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"式のプロットを描くには，x 座標の値 xs から計算した式の値を，y 座標の値 ys とすればよい．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"二つの直線 y=-x と y=2x-1 のプロットを描いてみよう．","category":"page"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"# Plots パッケージの読み込み\nusing Plots\n#gr() #pythonplot()\n\nxs = -1:0.1:1\n# 描画\nplot()\nys1 = -1 * xs\nplot!(xs, ys1)\nys2 = 2 * xs .- 1\nplot!(xs, ys2)","category":"page"},{"location":"ch01/#練習-2","page":"第1回：▼ 簡単なプロットを描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"別の直線を描いてみよ．","category":"page"},{"location":"ch01/#今回のまとめ","page":"第1回：▼ 簡単なプロットを描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch01/","page":"第1回：▼ 簡単なプロットを描く","title":"第1回：▼ 簡単なプロットを描く","text":"対話形式の使い方\n数どうしの加減乗除\nPlots パッケージを用いた図形とプロットの描画\nベクトルと等差数列\nコレクション\nコレクションの各要素をスカラー乗除する\nコレクションの各要素をスカラーで加減する\nドット演算子\n式のプロットを描く","category":"page"},{"location":"ch05/#ch05","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"","category":"section"},{"location":"ch05/#プロットデフォルトの設定5","page":"第5回：▼ 画像の保存・アニメーション","title":"プロットデフォルトの設定5","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"この節では，既定に近いプロット・デフォルトを設定する．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using LinearAlgebra\n\naux = (label=\"\", lc=:black, lw=0.5)\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    warn_on_unsupported=true)","category":"page"},{"location":"ch05/#テキストを表示する","page":"第5回：▼ 画像の保存・アニメーション","title":"■ テキストを表示する","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"プロット・オブジェクトに，テキストを追加するには， 関数 annotate!(x,y,text) を用いる． ","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"scatter([0,0.5,1],[0,0.5,1], shape=:circle, ms=36)\nannotate!(0.5,0.5,\"abc\")","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"既定では，テキストの中心が座標 (x,y) にくるように配置される．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"フォント寸法や色を変える場合は，text(文字列, オプション)を用いる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"pointsize= 文字サイズ\nhalign= 水平方向位置 :hcenter, :left , :right のいずれか\nvalign= 垂直方向位置 :vcenter, :top , :bottom のいずれか\ncolor=色 テキストの色","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\nannotate!(0.25,0.25,\n    text(\"red\",pointsize=16, color=:red))\nannotate!(0.5,0.75,\n    text(\"left, top\",\n        pointsize=12, halign=:left, valign=:top, color=:blue))\n# 上のコードは，次のように書いてもよい\n# annotate!(0.25,0.75, \n#   text(\"left, top\", 12, :left, :top, :blue))","category":"page"},{"location":"ch05/#漢字テキストを表示する","page":"第5回：▼ 画像の保存・アニメーション","title":"■ 漢字テキストを表示する","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"「IPAゴシック」フォントがインストールされている必要がある．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"文字情報技術促進協議会 IPAexフォントおよびIPAフォントについて","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ENV[\"GKS_ENCODING\"] = \"utf8\"\nusing Plots\ngr(fontfamily = \"IPAGothic\") # <=\nplot()\nannotate!(0.5,0.5,\"こんにちわ\")","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"(Image: )","category":"page"},{"location":"ch05/#プロット・オブジェクト","page":"第5回：▼ 画像の保存・アニメーション","title":"■ プロット・オブジェクト","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"関数 plot と plot! はプロット・オブジェクトを作る． 複数のプロットを作成する場合には，プロット・オブジェクトを陽に扱う必要がある．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ts = 0:pi/18:2pi\nxs = cos.(ts)\nys = sin.(ts)\n# 新しいプロットの作成\nplot(xs,ys)\n# 既存のプロットに上書き\nplot!(2xs,2ys)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"上のコードの最後の2行を， プロットオブジェクトを陽に出して記述すると以下のようになる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 新しいプロットオブジェクト p1 を作る\np1 = plot(xs,ys)\n# p1に上書き\nplot!(p1, 2xs,2ys)\nnothing #hide","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"(図面は同じなので省略)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"関数 plot!(p,) のように，プロット・オブジェクト p を第1引数に記載すると， p に対してプロット・オブジェクトが修正される． プロットオブジェクトを変更する関数  xlims!，ylims!，xlabel!，ylabels! などの 第1引数にもプロットオブジェクトを指定できる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\nplot!(aspect_ratio=:equal)\nxlims!(p1,-4,4)\nylims!(p1,-4,4)","category":"page"},{"location":"ch05/#複数のプロットを行列として配置する","page":"第5回：▼ 画像の保存・アニメーション","title":"▼ 複数のプロットを行列として配置する","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"複数のプロット（サブプロット）・オブジェクトを縦横に配置して， 一つのプロットにまとめることができる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\nusing Plots.PlotMeasures\ncloseall() #hide\nts = 0:pi/18:2pi\nxs = cos.(ts)\nys = sin.(ts)\n\np1 = plot(xs, ys)\np2 = plot(xs.+1,ys.+1)\nnothing #hide","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"関数 plot の直後に，複数のサブプロット・オブジェクトを指定し， さらに，キーワード引数 layout=(nx,ny) と併用しよう． 複数のサブプロットが nx x ny の行列の形に並ぶ．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 2行\nplot(p1,p1, layout=(2,1))","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 2列\nplot(p1,p1, layout=(1,2))","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 2行 2列\nplot(p1,p2,p1,p1, layout=(2,2))","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"p2 が，どこに配置されたか観察せよ．","category":"page"},{"location":"ch05/#上下のサブプロットで横軸を共通にする","page":"第5回：▼ 画像の保存・アニメーション","title":"▼ 上下のサブプロットで横軸を共通にする","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"上記2行の配置の例で，上下の横軸は独立である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\n# 2行\nplot(p1,p2, layout=(2,1))","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"上下のサブプロットの縦軸を共通にするには， キーワードパラメータ link=:x を用いる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\n# 2行．横軸を共通とする\np3=plot(p1,p2, layout=(2,1), link=:x)  # <=\n# 共通の横軸の描画範囲を変更する\nxlims!(p3,-4,4)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"上下のサブプロットを近づけるには， bottom_margin= で，サブプロット下側の余白を詰める．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"さらに，下サブプロットの凡例を， 上サブプロットの凡例に含めた．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\np1a=plot(xs, ys, xaxis=:false, # <= x軸を表示させない\n    lc=1,label=\"circle1\")\n# 下サブプロットに凡例はつけない\np2a=plot(xs.+1,ys.+1,lc=2,label=\"\")\nplot!(p2a, xlims=(-4,4), ylims=(-4,4))\n# 上サブプロットに表示されない位置にデータを追加し，\n# 下サブプロットに表示すべき凡例を指定する\nplot!(p1a, [-1],[-1], lc=2, label=\"circle2\")\nplot!(p1a, xlims=(-4,4), ylims=(-4,4))\np3a=plot(p1a,p2a, link=:x,\n   layout=(2,1), \n   bottom_margin=[-20px 0px])  # <= 要調整","category":"page"},{"location":"ch05/#左右のサブプロットで縦軸を共通にする","page":"第5回：▼ 画像の保存・アニメーション","title":"▼ 左右のサブプロットで縦軸を共通にする","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"同様に， 2列の配置の例 layout=(1,2) で， キーワードパラメータ link=:y を用いて， 独立であった左右の縦軸を共通にできる （左軸を修正すると，右軸にも反映される）．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\n# 2列．縦軸を共通とする\np4=plot(p1a,p2a, layout=(1,2), link=:y)\n# 共通の横軸の描画範囲を変更する\nylims!(p4,-4,4)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"左右のサブプロットを近づけるには， right_margin= で，サブプロット右側の余白を詰める．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"さらに，右サブプロットの凡例を， 左サブプロットの凡例に含めた．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\np1b=plot(xs, ys, \n    lc=1,label=\"circle1\")\n# 下サブプロットに凡例はつけない\np2b=plot(xs.+1,ys.+1,lc=2,\n    yaxis=:false, # <= y軸を表示させない\n    label=\"\")\nplot!(p2b, xlims=(-4,4), ylims=(-4,4))\n# 上サブプロットに表示されない位置にデータを追加し，\n# 下サブプロットに表示すべき凡例を指定する\nplot!(p1b, [-1],[-1], lc=2, label=\"circle2\")\nplot!(p1b, xlims=(-4,4), ylims=(-4,4))\np3b=plot(p1b,p2b, link=:y,\n   layout=(1,2), \n   right_margin=[-30px 0px])  # <= 要調整","category":"page"},{"location":"ch05/#鉛直上投げ自由落下運動を描く・上下2枚のサブプロット","page":"第5回：▼ 画像の保存・アニメーション","title":"▲ 鉛直上投げ自由落下運動を描く・上下2枚のサブプロット","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"前章の ▼ 鉛直上投げ自由落下運動を描くでは， 速度-時刻，高さ-時刻の二つのプロットを作成した． 今度は，横軸 時刻を共通にした上下2枚のサブプロットを作成せよ．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"模範解答の例のみ示す．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"さらに，初速度 v0 を，色々変えて描け．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\nusing Plots.PlotMeasures\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\nplot(framestyle=:axes, grid=false)\nv0 = 10 # m/s\ng = 9.8 # m/s^2\n\nts = 0:0.1:3 # s\nvs = v0 .- g * ts\nys = v0 * ts .- g * ts .^ 2 / 2\np1 = plot!(ts, vs, lc=1,\n    ylabel=\"v / m s^-1\", xaxis=:false,\n    label=\"velocity\")\np2 = plot(ts, ys, lc=2,\n    xlabel=\"time / s\", ylabel=\"y / m\",\n    label=\"\")\nplot!(p1, [-10],[10], lc=2,label=\"height\")\nylims!(p1,-20,10)\nhline!(p1, [0]; aux...)\nvline!(p1, [v0/g]; aux...)\nvline!(p2, [v0/g]; aux...)\np3 = plot(p1,p2, link=:x,\n   layout=grid(2,1), \n   bottom_margin=[-30px 0px])\nxlims!(p3, 0, 3)\nsavefig(\"ball-plot-p3.svg\")\nnothing","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"(Image: )","category":"page"},{"location":"ch05/#ダブルYプロットを描く","page":"第5回：▼ 画像の保存・アニメーション","title":"▼ ダブルYプロットを描く","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ダブルYプロットは， x軸を共通として，左と右に，2つの y軸を配置するプロットである．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"元のプロット・オブジェクトに，twinx() を追加する． 関数 twinx() は，直近に描かれたプロットオブジェクトに対して，横軸（x 軸）が共通で， 右側に新しい縦軸（x 軸）を持つ，新しいプロットオブジェクトを作る．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\ncloseall() #hide\nts = 0:pi/18:2pi\nxs = cos.(ts)\nys = sin.(ts)\n\nplot(xs, ys)\np2=plot!(twinx(), xs.+1,ys.+1)\nnothing #hide","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"プロット・オブジェクトを陽に表す場合は，関数 twinx(p) を用いる．プロット・オブジェクト p を元にすることを除き， twinx() と同様である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"p1=plot(xs, ys)\np2=plot!(twinx(), xs.+1,ys.+1)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"（結果は同じ．図は省略）","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"横軸と左縦軸を調整する場合は p1を， 右縦軸を調整する場合は p2 を対象とする．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ylims!(p1, -1.5,2.5)  # left axis\nylims!(p2, -1.5,2.5)  # right axis\nxlims!(p1,-2.5,2.5) # common x axis\nplot!(p1, aspect_ratio=:equal)\np1","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ここまで，p1, p2 の両方に凡例が描画されてしまっている． p1 側に，凡例を寄せる方法については，追って説明する．","category":"page"},{"location":"ch05/#鉛直上投げ自由落下運動を描く・ダブルYプロット","page":"第5回：▼ 画像の保存・アニメーション","title":"▲ 鉛直上投げ自由落下運動を描く・ダブルYプロット","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"上の ▲ 鉛直上投げ自由落下運動を描く・上下2枚のサブプロット では，上下2枚のサブプロットを作成した． 今度は，ダブルYプロットとして描け．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"模範解答の例のみ示す．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"さらに，初速度 v0 を，色々変えて描け． 速度 0 において高さが最高になることを，うまく表示せよ．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\nv0 = 10 # m/s\ng = 9.8 # m/s^2\n\nts = 0:0.1:3 # s\nvs = v0 .- g * ts\nys = v0 * ts .- g * ts .^ 2 / 2\np1 = plot(ts, vs, lc=1,\n    ylabel=\"v / m s^-1\", xlabel=\"time / s\",\n    label=\"velocity\")\np2 = plot!(twinx(p1), ts, ys, lc=2,\n    xlabel=\"\", ylabel=\"y / m\",\n    label=\"\")\nhline!(p1,[0]; aux...)\nvline!(p1,[v0/g]; aux...)\nplot!(p1, [-10],[10], lc=2,label=\"height\")\nxlims!(p1,-0.2,3.2)\nsavefig(\"ball-plot-dy.svg\")\nnothing","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"(Image: )","category":"page"},{"location":"ch05/#プロットデフォルトの設定11","page":"第5回：▼ 画像の保存・アニメーション","title":"プロットデフォルトの設定11","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing LaTeXStrings\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch05/#画像と画像ファイル","page":"第5回：▼ 画像の保存・アニメーション","title":"▶ 画像と画像ファイル","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ファイルシステムを簡単に説明した後， 画像ファイルを保存する方法を説明する．","category":"page"},{"location":"ch05/#ファイル名・パス名・拡張子","page":"第5回：▼ 画像の保存・アニメーション","title":"▶ ファイル名・パス名・拡張子","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"Windows, MacOS, Linux など，多くの「オペレーティング・システム（OS; Operating System） 」では， 「フォルダ（folder）」あるいは「ディレクトリ（directory）」と呼ばれる階層構造の中に，ファイルを格納する．以下では，Unixにならい，ディレクトリの呼称で統一する．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ファイルが格納されたディレクトリは，「ファイルの属性」で調べることができる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"Windowsのデスクトップ・アプリケーション「ペイント」で適当な絵を描いて，PNG形式で image1.png という名前でデスクトップに保存しよう．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ファイル image1.png をデスクトップ上で選んで右クリック，「プロパティ」メニューを選ぶと，そのファイルの属性（プロパティ，property）が表示される．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"「場所」という属性に，このファイルが格納されたディレクトリが表示される． Windows では c:¥Users¥hs¥Desktop というディレクトリ名は，ユーザ名 hs のデスクトップである．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"このファイルの完全な名前（「絶対パス absolute path」; あるいは「フルパス full path」）は  c:¥Users¥hs¥Desktop¥image1.png である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"このファイルの名前は，.png で終わっている．この部分は，ファイルの種類を示しており，拡張子と呼ばれる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"(Image: )","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"note: Note\nデスクトップやエクスプローラでは，いくつかの拡張子が表示されない設定になっている場合がある． 拡張子を表示するには，次のようにする．Windows 10では「コントローラ・パネル」から「エクスプローラ・オプション」を開く．\nWindows 11では「ファイル・エクスプローラ」を表示．「…」のアイコンを押して「オプション」を選び，「フォルダー・オプション」を開く\n「表示」タブを選択\n「登録されている拡張子は表示しない」のチェックを外す\n下の「OK」ボタンを押すと，この設定が適用される(Image: )","category":"page"},{"location":"ch05/#Juliaでのパス名","page":"第5回：▼ 画像の保存・アニメーション","title":"▶ Juliaでのパス名","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"フォルダ（folder）（あるいはディレクトリ directory）の区切りに使われる文字は OSごとに異なるが，Julia言語では，OSに依らずスラッシュ文字 / で区切ることになっている． すなわち，Windows での絶対パス c:¥Users¥hs¥Desktop¥image1.png は， Juliaでは /Users/hs/Desktop/image1.png と表記される． さらに，ドライブ名 c: を明示する場合には， c:/Users/hs/Desktop/image1.png と表記する．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ホームディレクトリ（home directory）は，ユーザごとに用意された個人用のディレクトリである． 関数 homedir() は，ホームディレクトリを文字列として返す．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"homedir()  # ユーザ名ごとに異なる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"Windows と MacOS では，ユーザのホームフォルダ（ディレクトリ）は， /Users 直下のユーザ名のフォルダである．さらに，デスクトップは，ユーザのホームフォルダ（ディレクトリ）直下の Desktop という名前のフォルダである． すなわち，このテキストを書いている hs というユーザについては，","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ホーム・フォルダ（ディレクトリ）は /Users/hs\nデスクトップ・フォルダ（ディレクトリ）は /Users/hs/Desktop","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"関数 joinpath() は，ディレクトリ階層を意識して，パス名を繋げた文字列を返す．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"joinpath(\"/Users\", \"hs\", \"Desktop\", \"image1.png\") ","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"絶対パスに対して，フォルダ（あるいはディレクトリ）を指定せずに，ファイル名のみ指定する場合を「相対パス（relative path）」による指定という．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"相対パスでは，現在の作業フォルダ（あるいは作業ディレクトリ current working directory）を基準に絶対パスを決める．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"現在の作業ディレクトリ（current working directory）は，関数 pwd() で得られる（print working directory）．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"pwd()  # 各自異なる","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"作業ディレクトリ（カレント・ディレクトリ current directory）を変更するには，関数 cd() を用いる（change working directory）．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"例えば，ユーザ名 hs が作業ディレクトリをデスクトップに変更するには，以下のようにする．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"cd(\"/Users/hs/Desktop\")  # 各自の環境に応じて書き換えること\n# これでもよい\ncd(joinpath(homedir(),\"desktop\"))","category":"page"},{"location":"ch05/#画像ファイルの種類","page":"第5回：▼ 画像の保存・アニメーション","title":"▶ 画像ファイルの種類","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"画像ファイルの形式は，大きく分けてビットマップ画像とベクトル（またはベクタ）画像に大別できる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ビットマップ画像（bitmap image）は，画素（pixel）の集合として画像を格納するファイル形式である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"JPEGファイル（拡張子 JPEGまたはJPG）は，写真画像によく用いられる．圧縮率は高いが，元の画像を復元しない場合がある．\nGIFファイル．256 色までの画像を表現できる．複数の画像を格納でき，アニメーションも格納できる（GIFアニメーション）．\nPNGファイル．より多数の色を表現できる．元の画像に劣化がなく復元できる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"「ベクトル画像（vector image）」は，直線や円などの図形の組合せとして画像を格納するファイル形式である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"EPS（Encapsulated PostScript）\nPDF（Portable Document Format）\nSVG（Scalable Vector Graphics）\nWMF（Windows Metafile）","category":"page"},{"location":"ch05/#画像ファイルの保存","page":"第5回：▼ 画像の保存・アニメーション","title":"▶ 画像ファイルの保存","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"savefig(fn) \nsavefig(p,fn)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"関数 savefig(fn) は，直近で描いたプロットをファイル名 fn として保存する． 関数 savefig(p, fn) は，プロット・オブジェクト p をファイル名 fn として保存する．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"以下では，現在の作業フォルダ（working folder あるいは カレント・フォルダ，current folder）の下に，ch04-image1.png という名前で，PNG画像ファイルを保存する． 同じ名前のファイル名が存在しても警告されず，上書きされる． 画像ファイルの種類は， 拡張子部分（ファイル名のピリオド.以降）で判断される．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"ts = 0:pi/18:2pi\nxs = cos.(ts)\nys = sin.(ts)\n# 新しいプロットの作成\nplot(xs,ys)\nsavefig(\"ch04-image1.png\")\nnothing #hide","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"（約17KB）","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"note: Note\ndpi（dots per inch）は，ビットマップ画像の解像度であり，1インチ内（1インチは 約 25.4mm）の画素数を示す．粗い Webページの画像は 100 dpi 程度である．\n低品位・中品位の印刷物の画像は 150 dpi 程度である．\nオフィス向けプリンタの解像度は 300 から 600 dpi 程度である．\n高品位な出版物では，最低 600 dpi を求められる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"既定の dpi は 100である．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"default(:dpi)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"プロットの dpi を 300 に変更してから，ch04-image2.png という名前で保存する． ファイルサイズが大きくなり，画像も鮮明となる．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"# 続けて\nplot!(dpi=300)\nsavefig(\"ch04-image2.png\")\nnothing #hide","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"（約64KB）","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"note: Note\n「保守的なファイル名を使おう」ファイル名やフォルダー名（ディレクトリ名）に用いられる文字の種類は， OS やネットワーク・システムにより異なる． ファイル名の「文字化け」を避けるために，ファイル名は，以下のように選んでおくことを勧める．ファイル名を，半角の英数字 a-zA-Z0-9 およびマイナス記号 - のみで構成する．拡張子の直前の文字として ピリオド . を用いる．\n拡張子の前に半角のピリオド . を用いてもよい．\n半角の英大文字と英小文字は区別されないとする．","category":"page"},{"location":"ch05/#アニメーション","page":"第5回：▼ 画像の保存・アニメーション","title":"▲ アニメーション","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"anim=Animation() : アニメーション・オブジェクト anim を作る\nframe(anim, p) : プロット・オブジェクト p を anim に追加する\ngif(anim, filename, fps=数字) : アニメーションGIFを作り，ファイル名 filename として保存する．fps= は frames per second （1秒あたりのフレーム数）","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"点の履歴を残す","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\np = plot(aspect_ratio=:equal, framestyle=:box,\n    xlims=(-1.2,1.2), ylims=(-1.2,1.2))\n\nanim = Animation()\nfor t in 0:10:350\n    scatter!(p, [cosd(t)], [sind(t)], shape=:circle, mc=1, label=\"\")\n    frame(anim, p)\nend\ngif(anim, \"circleA1.gif\", fps=20)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"一点のみプロットする","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\n\nanim = Animation()\nfor t in 0:10:350\n    p = plot(aspect_ratio=:equal, framestyle=:box,\n        xlims=(-1.2,1.2), ylims=(-1.2,1.2))\n    scatter!(p, [cosd(t)], [sind(t)], shape=:circle, mc=1, label=\"\")\n    frame(anim, p)\nend\ngif(anim, \"circleA2.gif\", fps=20)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"マクロ @animate を用いると，上記のコードを簡潔に書ける．すなわち，アニメーション・オブジェクトの作成 Animation() を陽に書かなくてよい．","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\n\np = plot(aspect_ratio=:equal, framestyle=:box,\n    xlims=(-1.2,1.2), ylims=(-1.2,1.2))\n\nanim = @animate for t in 0:10:350\n    scatter!(p, [cosd(t)], [sind(t)], shape=:circle, \n    mc=1,label=\"\")\nend\ngif(anim, \"circleB1.gif\", fps=20)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"（結果は同じなので省略）","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"using Plots\n\nanim = @animate for t in 0:10:350\n    scatter(aspect_ratio=:equal, framestyle=:box,\n        xlims=(-1.2,1.2), ylims=(-1.2,1.2),\n        [cosd(t)], [sind(t)], shape=:circle, \n        mc=1,label=\"\")\nend\ngif(anim, \"circleB2.gif\", fps=20)","category":"page"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"（結果は同じなので省略）","category":"page"},{"location":"ch05/#練習：斜めに飛ばした球の軌跡・動画","page":"第5回：▼ 画像の保存・アニメーション","title":"▲ 練習：斜めに飛ばした球の軌跡・動画","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"▲ 練習：斜めに飛ばした球の軌跡を表すアニメーションを作成せよ． 各時刻の球の位置のみ描画する動画と， 球の位置の履歴を描画する動画の両方を描いてみよ． さらに，初速度v0や角度bを変えた場合を比較できるような動画を作成せよ．","category":"page"},{"location":"ch05/#今回のまとめ","page":"第5回：▼ 画像の保存・アニメーション","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch05/","page":"第5回：▼ 画像の保存・アニメーション","title":"第5回：▼ 画像の保存・アニメーション","text":"テキストをプロットに表示する\nサブプロット（複数の軸を持つプロット）\n画像ファイルの保存\nファイルシステム\n動画","category":"page"},{"location":"ch11/#ch11","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"","category":"section"},{"location":"ch11/#プロットデフォルトの設定11","page":"第11回：行列・線形代数","title":"プロットデフォルトの設定11","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"## ■ ベクトルに対する演算\n\nベクトルの演算としては，これまでに，以下を説明した．\n\n- ベクトルのスカラー倍\n- ベクトルどうしの和差\n- ベクトルを引数とする演算\n-- 絶対値\n-- 要素の和\n-- 要素の積\n-- 要素の平均値，標準偏差","category":"page"},{"location":"ch11/#ベクトルの線形結合からなる格子点","page":"第11回：行列・線形代数","title":"▶ ベクトルの線形結合からなる格子点","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"複数のベクトルの線形結合とは， それらのベクトルのスカラー倍を加え合わせたものを，それらのベクトルの線形結合という．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"二つのベクトル a_1=beginbmatrix 1  0 endbmatrix a_2=beginbmatrix 0  1 endbmatrix の「整数」係数の線形結合による格子点を描く．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"さらに， b_1=beginbmatrix dfrac12  dfrac12 endbmatrix b_2=beginbmatrix dfrac12  -dfrac12 endbmatrix の「整数」係数の線形結合からなる格子点を重ねる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\nplot(framestyle=:origin)\n\na1 = [1, 0];\na2 = [0, 1];\nfor m = -3:3, n = -3:3\n   r = m * a1 + n * a2\n   scatter!([r[1]], [r[2]], ms=4, lc=1, shape=:circle)\nend\n\nb1 = [1 / 2, 1 / 2];\nb2 = [1 / 2, -1 / 2];\nfor m = -3:3, n = -3:3\n   r = m * b1 + n * b2\n   scatter!([r[1]], [r[2]], lc=2, shape=:circle)\nend\n\nxlims!(-3,3)\nylims!(-3,3)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"どちらも正方格子（cubic lattice）であるが，座標系の取り方が異なる． 基底 b_1 b_2 で張られる格子点は， 基底 a_1 a_2 で張られる格子点の中央の点も含んでいることが観察できる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"今度は， c_1=beginbmatrix 1  0 endbmatrix c_2=beginbmatrix -dfrac12  dfracsqrt32 endbmatrix で張られる格子点を描いてみる． これは，六方格子（hexagonal lattice）と呼ばれる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\nplot!(framestyle=:origin)\n\nc1 = [1, 0];\nc2 = [-1 / 2, sqrt(3) / 2];\nfor m = -3:3, n = -3:3\n   r = m * c1 + n * c2\n   scatter!([r[1]], [r[2]], mc=3, shape=:circle)\nend\n\nxlims!(-3,3)\nylims!(-3,3)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"### ▼ ベクトルのスカラー倍，和差\n- 絶対値\n- 随伴\n- 転置","category":"page"},{"location":"ch11/#平面ベクトルの内積","page":"第11回：行列・線形代数","title":"■ 平面ベクトルの内積","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 dot(a,b) は，ベクトル a と b との「内積（inner product）」を返す．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"中置き演算子 ⋅ を用いて a⋅b と書くこともできる． 「 ⋅ 」 は，バックスラッシュ \\ に続けて cdots と入力してから，TABキーを押すことによって入力できる． かな漢字変換システムで入力できる「・」（中黒=なかぐろ）とは，別の文字である．","category":"page"},{"location":"ch11/#平面ベクトルどうしのなす角を求める","page":"第11回：行列・線形代数","title":"▶ 平面ベクトルどうしのなす角を求める","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"ベクトル a と bの内積は，a と b のなす角theta を用いて，以下のように定義される．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"acdot b = leftvertarightvert leftvertbrightvert costheta","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"これから，theta を求めるには，次の式を用いればよい．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"costheta = dfracacdot b leftvertarightvert leftvertbrightvert ","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"また，内積の定義から，自分自身の内積は，ノルムの二乗であることも分かる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"acdot a = leftvertarightvert^2","category":"page"},{"location":"ch11/#例：ベクトルどうしのなす角度を求める","page":"第11回：行列・線形代数","title":"▶ 例：ベクトルどうしのなす角度を求める","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"上で出てきたベクトルのうち，a1, a2, c1, c2 のノルムは 1 である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"using LinearAlgebra\n#\na1 = [1, 0];\na2 = [0, 1];\nb1 = [1 / 2, 1 / 2];\nb2 = [1 / 2, -1 / 2];\nc1 = [1, 0];\nc2 = [-1 / 2, sqrt(3) / 2];\nnorm(a1)\nnorm(a2)\nnorm(c1)\nnorm(c2)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"b1 と b2 のノルムは dfrac1sqrt2 である． 自分自身の内積の値と比較しよう","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"b1 ⋅ b1\nnorm(b1)\nnorm(b1)^2\nb1 ⋅ b1\nnorm(b2)\nnorm(b2)^2","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"内積から算出した costhetaから角度 theta を得るには，関数 acos() を用いる． 関数 acos(r) は cos theta = r となる theta をラジアンで返す． 関数 acosd(r) は，theta を角度で返す．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"これらのベクトルのなす角度を算出しよう． a1 と a2，および，b1 と b2 は直交している． a1 と b1 は，45° をなしている． c1 と c2 は，120° をなしている，ことが計算できた．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"acosd(a1 ⋅ a2)\nacosd(b1 ⋅ b2 / norm(b1) / norm(b2))\nacosd(a1 ⋅ b1 / norm(a1) / norm(b1))\nacosd(c1 ⋅ c2)","category":"page"},{"location":"ch11/#タプル","page":"第11回：行列・線形代数","title":"■ タプル","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"タプル（tuple）は，複数の値をカンマ , で区切って並べ，括弧 () で囲んだものである． ベクトルと似たように使えるが，要素を更新することはできない．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"# 要素 1つのタプル\n(1,)\n# 要素 2つのタプル\n(1, 2)\n# 要素 3つのタプル\na = (1, 2, 3)\n# タプルの長さ\nlength(a)\n# タプルの要素\na[2]\n# 更新はできない\na[2] = 3 # => MethodError","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数には，複数の値を返すものがある．このとき，タプルが用いられる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"例えば，divrem(x,d) は，div(x,d) と rem(x,d) の二つの値を返す．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"divrem(5, 3)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"タプルを右辺において，複数の変数に同時に代入できる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"x, y = (1, 2, 3)\nx\ny","category":"page"},{"location":"ch11/#行列","page":"第11回：行列・線形代数","title":"■ 行列","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"要素を ; で区切って列挙したものを， 大かっこ [] で囲むと，行列を作ることができる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"3行 4列の行列","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列の寸法や要素の数は，以下のように得られる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"# 寸法 => タプル\nsize(a)\n# 第1軸 = 列の寸法\nsize(a, 1)\n# 第2軸 = 行の寸法\nsize(a, 2)\n# 全要素数\nlength(a)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"■ ベクトルも，1次元の「配列（array）」である． したがって，同じ関数が用意されている．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"v = [10,20,30]\n# 寸法 => タプル\nsize(a)\n# 第1軸 = 列の寸法\nsize(a, 1)\n# 全要素数\nlength(a)","category":"page"},{"location":"ch11/#行列の転置","page":"第11回：行列・線形代数","title":"■ 行列の転置","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"transpose(a) は，行列 a を転置する．すなわち，行と列を入れ替える．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nsize(a)\nb = transpose(a)\nsize(b)","category":"page"},{"location":"ch11/#行列のスカラー倍・スカラーの和差","page":"第11回：行列・線形代数","title":"▶ 行列のスカラー倍・スカラーの和差","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"以下，しばらく，2x2 の正方行列を例に説明する．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12; 21 22]\na * 2\na .+ 2\na .- 2","category":"page"},{"location":"ch11/#行列に列ベクトルを加減","page":"第11回：行列・線形代数","title":"▶ 行列に列ベクトルを加減","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12; 21 22]\nv = [1, -1]\na .+ v\na .- v","category":"page"},{"location":"ch11/#行列どうしの加減","page":"第11回：行列・線形代数","title":"▶ 行列どうしの加減","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12; 21 22]\nb = a * 2\na + b\na - b","category":"page"},{"location":"ch11/#添字を用いた行列の要素の読み書き","page":"第11回：行列・線形代数","title":"■ 添字を用いた行列の要素の読み書き","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列の添字は， 第1軸（列）と第2軸（行）の番号を，カンマ , で区切って並べ，大かっこ [] で囲んだものである．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"ベクトルと同じように，添字で示された要素の読み出し， 添字で示された要素の書き換えができる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"# 添字による要素の読み出し\na[2, 2]\n# 行列の要素の更新\na[1, 2] = 30\na","category":"page"},{"location":"ch11/#部分行列","page":"第11回：行列・線形代数","title":"■ 部分行列","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\n# 列を取り出す\na[:, 2]\n# 行を取り出す\na[2, :]\n# 部分行列\na[1:2, 1:2]\na[2:3, 2:3]","category":"page"},{"location":"ch11/#行列に入れた点座標で図形を描画する","page":"第11回：行列・線形代数","title":"▶ 行列に入れた点座標で図形を描画する","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nxys = Float64[1 2 2 1; 1 1 3 1]\n@show xys\nplot!(xys[1, :], xys[2, :])\nxys .+= [0.5, 0.5]\nplot!(xys[1, :], xys[2, :])\nxlims!(0, 4)\nylims!(0, 4)\nplot!()","category":"page"},{"location":"ch11/#行列とベクトルの積","page":"第11回：行列・線形代数","title":"■ 行列とベクトルの積","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12; 21 22]\nv = [1, -1]\na * v","category":"page"},{"location":"ch11/#回転行列とベクトルの積","page":"第11回：行列・線形代数","title":"▶ 回転行列とベクトルの積","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"以下の形の行列を，平面空間に対する回転行列という．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"R(theta) =\nbeginbmatrix costheta  -sintheta \nsintheta  cos theta endbmatrix","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"回転行列とベクトルの積は， そのベクトルを，原点の周りに 反時計方向に角 theta だけ回転する写像に対応する．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"x^prime = R(theta) x","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"# 回転行列\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\nxy = r15 * xy\nxy = r15 * xy","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"これらを描こう．軌跡は円を描いた．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\nplot!(framestyle=:origin)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\n\nfor i = 0:20\n   global xy\n   scatter!([xy[1]], [xy[2]], ms=4, shape=:circle)\n   xy = r15 * xy\nend\n\nxlims!(-1.2, 1.2)\nylims!(-1.2, 1.2)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"原点以外の点 c の周りで回転する場合は，回転の中心をずらして，","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"beginaligned\n(x^prime-c)  = R(theta) (x-c) \nx^prime  = c + R(theta) (x-c)\nendaligned","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"とすればよい．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxy = [1, 0]\nc = [ 0.5, 0.5]\n\nfor i = 0:20\n   global xy\n   scatter!([xy[1]], [xy[2]], ms=4, shape=:circle)\n   xy = c + r15 * (xy - c)\nend\n\nvline!([c[1]]; aux...)\nhline!([c[2]]; aux...)\n\nxlims!(-2, 2)\nylims!(-2, 2)\nplot!()","category":"page"},{"location":"ch11/#行列と行列の積","page":"第11回：行列・線形代数","title":"■ 行列と行列の積","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 2; 3 4]\nb = [5 6; 7 8]\na * b","category":"page"},{"location":"ch11/#座標を行列に格納した図形を回転する","page":"第11回：行列・線形代数","title":"▶ 座標を行列に格納した図形を回転する","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\nplot!(framestyle=:origin)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxys = Float64[1 2 2 1; 1 1 3 1]\n\nfor i = 0:20\n   global xys\n   plot!(xys[1, :], xys[2, :])\n   xys = r15 * xys\nend\n\nxlims!(-4, 4)\nylims!(-4, 4)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"回転中心をずらしてみる","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nxys = Float64[1 2 2 1; 1 1 3 1]\nc = [1/2, 1/2]\n\nfor i = 0:20\n   global xys\n   plot!(xys[1, :], xys[2, :])\n   xys = c .+ r15 * (xys .- c)\nend\n\nvline!([c[1]]; aux...)\nhline!([c[2]]; aux...)\n\nxlims!(-4, 4)\nylims!(-4, 4)\nplot!()","category":"page"},{"location":"ch11/#いろいろな行列の生成","page":"第11回：行列・線形代数","title":"■ いろいろな行列の生成","text":"","category":"section"},{"location":"ch11/#要素が-0-の行列を作る","page":"第11回：行列・線形代数","title":"■ 要素が 0 の行列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"Base.zeros — Function","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 zeros は，要素が零 0 の行列を作るのに使える．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 zeros(n,m) は，要素の型が浮動小数点で，寸法 (n,m) の行列を作る．\n関数 zeros(T, n,m) は，要素の型が T で，寸法 (n,m) の行列を作る．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"zeros(3, 4) # 要素は浮動小数点\nzeros(Float64, 3, 4) # 上と同じ\nzeros(Int64, 3, 4) # 要素は整数","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列 a と同じ寸法を持つ 0 ベクトルを作るには，","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nzeros(Int64, size(a))\nzeros(Float64, size(a))","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 zero.() を以下のように用いれば 行列 a の要素の型と同じ要素の型を持ち，a と寸法が等しい 0 ベクトルを作れる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nzero.(a)","category":"page"},{"location":"ch11/#要素が-1-の行列を作る","page":"第11回：行列・線形代数","title":"■ 要素が 1 の行列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"Base.ones — Function","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 ones は，要素が零 1 の行列を作るのに使える．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 ones(n,m) は，要素の型が浮動小数点で，寸法 (n,m) の行列を作る．\n関数 ones(T, n,m) は，要素の型が T で，寸法 (n,m) の行列を作る．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"ones(3, 4) # 要素は浮動小数点\nones(Float64, 3, 4) # 上と同じ\nones(Int64, 3, 4) # 要素は整数","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列 a と同じ寸法を持つ 1 行列を作るには，","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\nones(Int64, size(a))\nones(Float64, size(a))","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 one.() を以下のように用いれば 行列 a の要素の型と同じ要素の型を持ち，a と寸法が等しい 1 行列を作れる．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [11 12 13 14; 21 22 23 24; 31 32 33 34]\none.(a)","category":"page"},{"location":"ch11/#対角要素を指定して，正方行列をつくる","page":"第11回：行列・線形代数","title":"■ 対角要素を指定して，正方行列をつくる","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"using LinearAlgebra\nDiagonal([1, 2, 3])","category":"page"},{"location":"ch11/#疑似乱数を要素とする行列を作る","page":"第11回：行列・線形代数","title":"■ 疑似乱数を要素とする行列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"rand(3, 3)","category":"page"},{"location":"ch11/#ベクトルをまとめて行列を作る","page":"第11回：行列・線形代数","title":"■ ベクトルをまとめて行列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1, 2]\nb = [3, 4]\nc = [5, 6]\n[a b c]\nm = hcat(a, b, c)\nsize(m)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"さらに転置をとろう．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"mt = transpose(m)\nsize(mt)","category":"page"},{"location":"ch11/#内包表現を用いて行列を作る","page":"第11回：行列・線形代数","title":"● 内包表現を用いて行列を作る","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"[[t, t .^ 2] for t in [0, 2, 4]]\nhcat([[t, t .^ 2] for t in [0, 2, 4]]...)","category":"page"},{"location":"ch11/#楕円を描く・回転する","page":"第11回：行列・線形代数","title":"▶ 楕円を描く・回転する","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nts = 0:pi/18:2pi\nxs = 2 * cos.(ts)\nys = sin.(ts)\nxys = transpose(hcat(xs, ys))\nplot!(xys[1, :], xys[2, :])\n\nxlims!(-3,3)\nylims!(-3,3)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"note: Note\n楕円の座標を含む行列 xy を作るのに，以下のように● 内包表記を使ってもよい．xy=hcat([ [2*cos.(t), sin(t)] for t=0:pi/18:2pi]...)","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"回転する","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nts = 0:pi/18:2pi\nxys = transpose(hcat(2 * cos.(ts), sin.(ts)))\n\nfor i = 0:5\n   global xys\n   plot!(xys[1, :], xys[2, :])\n   xys = r15 * xys\nend\n\nxlims!(-3,3)\nylims!(-3,3)\nplot!()","category":"page"},{"location":"ch11/#行列式と逆行列","page":"第11回：行列・線形代数","title":"■ 行列式と逆行列","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 2; 2 3]\ndet(a) # 行列式\ninv(a) # 逆行列\na^(-1) # 逆行列","category":"page"},{"location":"ch11/#行列の商（2x2-行列）","page":"第11回：行列・線形代数","title":"■ 行列の商（2x2 行列）","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列 Aとベクトル x に対して，x=Ay を満たすようなベクトル yを，xをAで割った商という．商を求める演算が用意されている．この演算は，Aの逆行列を計算するよりも，計算コストの上で有利である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 2; 2 3]\nv = [1, 1]\na \\ v\nw = [3, 5]\na \\ w","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列 A が正則でない（逆行列が存在しない）場合には，例外が発生する．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"c = [1 2; 2 4]\ndet(c)\nc \\ v # => SingularException","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"同様に，行列 X に対して，X=AY を満たすような行列 Y を，X を A で割った商という．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"b = [1 3; 1 5]\na \\ b","category":"page"},{"location":"ch11/#楕円を，逆に回転する","page":"第11回：行列・線形代数","title":"▶ 楕円を，逆に回転する","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列の商を用いて，楕円を逆回転してみよう．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nr15 = [cosd(15) -sind(15); sind(15) cosd(15)]\nts = 0:pi/18:2pi\nxys = transpose(hcat(2 * cos.(ts), sin.(ts)))\n\nfor i = 0:5\n   global xys\n   plot!(xys[1, :], xys[2, :])\n   xys = r15 \\ xys\nend\n\nxlims!(-3,3)\nylims!(-3,3)\nplot!()","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列式が 0 の行列は，正則ではない","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 2; 2 4]\ndet(a)\nv = [1, 1]\n# 例外を発生する\na \\ v","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"# 例外を発生する\ninv(a)","category":"page"},{"location":"ch11/#空間ベクトル：なす角を求める","page":"第11回：行列・線形代数","title":"▶ 空間ベクトル：なす角を求める","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"空間ベクトルとは，寸法 3 のベクトルである． 内積が 0 なら，それらのベクトルは直交である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"例: 以下の３つのベクトルが，互いに直行することを示せ．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"using LinearAlgebra\n#\na = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\nnorm(a)\nnorm(b)\nnorm(c)\ndot(a, b)\na ⋅ b\nb ⋅ c\nc ⋅ a","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"二つのベクトルのなす角を求めよ．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [-3, 1, 2]\nb = [2, -3, 1]\nab = a ⋅ b\nna = norm(a)\nnb = norm(b)\nr = ab / na / nb\n# ラジアン単位\nacos(r)\n# 角度単位\nacosd(r)\n# 一行で書ける\nacosd(a ⋅ b / norm(a) / norm(b))","category":"page"},{"location":"ch11/#空間ベクトルの外積","page":"第11回：行列・線形代数","title":"■ 空間ベクトルの外積","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 cross(a,b) は，空間ベクトル a と b との外積または「ベクトル積（outer product）」を返す．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"中置き演算子 × を用いて a×b と書く こともできる． × は，バックスラッシュ \\ に times と入力してから， TABキーを押すことによって入力できる． かな漢字変換システムで入力できる「✕」 とは，別の文字である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"外積 atimes b の向きは，a から b へ回転したとき，右ねじが進む方向である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"外積 atimes b の大きさは，a と b のなす角 theta を用いて，以下のように定義される． これは，ベクトル a と b がなす平行四辺形の面積である．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"leftvert atimes brightvert = leftvertarightvert leftvertbrightvert sintheta","category":"page"},{"location":"ch11/#空間座標の基本単位ベクトル","page":"第11回：行列・線形代数","title":"▶ 空間座標の基本単位ベクトル","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1, 0, 0]\nb = [0, 1, 0]\nc = [0, 0, 1]\ncross(a, b)\n# a×b = c\na × b\n# b×c = a\nb × c\n# c×a = b\nc × a","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"別の正規直交系の例","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\n# a×b = c\na × b\n# b×c = a\nb × c\n# c×a = b\nc × a","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"ベクトル３重積","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"３つの空間ベクトルに対して，一般に，以下が成り立つ．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"atimes (b times c) = (acdotc)b - (acdot b)c","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"例： 具体的なベクトルの例で，上式が成り立つことを示せ．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [-3, 1, 2]\nb = [2, -3, 1]\nc = [1, 2, -3]\n# 左辺\nlhs = a × (b × c)\n# 右辺\nrhs = (a ⋅ c) * b - (a ⋅ b) * c","category":"page"},{"location":"ch11/#行列の商（3x3-行列）","page":"第11回：行列・線形代数","title":"▶ 行列の商（3x3 行列）","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"行列 A と行列（またはベクトル） Yに対して， 商 A\\Y は，AX-Yの最小二乗ノルムが最小となる行列（またはベクトル） X を返す． 行列 A が正則なら，A の逆行列を 左から Y に乗じた行列（またはベクトル）と一致する．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"#\na = [-3, 1, 2]\nb = [2, -3, 1]\nw = [a b]\nc = [1, 2, -3]\nv = w \\ c\nw * v - c","category":"page"},{"location":"ch11/#行列の階数（ランク）","page":"第11回：行列・線形代数","title":"▶ 行列の階数（ランク）","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"関数 rank(a) は，行列 a の階数（ランク，rank）を返す．","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [1 / 2, 1 / 2 + sqrt(2) / 4, 1 / 2 - sqrt(2) / 4]\nb = [-1 / 2, 1 / 2 - sqrt(2) / 4, 1 / 2 + sqrt(2) / 4]\nc = [1 / sqrt(2), -1 / 2, 1 / 2]\nv = [a b c]\nrank(v)\n#\na = [-3, 1, 2]\nb = [2, -3, 1]\nc = [1, 2, -3]\nv = [a b c]\nrank(v)","category":"page"},{"location":"ch11/#行列の固有値・固有ベクトル","page":"第11回：行列・線形代数","title":"▼ 行列の固有値・固有ベクトル","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"Ax = lambda x","category":"page"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"a = [4 1; 2 3]\n#\nusing LinearAlgebra\n# 固有値\nlam = eigvals(a)\n# 固有ベクトル\nevs = eigvecs(a)\nevs[:, 1]\nevs[:, 2]\n# 確認する a x - lambda x == 0 になるべき\na * evs[:, 1] - lam[1] * evs[:, 1]\na * evs[:, 2] - lam[2] * evs[:, 2]","category":"page"},{"location":"ch11/#今回のまとめ","page":"第11回：行列・線形代数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch11/","page":"第11回：行列・線形代数","title":"第11回：行列・線形代数","text":"ベクトルの内積\n行列の生成\n行列に対する関数\n行列とベクトルの演算\n行列と行列の演算\n部分行列\n2次元の回転行列","category":"page"},{"location":"LICENSEja/#MIT-License-参考和訳","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"","category":"section"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"Copyright (c) 2018–2024  菅原 宏治 (Hiroharu Sugawara)","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"以下に定める条件に従い，本ソフトウェアおよび関連文書のファイル（以下「ソフトウェア」）の複製を取得するすべての人に対し，ソフトウェアを無制限に扱うことを無償で許可します．これには，ソフトウェアの複製を使用，複写，変更，結合，掲載，頒布，サブライセンス，および/または販売する権利，およびソフトウェアを提供する相手に同じことを許可する権利も無制限に含まれます．","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"上記の著作権表示および本許諾表示を，ソフトウェアのすべての複製または重要な部分に記載するものとします．","category":"page"},{"location":"LICENSEja/","page":"MIT License 参考和訳","title":"MIT License 参考和訳","text":"ソフトウェアは「現状のまま」で，明示であるか暗黙であるかを問わず，何らの保証もなく提供されます．ここでいう保証とは，商品性，特定の目的への適合性，および権利非侵害についての保証も含みますが，それに限定されるものではありません． 作者または著作権者は，契約行為，不法行為，またはそれ以外であろうと，ソフトウェアに起因または関連し，あるいはソフトウェアの使用またはその他の扱いによって生じる一切の請求，損害，その他の義務について何らの責任も負わないものとします．","category":"page"},{"location":"ch03/#ch03","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"","category":"section"},{"location":"ch03/#Jupyter-notebook-によるテキストの入力","page":"第3回：▼ 連続な曲線を描く","title":"■ Jupyter notebook によるテキストの入力","text":"","category":"section"},{"location":"ch03/#Markdownセルと-Markdown-記法","page":"第3回：▼ 連続な曲線を描く","title":"Markdownセルと Markdown 記法","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Jupyter notebook のセルには，複数の種類（Cell type）がある．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"既定のセルの Cell type は，Code である． プログラム片を入力して，SHIFT キーと ENTER キーを同時に押して実行すると， 出力セルに実行結果が表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Cell type を Markdown に変更すると， Markdown 記式によるテキストを入力できる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown 記式でテキストを入力し， SHIFT+ENTERを押して実行すると， Markdown記式で整形された文書が表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown Cells","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown記法では，段落の区切りは空行である． 空行をはさまない行替えは，前の行に続けて，同じ段落に配置される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"文字列の飾り記法は省略する（たくさん使用しない方がよい）．","category":"page"},{"location":"ch03/#URLリンク","page":"第3回：▼ 連続な曲線を描く","title":"URLリンク","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"URLリンクを書くには，次のように記述する．→ [ 表示名 ]( URL )","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"例","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"[Julia 1.9 Documentation](https://docs.julialang.org/en/v1.10/)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Julia 1.9 Documentation","category":"page"},{"location":"ch03/#数式","page":"第3回：▼ 連続な曲線を描く","title":"数式","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Markdown記法では，数式を挿入することができる． ダラー記号 $ 1つで囲まれた数式は行内数式（inline math）， ダラー記号 $ 2つで囲まれた数式は別行立て数式（display math）である． 数式そのものは LaTeX 記法で記述する． いくつか例を示す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"数式内の文字は変数とみなされ，斜体で表される． $x+1$ → x+1\n上付き $x^{2}$ → x^2\n下付き $x_{3}$ → x_3\n分数 $\\dfrac{a}{b}$ → dfracab\n関数 $f(x) = x^{2}+1$ → f(x) = x^2+1\n三角関数 $\\sin{x}, \\tan{x}$ → sinx tanx\n指数対数関数 $\\exp{x}, \\log{x}$ → expx logx\nテキスト内の直立体（roman style） $a\\;\\mathrm{over}\\;b$ → amathrmoverb\n総和 $\\sum_{i=0}^{m}i$ → sum_i=0^mi\n総和を「行立て」する $$\\sum_{i=0}^{m}i$$ →","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sum_i=0^mi","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"積分 $\\int_{0}^{1}x dx$ → int_0^1x dx\n積分を「行立て」する $$\\int_{0}^{1}x dx$$ →","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"int_0^1 x dx","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"カッコのペア\n$\\left( \\dfrac{1}{2} \\right)$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"left( dfrac12 right)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$\\left\\{\\left( \\dfrac{1}{2} \\right)\\right\\}$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"leftleft( dfrac12 right)right","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$\\left[\\left\\{\\left( \\dfrac{1}{2} \\right)\\right\\}\\right]$ → ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"leftleftleft( dfrac12 right)rightright","category":"page"},{"location":"ch03/#鉛直上投げ自由落下運動を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 鉛直上投げ自由落下運動を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"（力学の問題）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"鉛直上向きに投げられた球が，重力のみを感じて自由落下するとする． 時刻 t=0において，高さ y=0, 鉛直上向きの速度 v_0 とすると， 時刻 tにおける，高さ yと 鉛直上向きの速度 v は，以下のように表される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nv  = v_0 - gt \ny  = v_0 t - dfrac12gt^2\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻の速度を描く． 長さの単位としてメートル m , 時間の単位として秒 s を（組立て単位を含めて）一貫して用いる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"重力加速度 g = 98mathrmms^2","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"初速度を v_0 = 10mathrmms としよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻における速度を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot(framestyle=:axes)\nv0 = 10 # m/s\ng = 9.8 # m/s^2\n\nts = 0:0.1:3 # s\nvs = v0 .- g * ts\nplot!(ts, vs, lc=:blue, xlabel=\"time / s\", ylabel=\"v / m s^-1\")","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"各時刻における高さを描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"# 続けて\nys = v0 * ts .- g * ts .^ 2 / 2\nplot(ts, ys, lc=:red, xlabel=\"time / s\", ylabel=\"y / m\")","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"この後の章の ▲ 鉛直上投げ自由落下運動を描く・上下2枚のサブプロット では， 速度-時刻，高さ-時刻の二つのプロットを一つの画像にまとめる．さらに， ▲ 鉛直上投げ自由落下運動を描く・ダブルYプロット では，時刻を共通としたダブルYグラフを作成する．","category":"page"},{"location":"ch03/#練習：鉛直上投げ自由落下運動","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：鉛直上投げ自由落下運動","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"初速度 v0 を増減して描いてみよ．","category":"page"},{"location":"ch03/#練習：斜めに飛ばした球の軌跡","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：斜めに飛ばした球の軌跡","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"（力学の問題）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"鉛直上向きに対して 角度 bをつけて投げた球が，重力のみを感じて運動するとき，その球の軌跡を描け．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"最初は b = 15^circとして描け．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次に，初速度v0を変えた場合を，1つのプロットに示せ． また，角度bを変えた場合を，1つのプロットに示せ．","category":"page"},{"location":"ch03/#定義域・値域","page":"第3回：▼ 連続な曲線を描く","title":"▼ 定義域・値域","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 y=f(x) の定義域（domain）とは， 独立変数（independent variable）x の取りうる値からなる集合である． ちなみに，従属変数（dependent variable） y が取りうる値からなる集合を，値域（range）という","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"本章では， 定義域が実数全体，あるいは，正の数の集合である関数について， プロットを描いてみる．","category":"page"},{"location":"ch03/#定数-pi","page":"第3回：▼ 連続な曲線を描く","title":"▶ 定数 pi","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数 pi は円周率である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"pi","category":"page"},{"location":"ch03/#プロット既定値","page":"第3回：▼ 連続な曲線を描く","title":"プロット既定値","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ndefault(\n   size=(720,480),  # <= 全体の寸法を大きくする\n   lims=:auto, aspect_ratio=:auto,\n   label=\"\",\n   xlabel=\"x\", ylabel=\"y\")\nnothing #hide","category":"page"},{"location":"ch03/#正弦関数・余弦関数を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 正弦関数・余弦関数を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 数式 ラジアン単位 角度単位 pi単位\n正弦 sinx sin(x) sind(x) sinpi(x)\n余弦 cosx cos(x) cosd(x) cospi(x)","category":"page"},{"location":"ch03/#ラジアン単位","page":"第3回：▼ 連続な曲線を描く","title":"ラジアン単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.cos - Function\nBase.sin - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数がラジアン単位の正弦，余弦 sin , cos","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sin(pi / 6)\ncos(pi / 6)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"cos.() や sin.() のように，関数名の直後にピリオド . を入れると， ベクトルや範囲を引数にとり，計算結果をベクトルで返す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"xs = [pi / 4, pi / 6, pi / 2];\nsin.(xs)\ncos.(xs)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"範囲型の引数を与えて，プロットを描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nxs = -2pi:pi/360:2pi\nplot(xlabel=\"radian\", ylims=(-1.2,1.2))\nplot!(xs, cos.(xs), label = \"cos\")\nplot!(xs, sin.(xs), label = \"sin\")\nvline!([0], lc=:black, lw=0.5)","category":"page"},{"location":"ch03/#円周率単位","page":"第3回：▼ 連続な曲線を描く","title":"円周率単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cospi - Function\nBase.Math.sinpi - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数が円周率単位の正弦，余弦 sinpi , cospi","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nxs = -2:1/360:2\nplot(xlabel=\"pi\", ylims=(-1.2,1.2))\nplot!(xs, cospi.(xs), label = \"cospi\")\nplot!(xs, sinpi.(xs), label = \"sinpi\")\nvline!([0], lc=:black, lw=0.5)","category":"page"},{"location":"ch03/#角度単位","page":"第3回：▼ 連続な曲線を描く","title":"角度単位","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cosd - Function\nBase.Math.sind - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"引数が角度単位の正弦，余弦 sind , cosd","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   xlabel=\"degree\", ylims=(-1.2,1.2))\nxs = -360:1:360\nplot!(xs, cosd.(xs), label = \"cosd\")\nplot!(xs, sind.(xs), label = \"sind\")\nplot!(xticks=-360:90:360) # <= 横軸目盛の設定\nvline!([0], lc=:black, lw=0.5)","category":"page"},{"location":"ch03/#ラジアンと角度との相互変換","page":"第3回：▼ 連続な曲線を描く","title":"ラジアンと角度との相互変換","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.rad2deg - Function\nBase.Math.deg2rad - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"# rad2deg\nrad2deg(pi / 4)\nrad2deg(pi / 2)\nrad2deg(pi)\nrad2deg(-pi / 4)\n# deg2rad\ndeg2rad(45)\ndeg2rad(90)\ndeg2rad(180)\ndeg2rad(-45)","category":"page"},{"location":"ch03/#楕円を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 楕円を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"楕円を陰関数で表示すると","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"left(dfracxaright)^2+left(dfracybright)^2 = 1","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"楕円を媒介変数表示（パラメータ曲線）すると","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nx  = a cos theta \ny  = b sin theta\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"媒介変数表示を用いて，楕円上の各点の座標を計算する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"アスペクト比を等しくして，正しい図形を表示しよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal, legend=false)\nts = 0:pi/18:2pi\nxs = cos.(ts)\nys = sin.(ts)\nplot!(xs, ys, label=\"circle\")\nxs2 = 2 * cos.(ts)\nplot!(xs2, ys, label=\"ellipse\")","category":"page"},{"location":"ch03/#アルキメデスの渦を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ アルキメデスの渦を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平面座標上の点 (xy)は， 極座標 (r theta) を用いても表示できる． 平面座標 (x y)と極座標 (r theta) との対応は","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"beginaligned\nx  = r cos theta \ny  = r sin theta\nendaligned","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次の関係で結ばれた曲線を，アルキメデスの渦という．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = theta","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"これを描いてみよう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal, legend=false)\nts = 0:pi/180:2pi\nxs = ts .* cos.(ts)\nys = ts .* sin.(ts)\nplot!(xs,ys)","category":"page"},{"location":"ch03/#練習","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上では theta ge 0 の範囲で，曲線を描いた． パラメータ theta  0 の範囲まで含めたら， どのような曲線になるか，予測せよ． プログラムを書き実行し，確かめてみよ． 予測と合っていたか？","category":"page"},{"location":"ch03/#花曲線を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 花曲線を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"整数 n に対して，以下の式で表される曲線を，花曲線（flower curve）という．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = cos(n theta)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"次のプログラムは，n = 3 の花曲線を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal, legend=false)\nn = 3\nts = 0:pi/180:2pi\nrs = cos.(n * ts)\nxs = rs .* cos.(ts)\nys = rs .* sin.(ts)\nplot!(xs, ys)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"整数 n を変えると，色々な花曲線が得られる．","category":"page"},{"location":"ch03/#練習-2","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上の式の代わりに","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"r = sin(n theta)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"としたら，どのような曲線になるか？ 予想した上で，プログラムを書き実行し，確かめてみよ． 予想と一致していたか？","category":"page"},{"location":"ch03/#指数関数を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 指数関数を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 数式 Julia\na  0 a^x a^x\n2 2^x exp2(x)\ne e^x, expx exp(x)\n10 10^x exp10(x)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 a  0 を底（exponent）とする指数関数（exponential function）","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"y = a^x","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 a = 2 の場合．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(legend=false)\n\nxs = -3:0.01:3\nplot!(xs, 2.0 .^ xs)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底を 2 3 4 5 と増やす．x  0 の範囲のみ描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(xlims=(0,3))\n\nxs = -3:0.01:3\nplot!(xs, 2.0 .^ xs, label = \"a=\" * string(2))\nplot!(xs, 3.0 .^ xs, label = \"a=\" * string(3))\nplot!(xs, 4.0 .^ xs, label = \"a=\" * string(4))\nplot!(xs, 5.0 .^ xs, label = \"a=\" * string(5))\nplot!(xs, 6.0 .^ xs, label = \"a=\" * string(6))","category":"page"},{"location":"ch03/#練習：指数関数：繰り返しで底を変える","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：指数関数：繰り返しで底を変える","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"上のプログラムを，for 文を用いた繰り返しとして書き直してみよ． すなわち，plt.plot() 文を1つにしてみよ．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"参考→ ■ for 文","category":"page"},{"location":"ch03/#自然対数の底","page":"第3回：▼ 連続な曲線を描く","title":"▶ 自然対数の底","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数  ℯ は，自然対数の底である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ℯ","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\nℯ は e とは異なる文字である． 「ℯ」は，バックスラッシュ \\ に続けて euler と入力してから，TABキーを押すことによって入力できる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"定数 Base.MathConstants.e も，自然対数の底である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.MathConstants.e","category":"page"},{"location":"ch03/#軸のスケールを変える","page":"第3回：▼ 連続な曲線を描く","title":"▶ 軸のスケールを変える","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"x 軸，y 軸のスケールを指定するには， キーワード引数 xscale , yscale を用いる． 何も指定しない場合（既定値）は，線形 :linear である． 引数に :log を指定すると，10 の対数で，その軸を描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"y 軸だけ対数スケール yscale=:log10 に指定したプロットが，よく見る片対数プロットである．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot!(yscale=:log10)  # <=\n\nxs = -4:0.01:4\nfor a in [2.0, ℯ, 3.0, 4.0, 5.0, 6.0]\n   plot!(xs, a .^ xs, label = \"a=\" * string(a))\nend\nxlims!(-1, 3)\nylims!(1e-1, 1e3)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"すべての底について，指数関数が a^0 = 1 = 10^0 で交わることを観察するために補助線を引こう．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"以下の文を追加する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"# 上に続けて\nvline!([0], color = :black, lw = 0.5)\nhline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/#関数-exp,-exp2,-exp10","page":"第3回：▼ 連続な曲線を描く","title":"▶ 関数 exp, exp2, exp10","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 2 e 10 については，exp で始まる関数が定義されている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"exp2 : 底が 2 の指数関数\nexp : 自然対数（底は，自然対数の底 e ）\nexp10 : 底が 10 の指数関数","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\nplot(yscale=:log10)\n\nxs = -4:0.01:4\nplot!(xs, exp2.(xs), label = \"exp2\")\nplot!(xs, exp.(xs), label = \"exp\")\nplot!(xs, exp10.(xs), label = \"exp10\")\nxlims!(-1, 3)\nylims!(1e-1, 1e3)\nvline!([0], color = :black, lw = 0.5)\nhline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数も名前であり，名前をつけること（＝変数に代入すること）ができる． 関数のリストを作って for 文で繰り返してみよう． 関数名を string 関数に与えると，関数名の文字列を返す．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\nplot(yscale=:log10)\n\nxs = -4:0.01:4\nfor f in [exp2, exp, exp10]\n   plot!(xs, f.(xs), label = string(f))\nend\nxlims!(-1, 3)\nylims!(1e-1, 1e3)\nvline!([0], color = :black, lw = 0.5)\nhline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/#冪乗根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 冪乗根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"冪 数式 Julia\n2 sqrtx sqrt(x)\n3 sqrt3x cbrt(x)\nn  0 sqrtnx, x^frac1n x^(1/n)","category":"page"},{"location":"ch03/#平方根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 平方根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.sqrt - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"二乗すると x になる数を，x の平方根（square root of x ）という． 関数 sqrt(x) は x の平方根を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sqrt(0)\nsqrt(2)\nsqrt(3)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平方と平方根を同じプロットに描いてみよう． 直線 y=x に対して，鏡の関係になっている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = 0:0.01:3\nplot!(xs, xs .^ 2, label = \"square\")\nplot!(xs, sqrt.(xs), label = \"square root\")\nplot!(xs, xs, lc=:black, lw = 0.5, label = \"y=x\")\nxlims!(-0.2, 2.2)\nylims!(-0.2, 2.2)\nvline!([1], lc = :black, lw = 0.5)\nhline!([1], lc = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\n負の数 x  0 を関数 sqrt の引数（ひきすう)に与えると，例外（exception）が発生する．が，複素数を引数として与えると，複素数として計算できる（複素数は，もっと後の回で説明する）．→ ▶ 負の数に対する平方根","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"sqrt(-1) # DomainError\nsqrt(complex(-1))  # 複素数を引数に与える","category":"page"},{"location":"ch03/#立方根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 立方根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.Math.cbrt - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"三乗すると x になる数を，x の立方根（cube root of x ）という． 関数 cbrt(x) は x の立方根を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"立方と立方根を同じプロットに描いてみよう． 直線 y=x に対して，鏡の関係になっている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = 0:0.01:3\nplot!(xs, xs .^ 3, label = \"cubic\")\nplot!(xs, cbrt.(xs), label = \"cube root\")\nplot!(xs, xs, lc=:black, lw = 0.5, label = \"y=x\")\nxlims!(-0.2, 2.2)\nylims!(-0.2, 2.2)\nvline!([1], color = :black, lw = 0.5)\nhline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"平方と平方根，立方と立方根を，同じプロットに描こう． 点 (11) で，曲線が交差している．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nxs = 0:0.01:3\nplot!(xs, xs .^ 2, label = \"square\")\nplot!(xs, sqrt.(xs), label = \"square root\")\nplot!(xs, xs .^ 3, label = \"cube\")\nplot!(xs, cbrt.(xs), label = \"cube root\")\nplot!(xs, xs, lc=:black, lw = 0.5, label = \"y=x\")\nxlims!(-0.2, 2.2)\nylims!(-0.2, 2.2)\nvline!([1], lc=:black, lw = 0.5)\nhline!([1], lc=:black, lw = 0.5)","category":"page"},{"location":"ch03/#一般の冪乗根を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 一般の冪乗根を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"一般に，正数 x  0 と 2 以上の整数 n に対して，y^n = x の解， すなわち，y = sqrtnx = x^dfrac1n を，x の n 乗根（root of n-th power, n-th root）という．n を指定せずに，冪乗根（べきじょうこん）あるいは冪根（べきこん）と総称する． 「冪」の代わりに「巾」の略字を当てることもある．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\nplot(\n   legend=:topleft,\n   aspect_ratio=:equal)\n\nxs = 0:0.01:3\nplot!(xs, xs .^ (1 / 2), label = \"n=2\")\nplot!(xs, xs .^ (1 / 3), label = \"n=3\")\nplot!(xs, xs .^ (1 / 4), label = \"n=4\")\nplot!(xs, xs .^ (1 / 5), label = \"n=5\")\nxlims!(-0.2, 2.2)\nylims!(-0.2, 2.2)\nhline!([1], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"指数 n で繰り返してみる．縦軸・横軸とも対数表示にする．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   legend=:topleft,\n   xscale=:log10, yscale=:log10)\n\nxs = 0:0.01:10\nfor n = 2:5\n   plot!(xs, xs .^ (1 / n), \n      label = \"y=x^(1/\" * string(n) * \")\")\nend\nxlims!(0.1, 10.0)\nylims!(0.1, 10.0)\nhline!([1], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/#対数関数を描く","page":"第3回：▼ 連続な曲線を描く","title":"▼ 対数関数を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 数式 Julia\na > 0 log_ax log(a,x)\n2 log_2x log2(x)\ne logx, lnx log(x)\n10 log_10x log10(x)","category":"page"},{"location":"ch03/#自然対数","page":"第3回：▼ 連続な曲線を描く","title":"▼ 自然対数","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log — Method","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 x0 に対して，x=e^y を満たす数 y を，x の自然対数（natural logarithm of x，Napierian logarithm，あるいは単に，logarithm）といい，logx と書く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"$e$ は，自然対数の底，あるいはネピア（Napier）の数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 log(x)は，自然対数を求める関数である．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"log(1)\nlog(ℯ)\nlog(ℯ^2)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"指数関数を，まず線形なプロットで描く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot()\n\nxs = 0.1:0.01:100\nplot!(xs, log.(xs))","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"今度は，片対数プロットで描く． x 軸を対数で表示すると，直線で表示される．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"# 続けて\nplot!(xscale=:log10)\nplot!(xs, log.(xs))","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"note: Note\n数学と同様，負の数に対する対数関数は定義されていない．引数に負数を与えると例外が起こる．julia> log(-1) # DomainError\nERROR: DomainError with -1.0:数学では log関数を複素数の引数に拡張できる（複素関数論で習う）．結果は，log(-1) = i(1+2n)pin (n は整数)である． Juliaでも，複素数の -1 を引数として与えると，n=0に対応する値が得られる．log(complex(-1))  # 複素数を引数に与える","category":"page"},{"location":"ch03/#対数関数","page":"第3回：▼ 連続な曲線を描く","title":"▼ 対数関数","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log — Method","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"正の数 a  0 に対して，x=a^y を満たす数 y を， 底 a に対する x の対数（logarithm of a to base b; base a logarithm of x ）といい，log_ay と書く．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数 log(a,y) のように，引数（ひきすう）2つを与えると， 底 a に対する x の対数が得られる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"片対数プロットを描く．log_a1=0 で曲線が交差する．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   legend=:topleft,\n   xscale=:log10)\n\nxs = 0.1:0.01:100\nplot!(xs, log.(2, xs), label = string(2))\nplot!(xs, log.(xs), label = string(ℯ))\nplot!(xs, log.(3, xs), label = string(3))\nplot!(xs, log.(10, xs), label = string(10))\nhline!([0], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)\nplot!() #hide","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底を for 文で変えてみる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\nplot(\n   legend=:topleft,\n   xscale=:log10)\n\nxs = 0.1:0.01:100\nfor a in [2, ℯ, 3, 10]\n   plot!(xs, log.(a, xs), label = string(a))\nend\nhline!([0], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Base.log2 - Function\nBase.log10 - Function","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"底 2 と 10 に対しては，それぞれ関数 log2 と log10 が用意されている．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\nplot(\n   legend=:topleft,\n   xscale=:log10)\n\nxs = 0.1:0.01:100\nplot!(xs, log2.(xs), label = \"log2\")\nplot!(xs, log.(xs), label = \"log\")\nplot!(xs, log10.(xs), label = \"log10\")\nhline!([0], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"関数名で繰り返してみる．","category":"page"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\nplot(\n   legend=:topleft,\n   xscale=:log10)\n\nxs = 0.1:0.01:100\nfor f in [log2, log, log10]\n   plot!(xs, f.(xs), label = string(f))\nend\nhline!([0], color = :black, lw = 0.5)\nvline!([1], color = :black, lw = 0.5)","category":"page"},{"location":"ch03/#練習：色々な連続曲線を描く","page":"第3回：▼ 連続な曲線を描く","title":"▲ 練習：色々な連続曲線を描く","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"ここまで紹介した関数を使って，色々な連続曲線を描いてみよ． Jupyter notebookの Markdown セルを用いて，説明文も加えよ．","category":"page"},{"location":"ch03/#今回のまとめ","page":"第3回：▼ 連続な曲線を描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch03/","page":"第3回：▼ 連続な曲線を描く","title":"第3回：▼ 連続な曲線を描く","text":"Jupyter Notebookを用いたテキスト入力（Markdownセル）\n実数全域で定義された関数\n正弦・余弦関数\n楕円\n極座標で著された曲線\nアルキメデスの渦\n花曲線\n指数関数\n正数を定義域とする関数\n平方根・立方根・冪乗根\n対数関数\nダブルYプロット\nダブルYプロットの作成\nダブルYプロットに共通な凡例の作成\n描画領域の分割","category":"page"},{"location":"ch04/#ch04","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"","category":"section"},{"location":"ch04/#データ系列の見かけの調整","page":"第4回：▼ 不連続な曲線を描く","title":"■ データ系列の見かけの調整","text":"","category":"section"},{"location":"ch04/#線の色の指定","page":"第4回：▼ 不連続な曲線を描く","title":"■ 線の色の指定","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"線の色は linecolor=色 の形式で指定する． 別名 lc=色 ","category":"page"},{"location":"ch04/#色の名前で指定する","page":"第4回：▼ 不連続な曲線を描く","title":"色の名前で指定する","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"名前で指定できる色は，こちらのURLに列挙されている． → Named Colors","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":":red\n:green\n:blue\n:cyan\n:magenta\n:yellow\n:black\n:white : (白背景では見えない）","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"aux = (label=\"\", lc=:black, lw=0.5)\n\nusing Plots\n#gr() #pythonplot()\n\nPlots.reset_defaults()\ndefault(\n    thickness_scaling=2, framestyle=:box,\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    linewidth=2)\n\nplot(legend=:bottomright)\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2 .+ 20\nplot!(xs, ys,       lc=:red,     label=\"red\")\nplot!(xs, ys .- 2,  lc=:green,   label=\"green\")\nplot!(xs, ys .- 4,  lc=:blue,    label=\"blue\")\nplot!(xs, ys .- 6,  lc=:cyan,    label=\"cyan\")\nplot!(xs, ys .- 8,  lc=:magenta, label=\"magenta\")\nplot!(xs, ys .- 10, lc=:yellow,  label=\"yellow\")\nplot!(xs, ys .- 10, lc=:white,   label=\"white\")\nplot!(xs, ys .- 10, lc=:black,   label=\"black\")","category":"page"},{"location":"ch04/#カラーパレットの番号で指定する","page":"第4回：▼ 不連続な曲線を描く","title":"カラーパレットの番号で指定する","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"既定のカラーパレットでは，10色が自動的に選ばれる． 以下の例では，11本目から最初の色に戻っているが確認できる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"palette(:default)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot()\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2 .+ 20\nfor i in 1:12\n    plot!(ys .- 2i, lc=i, label=string(i))\nend\nplot!()","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"色系列（パレット）を指定することもできる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Colorschemes","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"以下は，:tab10 を選んだ場合である． ","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"palette(:tab10)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\nSet1 は，Color Brewer2で提案されたカラーパレットの一つである．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"palette(:Set1)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n\nplot(palette=:Set1)\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2\nfor i in 1:12\n    plot!(ys .- 2i, lc=i, label=string(i))\nend\nplot!()","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\ntab10 は，tableauで用いられるカラーパレットに基づいている．Color Palettes and Effects","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"qualitative または categorical : 区別する\ndiverging : 負の値から0を取り，再び増える数字\nsequential : 0から増えていく数字","category":"page"},{"location":"ch04/#線の形状","page":"第4回：▼ 不連続な曲線を描く","title":"■ 線の形状","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot(palette=:Set1)\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2 .+ 20\ni = 1\nfor s in [ \n    :solid, :dot, :dash, :dashdot ]\n    plot!(ys .- 2i, linestyle=s, lc=2, label=string(s))\n    global i += 1\nend\nplot!()","category":"page"},{"location":"ch04/#マーカーの設定","page":"第4回：▼ 不連続な曲線を描く","title":"■ マーカーの設定","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"markersize=数字 ","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"※ 別名 ms=数字","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"markercolor=色","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"※ 別名 mc=色","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"markershape=形","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"※ 別名 shape=色","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot(palette=:Set1)\n# 円・赤塗りつぶし・枠線なし\nplot([0],[0], seriestype=:scatter,\n    markershape=:circle, markersize=18,\n    mc=:red,\n    markerstrokewidth=0)\n# 円・赤枠のみ・内側は白\nplot!([1],[1], seriestype=:scatter,\n    markershape=:circle, markersize=18,\n    mc=:white,\n    markerstrokecolor=:red,\n    markerstrokewidth=3)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"alpha値は，不透明度であり 0 から 1までの値を取る． 0は不透明，1は透明である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"markershape : \nmarkersize\nmarkeralpha\nmarkercolor","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"※ markerstrokeは，マーカーの外側の枠線を指定する","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"markerstrokewidth\nmarkerstrokealpha\nmarkerstrokecolor\nmarkerstrokestyle","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot(palette=:Set1)\ni = 1\nfor t in [ \n    :circle, :rect, :diamond, :cross, :xcross ]\n    plot!([i], [1], seriestype=:scatter, \n        markershape = t,\n        lc=2, label=string(t))\n    global i += 1\nend\nxlims!(0,i)\nylims!(0,i)\nplot!()","category":"page"},{"location":"ch04/#散布図の作成","page":"第4回：▼ 不連続な曲線を描く","title":"■ 散布図の作成","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nplot(palette=:Set1)\nxs = -2:0.2:2\nys = xs .^ 3 - xs .^ 2 .+ 20\ni = 1\nfor t in [ :path, :scatter ]\n    plot!(ys .- 2i, seriestype=t, lc=2, label=string(t))\n    global i += 1\nend\nplot!()","category":"page"},{"location":"ch04/#プロットデフォルトの設定4","page":"第4回：▼ 不連続な曲線を描く","title":"■ プロットデフォルトの設定4","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\nPlots.reset_defaults()\ndefault(\n    framestyle=:box,thickness_scaling=2, \n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0)","category":"page"},{"location":"ch04/#0による除算","page":"第4回：▼ 不連続な曲線を描く","title":"■ 0による除算","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"筆算では 0 による除算の結果は未定義である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Julia では，0 による除算は，例外は発生せず， 「数でない数」 Inf, -Inf, NaN のどれかが得られる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Inf は，無限大 Infinity に由来する． NaN は，数でない Not a Number に由来する．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"1 / 0\n-1 / 0\n0 / 0","category":"page"},{"location":"ch04/#関数が連続とは","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 関数が連続とは","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数が連続であるとは， 関数のプロットがつながっている，ちぎれていないことをいう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"「関数 f(x) は x=a で連続」とは，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"lim_x longrightarrow a f(x)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"が存在して，その値が f(a) に等しいと定義される．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"不連続とは，連続でないことである． ただし，不連続な関数の多くは，連続な部分（枝，branch）を含む，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"この章では，主に，連続ではない関数のプロットを描く．","category":"page"},{"location":"ch04/#逆数関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 逆数関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"逆数関数 y=dfrac1x を描いてみよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\n逆数関数 reciprocal function という．逆関数 inverse function と区別されたい．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"さて，dfrac10 の値は Inf であるが，plot 関数は「数でない数」をスキップして何も描かない．分母 0 の除算を特別扱いする必要はない．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"逆数関数は，x=0 で不連続であり，x の正負に対応して2つの枝を持つ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"closeall() #hide\nplot(aspect_ratio=:equal, legend=:topleft)\n\nxs = -3:0.1:3\nplot!(xs, 1.0 ./ xs, label=\"y=1/x\")\nxlims!(-3, 3)\nylims!(-3, 3)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"続けて，y=x，y=-x，水平線 y = 0，垂直線 x = 0，を追加しよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"# 続けて\nplot!(xs, -1*xs; aux...)\nplot!(xs, xs; aux...)\nhline!([0]; aux...)\nvline!([0]; aux...)","category":"page"},{"location":"ch04/#練習","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"（プログラミングでなく，数学の話題）","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"数学では「何らかの操作を行った結果が，元と重なること」を， その操作に対して対称である（symmetric）という．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上のプロットを観察すると，逆数関数は，いくつかの操作に対して対称であることがわかる．どのような操作か？","category":"page"},{"location":"ch04/#不連続な有理式を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 不連続な有理式を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"有理関数とは，多項式（分子）を多項式（分母）で割った関数である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"以下の有理関数を描こう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"y = dfracx^3+8x^3+3x^2-4x-12","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"まず，分母を描く．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"closeall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\nplot(legend=:top)\n\nxs = -10:0.1:10\nqs = xs .^ 3 .+ 3xs .^ 2 .- 4xs .- 12\nplot!(xs, qs, label=\"denominator\")\nylims!(-20, 20)\nxlims!(-4, 4)\nvline!([-3,-2,2]; aux...)\nhline!([0]; aux...)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"分母は x=-3 -2 2 で 0 となるから， 上の有理関数は，この三点で不連続となる「可能性」がある．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"では，上の有理関数を描いてみる． 逆数関数の描画と同じように，分母 0 となる場合を特別扱いする必要はない．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"closeall() #hide\nplot(legend=:top)\nxs = -10:0.1:10\nps = xs .^ 3 .+ 8\nqs = xs .^ 3 .+ 3xs .^ 2 .- 4xs .- 12\nys = ps ./ qs\nplot!(xs, qs, label=\"rational function\")\nylims!(-10, 10)\nxlims!(-4, 4)\nhline!([0]; aux...)\nvline!([-3,-2,2]; aux...)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"実際には，x=-2 では不連続ではない． 分子・分母を共通項 (x+2) で割れるからである．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"もう少し，横軸の範囲を狭めて描く．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"# 続けて\nylims!(-10, 10)\nxlims!(-3, 3)","category":"page"},{"location":"ch04/#練習-2","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上の有理関数で，x=-2 に対する値を求めよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"分子・分母は共通項 (x+2) で割った関数のプロットを描き， 上のプロットと重なることを確かめよ．2つの曲線を比較するための描き方は，下の ▼ 周期関数 を参考にせよ（本章を通読してから取り組め）．","category":"page"},{"location":"ch04/#正接関数・余接関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 正接関数・余接関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"正接 y = tanx =dfracsinxcosx\n余接 y = cotx =dfraccosxsinx","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 数式 ラジアン単位 角度単位\n正接 tanx tan(x) tand(x)\n余接 cotx cot(x) tand(x)","category":"page"},{"location":"ch04/#ラジアン単位","page":"第4回：▼ 不連続な曲線を描く","title":"ラジアン単位","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.tan - Function\nBase.Math.cot - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"正接 tanxは，dfracpi2 の奇数倍で不連続である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"余接 cotxは，dfracpi2 の偶数倍で不連続である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"closeall() #hide\nplot(xlabel=\"radian\", ylims=(-10,10), size=(720,480))\n\nxs = -2pi:pi/360:2pi\nscatter!(xs, tan.(xs), label = \"tan\")\nscatter!(xs, cot.(xs), label = \"cot\")\nvline!(-2pi:pi/2:2pi; aux...)\nplot!()","category":"page"},{"location":"ch04/#角度単位","page":"第4回：▼ 不連続な曲線を描く","title":"角度単位","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.Math.tand - Function\nBase.Math.cotd - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\n\nplot(xlabel=\"degree\", ylims=(-10,10),size=(720,480))\nxs = -360:1:360\nscatter!(xs, tand.(xs), label = \"tand\")\nscatter!(xs, cotd.(xs), label = \"cotd\")\nplot!(xticks=-360:90:360) # <= 横軸目盛の設定\nvline!(-360:90:360; aux...)","category":"page"},{"location":"ch04/#周期関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 周期関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"f(t+T) = f(t)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上式のように，横軸を T だけ平行移動しても， 元の形に重なる関数を周期関数（periodic function）という． T は，周期（period） と呼ばれる．","category":"page"},{"location":"ch04/#周期関数を確認する","page":"第4回：▼ 不連続な曲線を描く","title":"●▼ 周期関数を確認する","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"ラジアン単位の正接関数 tan は，周期 2pi である． 平行移動して重なることを，図示してみよう．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"比較の基準となる曲線は，青い円（塗りつぶし）で描いた．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"比較される曲線は，少し小さい赤い円（塗りつぶし）で描いた．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"青い円の真ん中に，赤い点が描かれている．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\n\nxs = -2pi:pi/30:2pi\nplot(grid=false, palette=:Set1, \n    xlabel=\"radian\", ylims=(-10,10),\n    xlims=(-1.2pi,1.2pi),size=(720,480))\nscatter!(xs, tan.(xs), lc=1, ms=4,\n    label = \"tan\")\nscatter!(xs, tan.(xs .+ 2 * pi), ms=2, lc=2, \n    label = \"tan, shifted by 2pi\")\nplot!(xticks=(-2pi:pi/2:2pi,[])) # <= 横軸目盛の設定\nvline!(-2pi:pi/2:2pi; aux...)","category":"page"},{"location":"ch04/#符号関数を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 符号関数を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.sign - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 sign(x) は，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"条件 x  0 なら 1 を，\n条件 x = 0 なら 0 を，\n条件 x  0 なら -1 を，","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"それぞれ返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\nplot()\n\nxs = -5.0:0.1:5.0\nplot!(xs, sign.(xs), label = \"sign\")\nvline!([0]; aux...)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"三角関数と関数 sign とを組み合わると， 不連続な周期関数を作ることができる．","category":"page"},{"location":"ch04/#方形波を描く","page":"第4回：▼ 不連続な曲線を描く","title":"▶ 方形波を描く","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"2つの一定値を交互にとる周期関数を方形波（square wave）という．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\n\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\nplot()\n\nxs = -5.0:0.1:5.0\nplot!(xs, cos.(xs), label = \"cos()\")\nplot!(xs, sign.(cos.(xs)), label = \"sign(cos())\")\nvline!([0]; aux...)","category":"page"},{"location":"ch04/#練習-3","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"上の例の周期はいくつか？\n周期が 1 になるように，変更してみよ．プロットを描け．","category":"page"},{"location":"ch04/#絶対値関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ 絶対値関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.abs - Function","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 abs(x)は，x の絶対値を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\n\nplot(aspect_ratio=:equal)\n\nxs = -1:0.1:1\nplot!(xs, abs.(xs), label = \"abs\")\nvline!([0]; aux...)","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"絶対値関数の符号を変えたり，平行移動すると，色々な山や谷の形を描くことができる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\n\nplot(aspect_ratio=:equal)\nplot!(framestyle=:zeroline)\n\nxs = -2pi:pi/18:2pi\n# 符号を変える．山の形\nplot!(xs, -abs.(xs), label = \"-abs(x)\")\nplot(xs, pi .- abs.(xs), label = \"pi-abs(x)\")\n# さらに，横軸の平行移動\nplot!(xs, pi .- abs.(xs .- pi), label = \"pi-abs(x-pi)\")\nvline!([pi]; aux...)\n\nplot!()","category":"page"},{"location":"ch04/#クランプ関数","page":"第4回：▼ 不連続な曲線を描く","title":"▼ クランプ関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.Math.clamp","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"関数 clamp(x, lo, hi) は，上限と下限で制限する関数である． すなわち，x の値が hi よりも大きければ hi を，lo よりも大きければ lo を返す． どちらでもなければ，そのままの値を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\naux = (label=\"\", lc=:black, lw=0.5)\n\nplot(aspect_ratio=:equal)\n\nxs = -5.0:0.1:5.0\nplot!(xs, clamp.(xs,-1,2), label = \"clamp\")\nhline!([-1,2]; aux...)\nvline!([-1,2]; aux...)","category":"page"},{"location":"ch04/#床関数・天井関数","page":"第4回：▼ 不連続な曲線を描く","title":"■ 床関数・天井関数","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"Base.floor\nBase.ceil","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"床関数 floor(x) は，x 以下の最大の整数を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"天井関数 ceil(x) は，x 以上の最小の整数を返す．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"下のプロットで，整数 x に対する関数の値を，よく観察せよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"これらの関数は，■ 浮動小数点数から整数への変換 で用いられる．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"using Plots\n#gr() #pythonplot()\ncloseall() #hide\n\naux = (label=\"\", lc=:black, lw=0.5)\nfilledcircle=(\n    seriestype=:scatter, \n    shape=:circle, markershape=:circle, markerstrokewidth=0)\n\nplot(palette=:Set1,aspect_ratio=:equal,\n    size=(720,480))\n\nxs = -3.4:0.2:3.4\nxlims!(-3.5, 3.5)\nylims!(-3.5, 3.5)\n\nscatter!(xs, ceil.(xs),  shape=:circle, mc=1, ms=4,\n    label = \"ceil\")\nscatter!(xs, floor.(xs), shape=:circle, mc=2,\n    label = \"floor\")\nvline!(-3:3; aux...)\nhline!(-3:3; aux...)","category":"page"},{"location":"ch04/#練習-4","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"床関数または天井関数を用いて， 正の数を 1 の位で四捨五入するには，どうしたらよいか？ 1 の位での四捨五入とは，その数の小数点第一桁目が 5 以上であれば元の数に 1 を加え，5 未満であれば何もしない操作である．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"プログラムを書いて，プロットを描き，確認してみよ． とくに，小数点以下が 05 に等しい場合の結果を観察せよ．","category":"page"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"note: Note\n数字のおおよその値を表すために日常用いられる「四捨五入」は，科学技術分野では適当な表し方ではない． 「数字の丸め方」は，日本工業規格 JIS Z8401 : 1999 （国際規格 ISO 31-0 : 1992 に相当）に定められている．JIS規格の全文は，たとえば，ここで読める．→ kikakurui Z8401-1999-01","category":"page"},{"location":"ch04/#練習-5","page":"第4回：▼ 不連続な曲線を描く","title":"▲ 練習","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"ここまで紹介した関数を使って，色々な不連続曲線や周期関数を描いてみよ． Jupyter notebookの Markdown セルを用いて，説明文も加えよ．","category":"page"},{"location":"ch04/#今回のまとめ","page":"第4回：▼ 不連続な曲線を描く","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch04/","page":"第4回：▼ 不連続な曲線を描く","title":"第4回：▼ 不連続な曲線を描く","text":"plot 関数のフォーマットパラメータ\n0 による除算\n逆数関数\n不連続な有理関数\n正接・余接関数\n周期関数\n符号関数\n絶対値関数\n床関数・天井関数","category":"page"},{"location":"ch13/#ch13","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"","category":"section"},{"location":"ch13/#プロットデフォルトの設定13","page":"第13回：関数の定義と呼び出し","title":"プロットデフォルトの設定13","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"using Plots\n#gr() #pythonplot()\n\nPlots.reset_defaults()\ndefault(\n    framestyle=:box,thickness_scaling=2,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch13/#関数の定義と呼び出し","page":"第13回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"■ 関数の定義（代入文形式） の節で，代入文形式のユーザ関数の定義を紹介した． この節では，より一般的な扱いを説明する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"より広い意味では，一連のプログラム片に名前を付けたものが，「関数（function）」である．","category":"page"},{"location":"ch13/#関数の定義と呼び出し：引数がない場合","page":"第13回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し：引数がない場合","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"以下は，Hello という文字を印字する関数の定義を示す．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数定義は，キーワード function で始まり，その後に関数名を書く． 呼び出す際に，渡すべき値がなければ，関数名の後に，括弧・閉じ括弧 () を書くだけである．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"処理を記述した後，キーワード end で終わる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function hello()\n   println(\"Hello\")\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"この関数を呼び出すには，関数名に続けて () を書けばよい．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"hello()\nhello()","category":"page"},{"location":"ch13/#関数の定義と呼び出し：引数がある場合","page":"第13回：関数の定義と呼び出し","title":"■ 関数の定義と呼び出し：引数がある場合","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数を呼び出す際に，渡す値がある場合は，関数名の後に， 括弧 () で囲んで，変数名（仮引数，「かり・ひきすう」，parameter）の並びを書く．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function hello(name)\n   print(\"Hello \")\n   println(string(name))\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"この関数を呼び出すには，関数名に続けて () に囲んで，具体的な値（実引数「じつ・ひきすう」argument)を書く． 関数の定義の中に出現した仮引数は，実引数の値に置き換えられる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"hello(\"world\")\nhello(\"the Earth\")\nhello()\n# 例外: 実引数 2つ\nhello(\"world\", \"the Earth\")","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数 hello に対して，引数が 0個の場合の定義と， 引数が1個の場合の定義の２つが紐（ひも）ついている． 関数呼び出しにおける引数の数に応じて，対応する関数が実行される． 上の最後の例のように，対応する関数定義が見つからなければ，例外が発生する．","category":"page"},{"location":"ch13/#円を描く関数を作る","page":"第13回：関数の定義と呼び出し","title":"▶ 円を描く関数を作る","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"PyPlot パッケージを読み込んだ状況で，円を描く関数を作成する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"引数は，円の中心座標 cx, cy，円の半径 r ，線の色 col とする．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function draw_circle!(o, cx, cy, c, r)\n   t = 0:pi/18:2pi\n   xs = cx .+ r * cos.(t)\n   ys = cy .+ r * sin.(t)\n   plot!(o, xs, ys, lc = c)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"５つの円を描いてみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"using Plots\np = plot(aspect_ratio=:equal, framestyle=:origin)\n\nr = 1\ns = 1.1\ndraw_circle!(p,  0, s, :black, r)\ndraw_circle!(p, -s, 0, :yellow, r)\ndraw_circle!(p,-2s, s, :blue, r)\ndraw_circle!(p,  s, 0, :green, r)\ndraw_circle!(p, 2s, s, :red,r )\nplot!(p)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"すべての軸を描画しないようにするには，上に続けて plt[:axis](\"off\") を実行すればよい．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"plot!(framestyle=:empty)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"note: Note\nオリンピックのシンボルマークは，知的財産権が厳しく保護されていることに留意されたい．","category":"page"},{"location":"ch13/#仮引数の既定値","page":"第13回：関数の定義と呼び出し","title":"■ 仮引数の既定値","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"仮引数に続けて =値 を書くことで，既定の値を設定できる． 関数呼び出しで，該当する引数を省略して関数を呼び出した場合には，既定の値が用いられる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数 draw_circle で， 最後の引数 r の既定値を 1 に設定した．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function draw_circle!(o, cx, cy, c, r=1)\n   t = 0:pi/18:2pi\n   xs = cx .+ r * cos.(t)\n   ys = cy .+ r * sin.(t)\n   plot!(o, xs, ys, lc = c)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数 draw_circle を３つの引数で呼び出した場合には，r=1 として呼び出したとみなされる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"r = 1\ns = 1.1\np = plot()\ndraw_circle!(p,  0, s, :black)\ndraw_circle!(p, -s, 0, :yellow)\ndraw_circle!(p,-2s, s, :blue)\ndraw_circle!(p,  s, 0, :green)\ndraw_circle!(p, 2s, s, :red);\np","category":"page"},{"location":"ch13/#関数の戻り値","page":"第13回：関数の定義と呼び出し","title":"■ 関数の戻り値","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数を実行した結果の値を，呼び出し側で使いたい場合は，しばしばある．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数定義において，最後に評価した値が，関数の戻り値（return-value）となる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"■ 関数の定義（代入文形式） を用いても，数 x を 3 倍する関数を定義すると，以下のようになる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"triple(x)=3*x","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"これをより一般の形式で書くと，以下のようになる．最後に評価した 3*x が関数の戻り値となる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function triple(x)\n   3 * x\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"triple(-1)","category":"page"},{"location":"ch13/#return-キーワード","page":"第13回：関数の定義と呼び出し","title":"■ return キーワード","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"キーワード return 式 は関数内で用いられると，直ちに関数から抜ける（戻る）ことを指示する． この際，式の結果が関数の戻り値となる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の関数は，以下のようにも書ける（が，冗長である）．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function triple(x)\n   return 3 * x\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"また，数 x の絶対値を求める関数を自前で書いてみると，以下のようになる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function myabs(x)\n   if x < 0\n      return -x\n   else\n      return x\n   end\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"myabs(-1)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"note: Note\n上の myabs は ■ 3項演算子 を用いて，以下のように書いてもよい．myabs(x)= x<0 ? -x : x","category":"page"},{"location":"ch13/#局所変数","page":"第13回：関数の定義と呼び出し","title":"■ 局所変数","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数内部で代入した変数（「局所変数，local variables」）は，その関数内部でのみ生きている．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"下の例で，関数 triple 内部で代入した t は，関数 triple のみで生きている． コマンドラインで定義した変数 t は，関数 triple の局所変数 t とは別物であり，関数呼び出し後も値は変わっていない． コマンドラインで定義した変数 t の型を，「全域変数（global variables）」ともいう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"t = 4\n\nfunction triple(x)\n   t = 3\n   t * x\nend\n\ntriple(2)\n@show t;","category":"page"},{"location":"ch13/#ヘロンの公式を関数にする","page":"第13回：関数の定義と呼び出し","title":"▶ ヘロンの公式を関数にする","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"ヘロンの公式（Heron's formula）によれば， 3辺の長さが a b c である三角形の面積は","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"beginaligned\nsqrts(s-a)(s-b)(s-c)\ns =dfraca+b+c2\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"で与えられる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"ヘロンの公式を用いて，三角形の面積を返す関数を定義してみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"三辺 a b cから三角形を作ることができない場合には，平方根の中身が負になる． このときは，面積として 0 を返すことにする．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function heron(a, b, c)\n   s = (a + b + c) / 2\n   r = s * (s - a) * (s - b) * (s - c)\n   if r < 0\n      return 0.0\n   end\n   sqrt(r)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"heron(3, 4, 5)\n# 三角形ができない場合\nheron(3, 3, 7)","category":"page"},{"location":"ch13/#方形波のフーリエ級数和を関数にする","page":"第13回：関数の定義と呼び出し","title":"▼ 方形波のフーリエ級数和を関数にする","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"方形波をフーリエ級数の和として計算する方法を，▼ 方形波：フーリエ級数の有限和 の節で，紹介した． 時刻の配列 ts における方形波を，奇数 n までのフーリエ級数和として計算する関数を書いてみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function square(ts, n)\n   ys = zeros(size(ts))\n   for i = 1:2:n\n      ys += sin.(i * ts) / i * 4 / pi\n   end\n   ys\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"@show square((0:6) * pi / 4, 13);","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"級数和の上限 n を増やして，プロットを描こう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"using LaTeXStrings\nusing Plots\nplot(legend=:right)\n\nts = -74*pi/36:pi/36:74*pi/36\nplot!(ts, sign.(sin.(ts)), label = \"square wave\")\n\nfor n in [5, 9, 13]\n   plot!(ts, square(ts, n), label = \"up to \" * string(n))\nend\n\nyticks!([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nxticks!([-2pi, -pi, 0, pi, 2pi], \n   [L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\"])","category":"page"},{"location":"ch13/#練習：フーリエ級数の和","page":"第13回：関数の定義と呼び出し","title":"◀ 練習：フーリエ級数の和","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の関数 square を以下のように改良せよ．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"n が偶数の場合でも，適切な解釈に基づき動作するようにせよ．\nn が 3 よりも小さい場合は n=13 とせよ．","category":"page"},{"location":"ch13/#Riemann和の計算を関数にする","page":"第13回：関数の定義と呼び出し","title":"▼ Riemann和の計算を関数にする","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数の定積分の近似値を，短冊の面積の和として計算する方法を ▼ Riemann和（繰り返しで加算)の節で，紹介した． 関数 f ，定積分の範囲 a, b ，分割数 n を引数として，Rienmann和を計算する関数を書いてみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function riemann_sum(f, a, b, n)\n   xs = range(a, b, length = n + 1)\n   d = (b - a) / n\n   s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   s1\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"実行してみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"g(x) = 1 / (1 + x)\na = 0;\nb = 1;\n@show riemann_sum(g, a, b, 2^10);","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"分割数を増やす．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"for m = 8:13\n   @show m, riemann_sum(g, a, b, 2^m)\nend\n@show log(2);","category":"page"},{"location":"ch13/#練習：Riemann和の誤差評価","page":"第13回：関数の定義と呼び出し","title":"◀ 練習：Riemann和の誤差評価","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の例で，相対誤差を描け．","category":"page"},{"location":"ch13/#練習：Riemann和","page":"第13回：関数の定義と呼び出し","title":"◀▼ 練習：Riemann和","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の関数 riemann_sum を，以下のように改良せよ．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"n  1 の場合には，ただちに 0 を返すようにせよ．\nn  1 の場合には，n=4 として，計算せよ．\na  b の場合には，上限と下限を交換してから計算せよ．ヒント：変数 a b の値を交換するには，同時代入 b, a = a, b を用いよ．","category":"page"},{"location":"ch13/#モンテカルロ法による平面図形の面積の近似値を関数にする","page":"第13回：関数の定義と呼び出し","title":"▼ モンテカルロ法による平面図形の面積の近似値を関数にする","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"平面内のある領域の面積の近似値をモンテカルロ法で求める方法を，▼ モンテカルロ法による平面図形の面積の推定 で紹介した．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"範囲を表す関数 f ，点の数 n を引数として，モンテカルロ法で面積の近似値を計算する関数を書いてみる． 関数 f は，平面座標 x,y を引数にして，(x,y) が図形の内部なら真 true を，内部でなければ偽 false を返すものとする． なお，図形の範囲は，x 座標，y 座標とも，0 から 1 までの範囲とする．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function montecarlo(f, n)\n   s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if f(x, y)\n         s += 1\n      end\n   end\n   s / n\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"四分円に対して，実行してみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"quadrant(x, y) = x * x + y * y < 1\nn = 2^8\n@show n, montecarlo(quadrant, n), pi / 4","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"点の数を増やしてみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"for m = 1:10\n   n = 2^m\n   @show n, montecarlo(quadrant, n)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"今度は，二つの不等式 y  x と y  1  x の両方に囲まれる領域の面積を推定しよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"tri1(x, y) = y < x && y < 1 - x\nn = 2^8\n@show n, montecarlo(tri1, n)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"点の数を増やす．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"for m = 4:12\n   local n = 2^m\n   @show n, montecarlo(tri1, n)\nend\n@show 1 / 4","category":"page"},{"location":"ch13/#練習：モンテカルロ法による面積の近似値の誤差評価","page":"第13回：関数の定義と呼び出し","title":"◀ 練習：モンテカルロ法による面積の近似値の誤差評価","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の２つの例で，相対誤差を描け．","category":"page"},{"location":"ch13/#練習：モンテカルロ法による面積の近似値","page":"第13回：関数の定義と呼び出し","title":"◀▼ 練習：モンテカルロ法による面積の近似値","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の関数 montecarlo を，以下のように改良せよ．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"n le 1 の場合には，n=2^8 として，計算せよ．","category":"page"},{"location":"ch13/#関数から複数の値を返す","page":"第13回：関数の定義と呼び出し","title":"■ 関数から複数の値を返す","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"■ タプル の小節で，関数 divrem のように，複数の値を返す関数があることを紹介した．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"Multiple Return Values (section)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"ユーザ関数から複数の値を返すには，関数定義の最後に評価する式において，カンマ , で区切って復数の式を書けばよい． この関数の戻り値は，■ タプル となる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function one_two()\n   1, 2\nend\n\n@show one_two()","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"x, y = one_two()\n@show x, y","category":"page"},{"location":"ch13/#「はさみうち」法による，方程式の求解を関数にする","page":"第13回：関数の定義と呼び出し","title":"▼ 「はさみうち」法による，方程式の求解を関数にする","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"「はさみうち」法を用いて，方程式の解の存在範囲を狭めていく方法を，▼ 「はさみうち」法による，方程式の求解 で紹介した．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"求めるべき方程式 f ，解の存在範囲の下限 a ，および 上限 b を引数として，より狭い解の存在範囲の下限と上限を返す関数を書いてみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function bisect(f, a, b)\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\n   a, b\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"g(x) = x^3 + 3x^2 - 4 * x - 12\na = -3.2;\nb = -2.6;\n\nfor i = 1:10\n   global a, b\n   @show a, b, b - a, g(a), g(b)\n   a, b = bisect(g, a, b)\nend","category":"page"},{"location":"ch13/#練習：「はさみうち」法","page":"第13回：関数の定義と呼び出し","title":"◀ 練習：「はさみうち」法","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"上の例で，解の存在範囲が狭くなる様子を描け．\n異なる解の存在範囲に対して，「はさみうち」法を実行せよ．","category":"page"},{"location":"ch13/#引数の型の指定","page":"第13回：関数の定義と呼び出し","title":"■ 引数の型の指定","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数定義の仮引数には ::型 という形式で，仮引数の型を指定できる． 関数呼出しの際，実引数の型と仮引数の型が一致する関数が呼び出される． この仕組を，多重ディスパッチ（multiple dispatch）という．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"型が指定されていない仮引数は，Any 型とみなされ，あらゆる実引数の型と一致する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"個別の仮引数に対応する関数は，メソッドと呼ばれる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"例で説明する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数 mytest を，Int64 型の引数に対してだけ定義しよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function mytest(x::Int64)\n   println(string(x) * \" is of Int64 type\")\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"この段階で，mytest(1) は上の関数が呼び出されるが，mytest(1.0) は呼び出されるべき関数が見つからず，例外が発生する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"# 関数が呼び出される\nmytest(1)\n# 関数が呼び出されない\nmytest(1.0)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数 mytest を，Float64 型の引数に対しても定義する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function mytest(x::Float64)\n   println(string(x) * \" is of Float64 type\")\nend\n\n# 今度は，上の関数が呼び出される\nmytest(1.0)","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"しかし，mytest(\"a\") や mytest(\"[1]\") は呼び出されるべき関数が見つからず，例外が発生する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"# 関数が呼び出されない\nmytest(\"a\")\n# 関数が呼び出されない\nmytest([1])","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"さらに，仮引数に型を指定しない関数を定義すれば，そちらが呼び出される．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function mytest(x)\n   println(string(x) * \" is neither of Int64 type nor of Float64 type\")\nend\n\n# 今度は，上の関数が呼び出される\nmytest(\"a\")\n# 今度は，上の関数が呼び出される\nmytest([1])","category":"page"},{"location":"ch13/#階乗関数を定義する","page":"第13回：関数の定義と呼び出し","title":"▶ 階乗関数を定義する","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"1 から整数 n までの連続する整数の積を，「階乗（factorial）」といい，n のように書く．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"6  = 6 times 5 times 4 times 3 times 2 times 1 = 720","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"さらに，0 = 1 と定義する．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"階乗を計算する関数を定義しよう． 階乗関数は整数に対してのみ定義されるから，引数を整数型に限定しよう．0 よりも小さい整数に対して，階乗は定義されないが，1 を返すことにする．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function myfact1(n::Int64)\n   n <= 1 && return 1\n   r = 1\n   for i = 2:n\n      r *= i\n   end\n   r\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"計算結果を確かめてみる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"for n = 6:-1:-1\n   @show n, myfact1(n)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"浮動小数点数や整数ベクトルに対して，関数 myfact1 は未定義である．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"# 関数は未定義\nmyfact1(2.2)\n# 関数は未定義\nmyfact1([6, 3])","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"整数を要素とするベクトルに対して dot記法を用いて myfact1 を呼び出せば， 各要素に対して関数 myfact1 を呼び出した値のベクトルが得られる．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"myfact1.([6, 5, 4])","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"note: Note\nJulia には，階乗関数 factorial(n) が組み込まれている．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"factorial(1)\nfactorial(2)\nfactorial(3)","category":"page"},{"location":"ch13/#再帰","page":"第13回：関数の定義と呼び出し","title":"▶ 再帰","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"階乗には n = n times (n-1) という性質がある． すなわち，n は (n-1) を用いて定義される．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"これをプログラムで書く場合には，関数定義の中で自分自身を呼ぶ，これを再帰（recursion）という．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"再帰を用いて，階乗を定義してみよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"function myfact2(n::Int64)\n   n <= 1 && return 1\n   n * myfact2(n - 1)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"計算結果を確かめよう．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"for n = 6:-1:-1\n   @show n, myfact2(n)\nend","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"再帰呼出しを用いる場合には， 計算が必ず終了する条件を設定する必要がある．","category":"page"},{"location":"ch13/#練習：再帰：フィボナッチ数","page":"第13回：関数の定義と呼び出し","title":"◀ 練習：再帰：フィボナッチ数","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"フィボナッチ（Fibonacci）数とは，以下の漸化式で定義される数列である．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"beginaligned\nF_0  = 0\nF_1  = 1\nF_n+2 = F_n+1+F_n\nendaligned","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"整数 nに対してフィボナッチ数を計算する関数を再帰を用いて定義し，その動作を確かめよ．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"フィボナッチ数の最初の 20 個は，以下の通りである．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"また，フィボナッチ数の一般項は，以下の式で与えられることが知られている．合わせて，計算してみよ．","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"F_n = dfrac1sqrt5 left left(dfrac1+sqrt52right)^n - left(dfrac1-sqrt52right)^n right","category":"page"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"note: Note\n上で示した階乗やフィボナッチ数の例では，関数が呼ばれるごとに計算を行っており「もったいない」． 計算結果が一意（一通り，unique）であるなら，計算した結果を記録しておき，同じ引数で再び呼び出されたときには， 記録から取り出してくれば計算資源が節約できる．このような考え方を「メモ化」という．この本文で説明した範囲でも， ベクトルなどを用いて「メモ化」を実装できるであろう．","category":"page"},{"location":"ch13/#今回のまとめ","page":"第13回：関数の定義と呼び出し","title":"■ 今回のまとめ","text":"","category":"section"},{"location":"ch13/","page":"第13回：関数の定義と呼び出し","title":"第13回：関数の定義と呼び出し","text":"関数\n定義\n呼出し\n戻り値\n仮引数の型\n再帰呼出し\n例題\nヘロンの公式\nフーリエ級数和の関数化\nモンテカルロ法の関数化\nはさみうち法の関数化\n階乗\nフィボナッチ数","category":"page"},{"location":"ch08/#ch08","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"","category":"section"},{"location":"ch08/#浮動小数点数","page":"第8回：■ 浮動小数点数","title":"■ 浮動小数点数","text":"","category":"section"},{"location":"ch08/#正規化数，副正規化数","page":"第8回：■ 浮動小数点数","title":"● 正規化数，副正規化数","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"浮動小数点数（floating-point number）とは，012 の代わりに 12 times 10^-1 のように表示する数である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"10進数の浮動小数点数は","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"pmleft(d_0d_1d_2cdots right)_10times 10^e","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のように表される．times の前まで の left(d_0d_1d_2cdots right)_10 の部分を仮数部（mantissa part，significand）と呼ぶ． 添字の 10 は 10進数を意味し，d_0 d_1 cdots は 0 1 ldots 9 までの数字である．times の後ろの 10^e を指数部（exponent part）と呼ぶ．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"2進数の浮動小数点数は","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"pmleft(b_0b_1b_2cdots right)_2times 2^e","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のように表される． ここで，times の前までの left(b_0b_1b_2cdots right)_2 の部分を仮数部と呼ぶ． 添字の 2 は2進数を意味し，b_0 b_1 cdots は 0 または 1 の数字である．times の後ろの 2^e を指数部と呼ぶ．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「bit（binary digit，ビット）」とは，2進数の一桁のことである．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"本文で用いる浮動小数点数は Float64 型である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"typeof(1.0)","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"note: Note\n以下で，浮動小数点数の2進数による表現を詳しく説明するが， 丸暗記する内容ではない．しかし，計算機内部の小数が 「有限桁」で行われることは，計算機による数値計算では常に意識すべきである．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Float64 型は，「IEEE754標準倍精度浮動小数点数」に基づき，","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"符号部 1 bit,\n指数部 11 bit\n仮数部 53 bit ","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"から構成される． ただし，以下のように先頭の 1 bitを固定し， 仮数部の 52 bit のみをデータとして採用するため， 2進数の並びは 1+11+52 = 64 bit である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Float64 型の数値は，正規化数，副正規化数，数でない数の３種類からなりたっている．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"・正規化数は，b_0 = 1 として，","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"pmleft(1b_1b_2cdots b_52right)_2times 2^e","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のように表される数である． ここで，指数は 1022 le e le 1023 の範囲である． 仮数 left(1b_1b_2cdots b_52right)_2 は 1 以上で 2 を超えない範囲の小数となる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"・正規化数で表すことができない，絶対値が小さい浮動小数点数は副正規化数で表わされる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"副正規化数は，b_0 = 0, e=1023 として，","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"pmleft(0b_1b_2cdots b_52right)_2times 2^e","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のように表される数である． 仮数部 left(1b_1b_2cdots b_52right)_2 は 0 以上で 1 を超えない範囲の小数となる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"・「数でない数」は，■ 0による除算で，すでに説明した． Inf, -Inf, NaN の３つである．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Float64 で表すことができる，絶対値がもっとも大きい数は， 正規化数の 2^10241798times10^308 である． 絶対値がもっとも小さい数は， 副正規化数の 2^10222225times10^308 である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"これらは，関数 floatmax , floatmin でそれぞれ得られる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"floatmax(Float64)\nfloatmin(Float64)","category":"page"},{"location":"ch08/#丸め","page":"第8回：■ 浮動小数点数","title":"丸め","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"10進数の小数 02 は","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"02 = dfrac15 = dfrac1101_2","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"となるが，1 を 101_2 で割り切ることはできない．02 を2進数で表すと","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"000110011001100cdots_2","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のようになる．すなわち，1100 の並びが無限に続く循環小数となる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"また，10進数の小数 01 は","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"01 = dfrac15times 2 = dfrac1101_2 times 2^-1","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"であるから，01 を2進数で表すと（上を2進数で1桁ずらして）","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"0000110011001100cdots_2","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のようになる．これも，1100 の並びが無限に続く循環小数となる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「有限桁の小数」で表すことができない「循環小数」を， Float64 型で表現するとき， その仮数の末尾に近い桁を修正する操作を行う場合がある． この操作を「丸める」（rounding）という．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「丸め」られた浮動小数の計算は，筆算とは違う結果となる場合がある． 例えば，","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"0.1+0.2\n0.1+0.2 == 0.3","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"筆算の結果は 03であるが， 計算結果は 0.30000000000000004 と異なってしまう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"別の例として，01 を 10回足した結果は","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"s = 0\nfor i = 1:10\n   global s\n   s += 0.1\nend\n@show s\ns == 1.0","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"0.9999999999999999 となり，10 にはならない．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"このような，「丸め」を原因とする， 正しい値からの「ずれ」を「丸め誤差」と呼んでいる．","category":"page"},{"location":"ch08/#小数を2進数へ変換する","page":"第8回：■ 浮動小数点数","title":"▼ 小数を2進数へ変換する","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"（正の）小数を2進数に変換するには， 小数を 2 倍しその整数部分を取り出す操作を，繰り返し行えばよい．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"0  x = f_1 2^-1 + f_2 2^-2 + cdots  1","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"小数 02 を，2進数で表示すると循環小数になる． 1100 のパターンが繰り返し現れる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x = 0.2\nfor i = 1:50\n   global x\n   q = floor(Int64, x / 2)\n   print(q)\n   x -= q * 2\n   x *= 2\nend","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"00000110011001100110011001100110011001100110011001\n\n1100 循環小数","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"上の結果の最初の桁は，2^1 の桁に相当する． すなわち，小数点は，２つ目の数字の後ろに位置する．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"note: Note\nfloor(Int64, ...) の部分は，床関数の結果を整数型にする． ▶ 床関数・天井関数の型を整数型にする を参照","category":"page"},{"location":"ch08/#練習：有限小数・循環小数","page":"第8回：■ 浮動小数点数","title":"▲ 練習：有限小数・循環小数","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"05 以下の正の小数をいくつかを選び， これらを2進数に直してみよ．有限小数か循環小数かを判定せよ．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"例: 0.1, 0.2, 0.25, 0.3, 0.5","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"さらに，5つ程度の例を加えよ．","category":"page"},{"location":"ch08/#加減算における桁落ちと情報落ち","page":"第8回：■ 浮動小数点数","title":"■ 加減算における桁落ちと情報落ち","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"加算と減算は，小数点の位置を合わせて計算されるが， 桁数が有限であることから，正しい値が得られない場合がある． その原因のうち「桁落ち」と「情報落ち」の二つの現象が知られている．","category":"page"},{"location":"ch08/#桁落ち","page":"第8回：■ 浮動小数点数","title":"■ 桁落ち","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「桁落ち」は，互いに非常に近い二つの数 x y に対して， 減算 x-y を行うと，結果の有効桁数が大きく減少する現象である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"例えば，有効桁数が 4桁の二つの数の引き算の例を見よう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"2.345 - 1.233\n1.234 - 1.232","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"前者の結果は 4 桁の有効桁数を保っているのに対して， 後者の結果は 1 桁の有効桁数になってしまう．（末尾の 18 は丸め誤差である)．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"式を変形して， 互いに近い数どうしを引くことを回避できる場合がある． 下の例を参考にせよ． → ▼ 2次方程式","category":"page"},{"location":"ch08/#情報落ち","page":"第8回：■ 浮動小数点数","title":"■ 情報落ち","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「情報落ち」は，絶対値が大きく異なる数を加減算すると，小さい桁の精度が失われる現象である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"例えば，3つの数 x = 14times 10^-17, y = 24times 10^-16, z = 1 を， この順番で加えた結果と，逆の順番で加えた結果を比較しよう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x = 14e-17\ny = 24e-16\nz = 1\nxyz = (x + y) + z\nzyx = (z + y) + x","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"筆算による正しい値は 1.00000000000000253 であるが， 後者の和よりも前者の和が，正しい値に近い．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"後者の和が誤差を大きく含んだのは，和 z+y の段階で，有効桁数をほぼ使い切ったからである．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"zy = z + y\nnextfloat(zy) # z+y の「隣りの」正しく表される数","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"一般に，大きさの異なる数どうしを加減算する場合には， 絶対値が小さいものから計算を進めたほうがよい．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"ここで見たように，有限桁数の浮動小数点数の加減算は「結合則」を満たさない．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"(x+y)+z neq x+(y+x)","category":"page"},{"location":"ch08/#等差数列","page":"第8回：■ 浮動小数点数","title":"■ 等差数列","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Base.range — Function","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"等差数列を作る方法として，■ 範囲を，先に紹介した．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"関数 range(a,b,length=n) は，等差数列を作る別の方法である． この関数は，初項 a から始めて b で終わる等差数列を作る． 要素の数は n 個であり，等差（要素どうしの間隔）は，自動的に計算される． 結果は ■ 範囲 になる（場合が多い）．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"range(0, 10, length = 11)","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"length=10 の形の引数は，キーワード引数と呼ばれる．","category":"page"},{"location":"ch08/#等比級数","page":"第8回：■ 浮動小数点数","title":"■ 等比級数","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"等比級数は，一定の数（等比 common multiplier）を順番に乗じて得られる数列である． 等比級数は，指数関数を，ベクトルや範囲と組合わせて作ることができる．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"以下は，初項 10^0=1 から始めて，10^3=1000 で終わる等比級数 (要素は 4 個 ) を作る．すなわち，1 10 100 1000 を作る．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"# 整数\n10 .^ (0:3)\n# 小数\nexp10.(0:3)","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"以下は，1 から始まり 1000 で終わる，要素 10 個の等比級数を作る．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"exp10.(range(0, 3, length = 10))","category":"page"},{"location":"ch08/#プロットデフォルトの設定8","page":"第8回：■ 浮動小数点数","title":"プロットデフォルトの設定8","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing LaTeXStrings\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch08/#数値微分","page":"第8回：■ 浮動小数点数","title":"▼ 数値微分","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"dfracdf(x_0)dx = lim_h longrightarrow 0dfracf(x_0+h)-f(x_0)h","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"関数 y=x^2 の x=1 における微分係数を， 上の定義により求めよう． 求まるべき値は 2 であるが，h を小さくすると 2 の上下に暴れてしまう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"closeall() #hide\nplot(xscale=:log10)\n\n# h=logspace(-18,-8,100)\nhs = exp10.(range(-18, -8, length = 100))\nds = ((1.0 .+ hs) .^ 2 .- 1.0) ./ hs\nscatter!(hs, ds, shape=:circle)\nylims!(5e-1, 3e0)\nxlims!(1e-17,1e-7)\nxticks!(exp10.(-17:2:-7))\nplot!()","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"今度は，関数 y=x^n（ただしn = 1 2 3 ） の x=1 における微分係数を， 上の定義により求めよう． 求まるべき値は n であるが，h を小さくすると n の上下に暴れてしまう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"closeall() #hide\nplot(xscale=:log10, xlabel=\"h\", ylabel=\"d\")\n\nhs = exp10.(range(-18, -8, length = 100))\n\nfor n = 1:3\n   ds = ((1.0 .+ hs) .^ n .- 1.0) ./ hs\n   scatter!(hs, ds, label = \"y=x^\" * string(n))\nend\nxlims!(1e-17,1e-7)\nxticks!(exp10.(-17:2:-7))\nplot!()","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"以上の誤差も，非常に近い二つの数字を減じたときに現れる「桁落ち」の現象である． ▼ 2次方程式とは異なり，うまく回避する手段はない．hを小さく取りすぎないように注意する．","category":"page"},{"location":"ch08/#練習・数値微分","page":"第8回：■ 浮動小数点数","title":"▼ 練習・数値微分","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"以下の関数の，指定された座標での微分係数を，上の例と同様に求めてみよ．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"指数関数 y = expx  x = 0\n対数関数 y = logx  x = 1\n対数関数 y = logleft(1+xright)  x = 0  ．注: 関数 Base.log1p — Function を用いよ．\n三角関数 y = sinx  x = 1 ．注: 正しい微分係数は 0540302305868140 である．","category":"page"},{"location":"ch08/#近似比較演算子-isapprox","page":"第8回：■ 浮動小数点数","title":"■ 近似比較演算子 isapprox","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"条件式 x == 1 は， 数 x が 1 と完全に一致することを判定するので， 数 x が丸め誤差を含むような場合に用いるのに適さない．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"その代わりに，丸め誤差の基準を適当な数， 例えば，10^-6 をとって， 条件式 abs(x-1) < 1e-6 をもって，数 xが 1 に非常に近いことを判定するのが常套手段である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x = 1 + 1e-8\nx == 0\nabs(x - 1) < 1e-6","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Base.isapprox - Function","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Julia には，数 a と b がほぼ等しいことを判定する 近似比較演算子 isapprox(a,b) が用意されているので， 必要に応じて用いるとよい． a と b との丸め誤差の程度を考慮して，比較を行う便利な関数である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"0.1 + 0.2 == 0.3\nisapprox(0.1 + 0.2, 0.3)","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"note: Note\n関数 isapprox(a,b) の片方の引数を 0 にする，例えば，isapprox(a,0) と書くと 「 a が近似的に 0 に等しい」ことの判定ではなく，a == 0 の等値の判定 （→ 値が等しい・異なる）の意味になる．この場合には，省略可能な引数である atol （絶対誤差，absolute tolerance）を追加で指定するとよい． atol には a のとりうる典型的な値の平方根を指定することが，よく行われる．詳しくは，関数 Base.isapprox - Function のマニュアルを参照せよ．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"isapprox(1e-3, 0, atol = 1e-8)\nisapprox(1e-10, 0, atol = 1e-8)","category":"page"},{"location":"ch08/#2次方程式","page":"第8回：■ 浮動小数点数","title":"▼ 2次方程式","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"2次方程式","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x^2 - bx + c = 0","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"の解は，解の公式から，判別式 d = b^2-4c を用いて","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"beginaligned\nx_1  = dfracb+sqrtd2=dfracb+sqrtb^2-4c2 \nx_2  = dfracb-sqrtd2=dfracb-sqrtb^2-4c2\nendaligned","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"と求められるが，b と sqrtd が同程度のとき x_2 は「桁落ち」しやすい．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"そこで，(b + sqrtb^2-4c) を分母分子に掛けて","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x_21 = dfrac2cb+sqrtb^2-4c=dfraccx_1","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"のように変形してから計算する（「分子を有理化する」）．最後の項は，解と係数の関係 x_1x_2=c による．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"note: Note\n解と係数の関係． x^2-bx+c=0 の解が x_1 x_2 であるとき，(x-x_1)(x-x_2) = x^2-(x_1 + x_2) x+ x_1 x_2 = x^2-bx+cであるから，末尾の２つを比較して，以下を得る．beginaligned\nb  = x_1 + x_2\nc  = x_1x_2\nendaligned","category":"page"},{"location":"ch08/#2次方程式：計算の例","page":"第8回：■ 浮動小数点数","title":"▼ 2次方程式：計算の例","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"実例で見てみよう．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"小さい正の数 h を用いて，alpha = 100+h と beta = 1+h を 解とする2次方程式を作る． 解と係数の関係から， 上の方程式において b = alpha + beta, c=alphabeta と定めればよい．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"hs = exp10.(range(-12, -1, length = 100))\n\nalpha = 100.0 .+ hs\nbeta = 1.0 .+ hs;\ncs = alpha .* beta;\nbs = alpha .+ beta;","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"解の公式から，「大きいほうの解」 x1 を計算する．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"x2s は解の公式から求めた「小さいほうの解」である．\nx2v は解と係数の関係から求めた「小さいほうの解」である．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"# 続けて\nds = bs .* bs .- 4cs;\nx1s = (bs .+ sqrt.(ds)) / 2;\nx2ss = (bs .- sqrt.(ds)) / 2;\nx2sv = cs ./ x1s;","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「大きいほうの解」について，正しい解との差を描く．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"# 続けて\nplot(xscale=:log10, xlabel=\"h\", ylabel=\"x1-alpha\")\n\nscatter!(hs, x1s .- alpha, shape=:circle)\nylims!(-1e-13, 1e-13) # 調節せよ\nxlims!(1e-14,1e0)\nxticks!(exp10.(-14:2:0))","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「小さいほうの解」について，正しい解との差を描く．上に続けて","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"# 続けて\nplot(xscale=:log10, xlabel=\"h\", ylabel=\"x2-beta\")\n\nscatter!(hs, x2ss .- beta, shape=:circle,\n    label = \"x2s\")\nscatter!(hs, x2sv .- beta, shape=:circle,\n    label = \"x2v\")\nylims!(-1e-14, 1e-14) # 調節せよ\nxlims!(1e-14,1e0)\nxticks!(exp10.(-14:2:0))","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"「小さいほうの解」について，正しい解との差の絶対値（残余）を描く．上に続けて","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"# 続けて\nplot(xscale=:log10, yscale=:log10, \n    xlabel=\"h\", ylabel=\"abs(x2-beta)\")\n\nscatter!(hs, abs.(x2ss .- beta), shape=:circle,\n    label = \"x2s\")\nscatter!(hs, abs.(x2sv .- beta), shape=:circle,\n    label = \"x2v\")\nylims!(1e-16, 1e-13) # 調節せよ\nxlims!(1e-14,1e0)\nxticks!(exp10.(-14:2:0))","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"解の公式から求めた「小さいほうの解」の残余が「あばれる」のに対して， 解と係数の関係から求めた小さいほうの解」の残余が「一定」である様子が見れる．","category":"page"},{"location":"ch08/#数でない数の判定","page":"第8回：■ 浮動小数点数","title":"■ 数でない数の判定","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Numeric Comparisons (section)","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"■ 0による除算で説明したように， IEEE754規格の浮動小数点数は， 「数でない数」 NaN, Inf, -Inf の3つを含んでいる． これらを判定する関数が用意されている．","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"Base.isfinite - Function\nBase.isinf - Function\nBase.isnan - Function","category":"page"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"for x in [0, 1, Inf, -Inf, NaN]\n   @show x\n   @show isfinite(x)\n   @show isinf(x)\n   @show isnan(x)\nend","category":"page"},{"location":"ch08/#今回のまとめ","page":"第8回：■ 浮動小数点数","title":"★今回のまとめ","text":"","category":"section"},{"location":"ch08/","page":"第8回：■ 浮動小数点数","title":"第8回：■ 浮動小数点数","text":"浮動小数点数\n有限小数・循環小数\n加減算における桁落ち・情報落ち\n近似比較演算子\n等差数列・等比数列\n数値微分\n数でない数","category":"page"},{"location":"ch09/#ch09","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"","category":"section"},{"location":"ch09/#プロットデフォルトの設定9","page":"第9回： ▼ 総和・数値積分","title":"プロットデフォルトの設定9","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing LaTeXStrings\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch09/#級数和の公式（繰り返しで加算)","page":"第9回： ▼ 総和・数値積分","title":"▼ 級数和の公式（繰り返しで加算)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"自然数の級数和の結果がいくつか知られている． これらのプロットを描いて，結果を確認しよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"sum_k=1^n k = 1 + 2 + cdots + k + cdots + n = dfracn(n+1)2","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xlabel=\"n\", ylabel=\"sum i up to n\")\n\nnmax = 25\nxs1 = 0:0.2:nmax\nplot!(xs1, xs1 .* (xs1 .+ 1) / 2, \n   label = \"sum i\", lc=1)\n\nns = 0:nmax\nfor n in ns\n   s1 = 0.0\n   for i = 1:n\n      s1 += i\n   end\n   scatter!([n], [s1], ms=4, mc=2, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"sum_k=1^n k^2 = 1^2 + 2^2 + cdots + k^2 + cdots + n^2 = dfracn(n+1)(2n+1)6","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xlabel=\"n\",ylabel=\"sum i^2 up to n\")\n\nnmax = 25\nxs1 = 0:0.2:nmax\nplot!(xs1, xs1 .* (xs1 .+ 1) .* (2 * xs1 .+ 1) / 6, lc=1)\n\nns = 0:nmax\nfor n in ns\n   s = 0.0\n   for i = 1:n\n      s += i^2\n   end\n   scatter!([n], [s], ms=4, mc=2, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/#ベクトルのインデックス","page":"第9回： ▼ 総和・数値積分","title":"■ ベクトルのインデックス","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.length — Method","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"参考 → ■ ベクトル","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトル a の寸法は，関数 length(a) で得られる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v = [11, 21, 31, 41, 51]\nlength(v)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Indexing (section)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトル a ，整数 i に対して a[i] と書くと， ベクトル a の i 番目の要素の値が得られる． 要素の番号（「インデックス，index」） i は 1 から数える． end というインデックスは，ベクトルの最後の要素を指す．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v[1]\nv[2]\nv[end] # 末尾の要素\nv[end-1] # 末尾の一つ前の要素","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"存在しないインデックスを指定すると，例外が発生する．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v[0] # => ERROR: BoundsError","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"インデックスとして，整数 i の代わりに，範囲を指定すると， その範囲のインデックスを持つベクトルが得られる．（参考 ■ 範囲）","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v[2:3]\nv[1:end-1] # 最初から，末尾の一つ前の要素\nv[4:6] # => ERROR: BoundsError","category":"page"},{"location":"ch09/#ベクトルの生成","page":"第9回： ▼ 総和・数値積分","title":"■ ベクトルの生成","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトルを作る方法は，いくつかある．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"これまでに，以下の方法を紹介した．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"要素を列挙する方法（■ ベクトル）\n範囲を用いる方法（■ 範囲）\n関数 range を用いる方法．結果は範囲となる．（■ 等差数列）","category":"page"},{"location":"ch09/#要素が-0のベクトルを作る","page":"第9回： ▼ 総和・数値積分","title":"■ 要素が 0のベクトルを作る","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.zero — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"数 x に対して，関数 zero(x) は，x と同じ型の値 1 を作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"zero(0)\nzero(1)\nzero(0.0)\nzero(1.0)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"型を指定してもよい．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"zero(Int64)\nzero(Float64)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.zeros — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 zeros は，要素が零 0 のベクトルを作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 zeros(n) は，要素の型が浮動小数点で，寸法 n のベクトルを作る．\n関数 zeros(T, n) は，要素の型が T で，寸法 n のベクトルを作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"zeros(5) # 要素は浮動小数点\nzeros(Float64, 5) # 上と同じ\nzeros(Int64, 5) # 要素は整数","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトル v と同じ寸法を持つ 0 ベクトルを作るには，","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v = [1, 2, 3, 4, 5]\nzeros(length(v))\nzeros(Float64, length(v))","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 zero.() を以下のように用いれば v の要素の型と同じ要素の型を持ち，v と寸法が等しい 0 ベクトルを作れる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"zero.([1, 2, 3, 4, 5])\nzero.(1.0:5.0)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"note: Note\n関数 zeros と zero とを混同しないように．","category":"page"},{"location":"ch09/#要素が-1-のベクトルを作る","page":"第9回： ▼ 総和・数値積分","title":"■ 要素が 1 のベクトルを作る","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.one — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"数 x に対して，関数 one(x) は，x と同じ型の値 1 を作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"one(0)\none(1)\none(0.0)\none(1.0)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"型を指定してもよい．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"one(Int64)\none(Float64)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.ones — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 ones は，要素が零 0 のベクトルを作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 ones(n) は，要素の型が浮動小数点で，寸法 n のベクトルを作る．\n関数 ones(T, n) は，要素の型が T で，寸法 n のベクトルを作る．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ones(5) # 要素は浮動小数点\nones(Float64, 5) # 上と同じ\nones(Int64, 5) # 要素は整数","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトル v と同じ寸法を持つ 0 ベクトルを作るには，","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"v = [1, 2, 3, 4, 5]\nones(length(v))\nones(Float64, length(v))","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 one.() を以下のように用いれば 要素が v の要素と同じで，寸法が等しい 1 ベクトルを作れる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"one.([1, 2, 3, 4, 5])\none.(1.0:5.0)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"note: Note\n関数 ones と one とを混同しないように．","category":"page"},{"location":"ch09/#疑似乱数を要素とするベクトルを作る","page":"第9回： ▼ 総和・数値積分","title":"■ 疑似乱数を要素とするベクトルを作る","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Random.rand — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"rand(10) # => 10-elements\nrand([1, 2, 3], 10) # [1,2,3]からランダムに10個選ぶ","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ヒストグラムを描く．分割数 10","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\n\nxs = rand(1000)\n# hist!(xs, bins = 10)\nplot!(xs, seriestype=:hist, bins = 10)\n\nxlims!(-0.2, 1.2)","category":"page"},{"location":"ch09/#正規乱数を要素とするベクトルを作る","page":"第9回： ▼ 総和・数値積分","title":"■ 正規乱数を要素とするベクトルを作る","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.Random.randn — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"平均 0，標準偏差 1 の正規分布の疑似乱数を作る","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"randn(10) # => 10-elements","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ヒストグラムを描く．分割数 50","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\nxs = randn(1000)\nplot!(xs, seriestype=:hist, bins = 50)\nxlims!(-4, 4)","category":"page"},{"location":"ch09/#内包表記","page":"第9回： ▼ 総和・数値積分","title":"● 内包表記","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"[x^2 for x = 0:10]\n[x^2 for x in [-3, 0, 2]]\n[x^2 for x in -10:2:10 if rem(x, 3) != 2]","category":"page"},{"location":"ch09/#フーリエ級数の和","page":"第9回： ▼ 総和・数値積分","title":"フーリエ級数の和","text":"","category":"section"},{"location":"ch09/#フーリエ級数の和（繰り返しで加算)","page":"第9回： ▼ 総和・数値積分","title":"▼ フーリエ級数の和（繰り返しで加算)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"周期波形 f(t+T) = f(t) は， 以下のように，三角関数の級数和として表される． ここで，a_0 a_1 cdots, b_1 b_2 cdots は実数の定数である． これを，実フーリエ級数和という．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"beginaligned\nf(t)  = a_0 \n + a_1 cos omegat  + b_1 sin omegat \n + a_2 cos 2omegat + b_2 sin 2omegat \n + a_3 cos 3omegat + b_3 sin 3omegat + cdots\nendaligned","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ここで omega は基本周波数である．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"omega=dfrac2piT","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"以下の例では，すでに知られているフーリエ級数和から，元の関数が近似される様子を観察するのに留める．","category":"page"},{"location":"ch09/#方形波：フーリエ級数の有限和","page":"第9回： ▼ 総和・数値積分","title":"▼ 方形波：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"方形波は，▶ 方形波を描く で紹介した．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"基本周波数 omega=1，数 -1 と 1 とを往復する方形波を描こう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\n\nts = -3pi:pi/360:3pi\nplot!(ts, sign.(sin.(ts)), lw=1)\nyticks!([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nxticks!(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"この方形波のフーリエ級数和は，以下のように与えられる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"f(t) = dfrac4pileftsint+dfracsin3t3+dfracsin5t5+cdotsright","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"この式の sin t, sin 3t, sin 5t の３つを加えると，方形波に近くなることを観察する．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(lw=1)\n\nts = -3pi:pi/360:3pi\nys = sin.(ts) * 4 / pi\nplot!(ts, ys, label = \"n=1\")\nyticks!([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nxticks!(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)\nys += sin.(3ts) / 3 * 4 / pi\nplot!(ts, ys, label = \"n=1,3\")\nys += sin.(5ts) / 5 * 4 / pi\nplot!(ts, ys, label = \"n=1,3,5\")","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"今度は sin 13t まで加えた結果を観察しよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(lw=1)\n\nts = -3pi:pi/36:3pi\nn = 13\nys = zero.(ts)\nfor i = 1:2:n\n   global ys\n   ys += sin.(i * ts) / i * 4 / pi\nend\nplot!(ts, ys)\nplot!(ts, sign.(sin.(ts)), label = \"up to\" * string(n))\n\nyticks!([-1, 0, 1], [\"-1\", \"0\", \"1\"])\nxticks!(\n   [-3pi, -2pi, -pi, 0, pi, 2pi, 3pi],\n   [L\"-3\\pi\", L\"-2\\pi\", L\"-\\pi\", \"0\", L\"\\pi\", L\"2\\pi\", L\"3\\pi\"],\n)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"note: Note\n","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"上のフーリエ級数和が方形波を近似すると説明したが，なめらかな三角関数の級数和をいくら加えていっても，なめらかでない方形波に一致することはない． 級数和が元の関数に近づくのは 「各点収束（pointwise convergence）」ではなく 「一様収束（uniform convergence）」に相当する．","category":"page"},{"location":"ch09/#三角波：フーリエ級数の有限和","page":"第9回： ▼ 総和・数値積分","title":"▼ 三角波：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"一定の正の傾きで増加，一定の負の傾きで減少を繰り返す周期関数を， 三角波（triangular wave）という．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"傾き 1 と -1 で，周期 2pi の三角波を描こう． この関数は， 絶対値関数 abs （参考: ▼ 絶対値関数）と 関数 mod2pi （参考: ▶ 2piで割った剰余）とを組み合わせて定義できる． 参考→ ■ 関数の定義（代入文形式）","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"triangular(t) = pi - abs.(mod2pi.(t) - pi)\n\ncloseall() #hide\nplot(aspect_ratio=:equal)\n\nts = -3.5pi:pi/6:3.5pi\nplot!(ts, triangular.(ts), lc=1)\nxlims!(-pi * 2.5, pi * 2.5)\nylims!(-pi * 0.1, pi * 1.1)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"上の三角波のフーリエ級数展開は，以下の通りである．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"f(t) = dfracpi2 - dfrac4pileft cos t + dfraccos 3t3^2 + dfraccos 5t5^2 + cdotsright","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(aspect_ratio=:equal)\nts = -3.5pi:pi/6:3.5pi\nplot!(ts, triangular.(ts), lc=1)\n\nys = one.(ts) * (pi / 2)\nfor n = 1:2:5\n   global ys\n   ys -= cos.(n * ts) * (4 / pi / n^2)\nend\nscatter!(ts, ys, ms=4, mc=2, shape=:circle)\nylims!(-pi * 0.1, pi * 1.1)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"勾配が不連続に変化する点（キンク，kink）を拡大して描画しよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nts = -3.5pi:pi/6:3.5pi\nfor nmax = 1:2:9\n   ys = one.(ts) * (pi / 2)\n   for n = 1:2:nmax\n      ys -= cos.(n * ts) * (4 / n^2 / pi)\n   end\n   plot!(ts, ys, label = nmax)\nend\nxlims!(-pi * 0.1, pi * 2.1)\nylims!(-pi * 0.1, pi * 1.1)","category":"page"},{"location":"ch09/#練習：フーリエ級数の有限和","page":"第9回： ▼ 総和・数値積分","title":"◀ 練習：フーリエ級数の有限和","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"次の級数和で表される曲線を描け．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"f(t) = dfrac4pileft sin t - dfracsin 3t3^2 + dfracsin 5t5^2 - cdotsright","category":"page"},{"location":"ch09/#数値積分","page":"第9回： ▼ 総和・数値積分","title":"▼ 数値積分","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"定積分の近似値を，級数和として求めることができる（数値積分）．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"以下では，連続関数の，有限な区間に対する定積分の近似値を求めてみる． 参考→ ▼ 関数が連続とは","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"例として，関数 g(x)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"g(x) = dfrac11+x","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"を，x = 0 から 1 の範囲で積分しよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 g(x) は，この範囲で単調減少である．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\n\nxmin = 0\nxmax = 1\nm = 6\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\ng(x) = 1 / (1 + x)\nplot!(xs, g.(xs), lc=:black, seriestype=:steppre)\nylims!(0, 1.2)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"定積分の値は，","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"int_0^1dfrac11+xdx = leftlogleftvert1+xrightvertright_x=0^x=1 = log2","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"である．","category":"page"},{"location":"ch09/#Riemann和（繰り返しで加算)","page":"第9回： ▼ 総和・数値積分","title":"▼ Riemann和（繰り返しで加算)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"積分すべき関数を，等間隔の短冊に区切り，短冊の面積の総和をとろう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"短冊の幅を d とすると，","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"s_1 = sum_i=1^n g(x_i)cdotd","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"という，総和（「Riemann和」）をとることになる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"以下のプロットは，8 枚の短冊に分けた様子を示す． ここで，短冊の高さは，各短冊の左端の関数の値をとった．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\n\nxmin = 0\nxmax = 1\nm = 3\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)  # n個の短冊に分割する\nd = (xmax - xmin) / n  # 短冊の刻み\ng(x) = 1 / (1 + x)\nplot!(xs, g.(xs))\nylims!(0, 1.2)\n\nfor x in xs[1:end-1]\n   plot!([x, x, x + d, x + d], [0, g(x), g(x), 0], linewidth=2; aux...)\nend\nplot!()","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"では，短冊を 2^4 = 16 枚に分けて，短冊の面積の総和をとろう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"se = log(2)\nm = 4\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\ns1 = 0\nfor i = 1:n\n   global s1\n   x = xs[i]\n   s1 += g(x) * d\nend\n#\n@show s1, se, (s1 - se) / se;","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"16 分割でも，相対誤差 23 を達成した．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"分割数を増やせば，この和は，正しい定積分の値に近づいていくであろう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"分割数を 2^m で増やして，絶対誤差を描こう． 横軸の分割数は，対数で示した．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xscale=:log10, xlabel=\"n\", ylabel=\"absolute error\")\n\nse = log(2)\nfor m = 0:12\n   n = 2^m\n   xs = range(xmin, xmax, length = n + 1)\n   d = (xmax - xmin) / n\n   s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   scatter!([n], [abs(s1 - se)], mc= :black, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"今度は，相対誤差を，両対数プロットで描く．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xscale=:log10, yscale=:log10, xlabel=\"n\", ylabel=\"relative error (absolute value)\")\n\nfor m = 0:12\n   n = 2^m\n   xs = range(xmin, xmax, length = n + 1)\n   d = (xmax - xmin) / n\n   s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   scatter!([n], [abs(s1 - se) / se], mc= :green, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/#総和関数-sum","page":"第9回： ▼ 総和・数値積分","title":"■ 総和関数 sum","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Base.sum — Function","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 sum(xs) は，数のコレクション v を引数にとり，v のすべての要素の総和を求める．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"sum([1, 2, 3, 4, 5])\nsum(1:5)","category":"page"},{"location":"ch09/#級数和の公式（関数-sumを用いる)","page":"第9回： ▼ 総和・数値積分","title":"▼ 級数和の公式（関数 sumを用いる)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"sum_k=1^n k = 1 + 2 + cdots + k + cdots + n^2 = dfracn(n+1)2","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xlabel=\"n\",ylabel=\"sum i up to n\")\n\nnmax = 25\nxs1 = 0:0.2:nmax\nplot!(xs1, xs1 .* (xs1 .+ 1) / 2, label = \"sum i\", lc=1)\n\nns = 0:nmax\nfor n in ns\n   xs = 1:n\n   s1 = sum(xs)\n   scatter!([n], [s1], mc=2, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"sum_k=1^n k^2 = 1^2 + 2^2 + cdots + k^2 + cdots + n^2 = dfracn(n+1)(2n+1)6","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xlabel=\"n\",ylabel=\"sum i^2 up to n\")\n\nnmax = 25\nxs1 = 0:0.2:nmax\nplot!(xs1, \n   xs1 .* (xs1 .+ 1) .* (2 * xs1 .+ 1) / 6,\n   lc=1)\n\nns = 0:nmax\nfor n in ns\n   # 各要素を二乗\n   xs = (1:n) .^ 2\n   s = sum(xs)\n   scatter!([n], [s], ms=4, mc=2, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch09/#Riemann和（関数-sumを用いる)","page":"第9回： ▼ 総和・数値積分","title":"▼ Riemann和（関数 sumを用いる)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Riemann和において， 刻み幅 d はすべての短冊に共通であるから，d をくくりだして","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"s_1 = sum_i=1^n g(x_i)cdotd = dcdotsum_i=1^n g( x_i)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"のようにまとめることができる．すなわち，関数の値の和 sum_i=1^n g( x_i) をとってから d 倍すればよい．関数の値の和を取るのに，関数 sum を使うことができる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"下のプログラムで g.(xs[1:end-1]) は，ベクトル xs[1:end-1] の各要素に関数 g() を適用したベクトルである．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ループで和を計算した場合と，関数 sum を用いる場合との両方で，相対誤差を描く． 計算結果が一致していることが見える． (参考: 結果が一致することを確かめるプロットの描画   → ●▼ 周期関数を確認する","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xscale=:log10, yscale=:log10, \n   xlabel=\"n\", ylabel=\"absolute error\")\n\nse = log(2)\nfor m = 0:12\n   n = 2^m\n   xs = range(xmin, xmax, length = n + 1)\n   d = (xmax - xmin) / n\n\n   # 和を取る\n   s1 = 0\n   for i = 1:n\n      x = xs[i]\n      s1 += g(x) * d\n   end\n   scatter!([n], [abs(s1 - se) / se], shape=:circle,  \n      ms=4, mc=1, label=\"summation\")\n\n   # sum を使う\n   s2 = sum(g.(xs[1:end-1])) * d\n   scatter!([n], [abs(s2 - se) / se], shape=:circle,     \n      mc=2, label=\"sum function\")\nend\nplot!()","category":"page"},{"location":"ch09/#台形則（関数-sumを用いる)","page":"第9回： ▼ 総和・数値積分","title":"▼ 台形則（関数 sumを用いる)","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"今度は，短冊を台形として計算してみる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot()\n\nm = 2\nn = 2^m\nxmin = 0\nxmax = 1\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\n\ng(x) = 1 / (1 + x)\nplot!(xs, g.(xs), lc=1)\nylims!(0, 1.2)\n\nfor i = 1:n\n   x = xs[i]\n   plot!([x, x, x + d, x + d], [0, g(x), g(x + d), 0]; aux...)\nend\nplot!()","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"総和をとるとき，隣り合う台形の面積をまとめることができることに注目しよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"s_t = sum_i=1^n dfracg(x_i)+g(x_i+1) 2cdotd = dcdotleft dfracg(x_1)2 + sum_i=2^n-1 g(x_i)  + dfracg(x_n)2 right","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"先の Riemann和と台形則の値を両方計算してみよう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"se = log(2)\n\n# Riemann和\ns1 = 0\nfor x in xs[1:end-1]\n   global s1\n   s1 += g(x) * d\nend\n\n# 台形則\nst = (g(xs[1]) + g(xs[end])) / 2\nfor i = 2:n\n   global st\n   x = xs[i]\n   st += g(x)\nend\nst *= d\n#\n@show s1, st, (s1 - se) / se, (s1 - se) / se;","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"関数 sum を使って簡潔に書こう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"se = log(2)\nm = 4\nn = 2^m\nxs = range(xmin, xmax, length = n + 1)\nd = (xmax - xmin) / n\ns1 = sum(g.(xs[1:end-1])) * d\n\nst = (g(xs[1]) + g(xs[end])) / 2\nst += sum(g.(xs[2:end-1]))\nst *= d\n#\n@show s1, st, (s1 - se) / se, (s1 - se) / se;","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"相対誤差を描く．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"closeall() #hide\nplot(xscale=:log10, yscale=:log10, xlabel=\"n\", ylabel=\"relative error (absolute value)\")\n\nse = log(2)\nfor m = 0:12\n   local n = 2^m\n   local xs = range(xmin, xmax, length = n + 1)\n   local d = (xmax - xmin) / n\n\n   local s1 = sum(g.(xs[1:end-1])) * d\n\n   local st = (g(xs[1]) + g(xs[end])) / 2\n   st += sum(g.(xs[2:end-1]))\n   st *= d\n\n   scatter!([n], [abs(s1 - se) / se], shape=:circle)\n   scatter!([n], [abs(st - se) / se], shape=:circle)\nend\n","category":"page"},{"location":"ch09/#練習：Riemann和・台形則","page":"第9回： ▼ 総和・数値積分","title":"◀ 練習：Riemann和・台形則","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"以下の定積分の近似値を，Riemann和と台形則でそれぞれ評価してみよ． （注記されていない）定積分の理論値は各自計算せよ．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"begingathered\nint^1_0 3x^2dx \nint^1_0 3 left(x+1 right)^2dx \nint^1_0 expxdx \nint^2_0 dfrac1(1+x)^2dx=dfrac23 \nint^pi_0 sinxdx \nint^1_-1 dfrac21+x^2dx = pi\nendgathered","category":"page"},{"location":"ch09/#繰返し内部からの脱出","page":"第9回： ▼ 総和・数値積分","title":"■ 繰返し内部からの脱出","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"Repeated Evaluation: Loops","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for 文の繰り返し（「 for ブロック」）の内部で，「 break 文」を使うと，現在繰り返し中のループから直ちに抜けることができる．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for i = 1:1000\n   println(i)\n   if i >= 5\n      break\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"乱数の値が 08 を超えるまで繰り返す．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for i = 1:10\n   r = rand()\n   println(r)\n   if r > 0.8\n      break\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"二重ループ，内側のループからの脱出","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for j = 1:3\n   for i = 1:5\n      println(\"i=\" * string(i) * \" j=\" * string(j))\n      if i >= 3\n         break\n      end\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"一つの for 文に二つの繰り返しを書いた場合，break で for 文全体から抜けてしまう．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for j = 1:3, i = 1:5\n   println(\"i=\" * string(i) * \" j=\" * string(j))\n   if i >= 3\n      break\n   end\nend","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for ブロックの内部で，continue 文を使うと，次の繰り返しに直ちに移動できる． 以下で，i % 3 は rem(i,3) と同じである． 参考→ ■ 残余 rem と整商 div","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"for i = 1:10\n   if i % 3 != 0\n      continue\n   end\n   println(i)\nend","category":"page"},{"location":"ch09/#練習：-条件が成り立つまで繰り返す：数値積分","page":"第9回： ▼ 総和・数値積分","title":"◀● 練習： 条件が成り立つまで繰り返す：数値積分","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"(少し難しいので，後回しにしてもよい)","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"分割数 n を 2^20 まで，2 の冪乗で増やしていけ， ただし，相対誤差が 10^-4 以下になったら，そこで終了せよ．","category":"page"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"▼ Riemann和（関数 sumを用いる) ，または， ▼ 台形則（関数 sumを用いる) の，どちらを用いてもよい．","category":"page"},{"location":"ch09/#今回のまとめ","page":"第9回： ▼ 総和・数値積分","title":"今回のまとめ","text":"","category":"section"},{"location":"ch09/","page":"第9回： ▼ 総和・数値積分","title":"第9回： ▼ 総和・数値積分","text":"ベクトルのインデックス\n要素が 0 または 1 のベクトルの生成\nベクトルの総和 sum\n級数和\nフーリエ級数の和\n数値積分：Riemann和\n数値積分：台形則\n繰返し内部からの脱出","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Memorandum on Julia Language v1.9","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Hiroharu Sugawara, Ph. D.","category":"page"},{"location":"ch00/#ch00","page":"はじめに","title":"はじめに","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，大学1年次学生のためのプログラミング演習の手引きである．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia言語の v1.10 を採用した． Julia言語は，開発効率と実行速度の両立を目指した言語である． Juliaは，汎用である（どんな目的にも使える）が， 数値計算の扱いに，とくに優れている．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，プログラムと実行結果を，たくさん紹介する． それらの多くは，大学初年級の数学や技術工学の分野で現れる 数値計算から選んでいる．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"プログラミングの演習が，単に言語の習得に留まらず， STEAM (Science, Technology, Engineering, Arts and Mathematics) の理解の助けになることを希望する．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"実行結果を，そのまま取り込んでいる．","category":"page"},{"location":"ch00/#動作環境","page":"はじめに","title":"動作環境","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"設置（インストール）とは，アプリケーションやプログラムを利用できるように，計算機の環境を整えることをいう．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，利用するPCで，以下の設置がなされていることを前提とする．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia 1.10 以上が設置されていること\nPlots, GR, PythonPlot パッケージ（プロット描画）が設置されていること\nJupyter notebookを用いる場合は IJulia パッケージが設置されていること","category":"page"},{"location":"ch00/#設定方法","page":"はじめに","title":"設定方法","text":"","category":"section"},{"location":"ch00/#Julia言語のバージョンについて","page":"はじめに","title":"Julia言語のバージョンについて","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia言語の 1.0 版は，2018年8月に公開された． Julia 1.0 released","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"この本文の構築には，2024年6月4日に交際された最新版 1.10.4 を用いた．上位互換性が確保されており，性能も改善されているので，可能なら，バージョンアップするとよい．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia v1.10.4 Release note","category":"page"},{"location":"ch00/#Julia言語の情報検索","page":"はじめに","title":"Julia言語の情報検索","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia の１語句をキーワードに検索しても，人の名前によく使われる単語であるので，Julia言語の内容にたどり着くのが難しい．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julialang で検索することを，強く勧める．","category":"page"},{"location":"ch00/#Julia言語の情報源・参考文献","page":"はじめに","title":"Julia言語の情報源・参考文献","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Juliaの思想","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"\"Why We created Julia, 14 February 2012, Jeff Bezanson, Stefan Karpinski, Viral B. Shah, Alan Edelman\n参考和訳 「なぜ僕らはJuliaを作ったか」 丸井 淳史さん（2012年2月21日）","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，Julia v1.10.4 を用いる（再掲）","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia v1.10 Documentation, 本家のドキュメント，英語","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"昨年 (2023年) 現時点の決定版ともいえる日本語解説本２冊が出版された．著者は，日本で著名な Julian である．どちらも入門書を標榜しつつ，高度な内容を紹介している．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Juliaプログラミング大全 佐藤 健太，講談社サイエンティフィック (2023)，ISBN: 978-4-06-531819-5\n実践Julia入門 後藤 俊介，技術評論社 (2023)，ISBN 978-4-297-13350-4","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"構文早見表","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Julia Cheat Sheet\nThe First Track to (a quick and dirty overview of) Julia 1.0 英語版\n早わかり (すぐに使える) Julia 1.0 日本語版．翻案は菅原\nJulia express,　Bogumił Kami´nski さん，英語\n最新版 Julia 1.8.4\nThe Julia Express, ソース\nQuantitative Economics with Julia\nJulia高速チュートリアル，日本語，Julia 0.7以上，@bicycle1885 (Kenta Sato)さん\nJulia高速チュートリアル\nJuliaクックブック\nJulia & IJulia Cheat-Sheet , 英語 @stevenj (MIT, Julia 1.0\nVarious Julia plotting examples using PyPlot, @gizmaa (github)","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Juliaによるプログラミング入門","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Think Julia: How to Think Like a Computer Scientist, Ben Lauwens, Allen Downey, 英語\nオンライン版 Think Julia: How to Think Like a Computer Scientist\n書籍→  https://www.oreilly.com/library/view/think-julia/9781492045021/\nMIT (Massachusetts Institute of Technology) の授業 \"Introduction to Computational Thinking\" の教科書\nTanmay Teaches Julia for Beginners: A Springboard to Machine Learning for All Ages, Tanmay Bakshi, 2020, ISBN:978-1260456639, 英語\n天才プログラマー タンメイが教えるJulia超入門 上記の日本語訳． 訳は菅原．東京化学同人 (2022), ISBN: 9784807920211.\n1から始めるJulia, 進藤 裕之，佐藤 建太，コロナ社 (2020), ISBN 978-4-339-02905-5\nWEB+DB PRESS Vol.111 第2特集に Julia の詳細な紹介記事がある．\n雑誌 ISBN 978-4-297-10657-7, 技術評論社，2019年6月24日発売．\nサポートページ\nJulia Language Programming ~ お気楽 Julia プログラミング超入門 広井 誠さん，Julia 1.0","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"物理学などへの応用","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"１週間で学べる! Julia数値計算プログラミング 永井 佑紀，講談社 (2022)，ISBN: 978-4065282823\n物理で使う数値計算入門：Julia言語による簡単数値計算：永井さんのメモ\nJulia で作って学ぶベイズ統計学 須山 敦志，講談社 (2021)，ISBN: 978-4-06-525980-1\n黒木玄先生・東北大学： 数学・統計の分野で，多数のJupyter notebookを公開している\n微分積分学 Calculus\n統計 Statistics\n微分方程式 Differential equation\n高校数学の話題 HighSchoolMath","category":"page"},{"location":"ch00/#数値計算プログラミングの参考書","page":"はじめに","title":"数値計算プログラミングの参考書","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文では，数値計算の話題を多く扱っている．以下の文献を参考にした．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"数値計算の常識，伊理 正夫，藤野 和建，共立出版，1985年，ISBN: 978-4320013438\n出版社のページ\nCiNiiBooksへのリンク  BN00729247\n数値計算講義，金子 晃，サイエンス社，2009年，ISBN: 978-4781912257\n出版社のページ\n著者サポートページ → 数値計算講義のページ\nCiNiiBooksへのリンク  BA89645032","category":"page"},{"location":"ch00/#節の記号","page":"はじめに","title":"節の記号","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"以下本文の各節表題には，冒頭に ■，▼，▲，★ の記号が付いている． 各記号の意味は，以下の通りである．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"■  Julia 言語の解説\n▼  例題を用いた解説\n▲  練習・応用問題\n★  その回のまとめ","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"以上の記号の前に，● の記号がついた節は，高度な内容を含んだり， 後の説明を先取りしたりしている．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"さらに，◎ は，Julia 0.6.4 から書き換える場合の注意を示す．","category":"page"},{"location":"ch00/#免責事項など","page":"はじめに","title":"免責事項など","text":"","category":"section"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，不定期に更新する．節の配置も変更する可能性がある．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，著者らの知見に基づく情報の公開を目的としている． 本文に書かれた内容およびその正誤によって生じた結果について， 著者らはいかなる責任を負わない．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文に掲載した内容は，著者らの環境でのみ動作の確認を行なっており， いかなる環境においても再現できることを保証するものではない．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"実行環境","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"macOSX version 13.6.6\nJulia 1.10.4（Julia公式ページから配布されたバイナリー）","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"Copyright (c) 2018–2024 Hiroharu Sugawara","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"本文は，いわゆる MIT LICENSE で公開する． LICENSEの本文は MIT License を，その参考和訳は MIT License 参考和訳 を参照せよ．","category":"page"},{"location":"ch00/","page":"はじめに","title":"はじめに","text":"\n# 扱わないこと\n\n* Interfaces\n* Modules\n* Metaprogramming\n* Networking and Streams\n* Parallel Computing\n* Parametric types\n* Profiling\n","category":"page"},{"location":"ch12/#ch12","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"","category":"section"},{"location":"ch12/#テキストファイルの作成・書き込み","page":"第12回：テキストファイルの入出力","title":"▶ テキストファイルの作成・書き込み","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"この節では，テキストファイルを作成し， テキストを書き込む方法を説明する． 一般のテキストファイルの拡張子は，txt である．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"テキストファイルを作成するには，関数 open と close を組で用いる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 open( fn, \"w\") は， ファイル名 fn のファイルを作成し， テキストを書き込む準備を行う． ファイル fn は，存在していてもよい．その場合は，元に書き込まれた内容は廃棄される．ファイルが作成できない場合には例外が発生する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 open は，ファイル記述子 f を返す． 関数 print(f, s) は，ファイル記述子 f で指定されたファイルに文字列 s を書き込む． 関数 println(f, s) は，ファイル記述子 f で指定されたファイルに文字列 s を書き込んだ後に開業する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書き込みが終わったら，関数 close(f) を呼び出し，書き込みを終了する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"f = open(\"hello1.txt\", \"w\")\nprint(f, \"Hello\")\nprintln(f, \" again.\")\nclose(f)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上のプログラムを実行したら，Windows のエクスプローラを用いて，ファイル hello1.txt が作成されることを確かめよ． Windowsの「メモ帳」アプリなどを用いて hello1.txt を開き，その通りのテキストが書き込まれていることを観察・確認せよ． (※ MacOSの場合は，「ファインダー」アプリと，「テキスト・エディット」アプリに読み替えよ)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上と同じ処理は，do...end 構文を用いて書くこともできる． end が終わると関数 close(f) が暗黙的に呼ばれる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"open(\"hello1.txt\", \"w\") do f\n   print(f, \"Hello\")\n   println(f, \" again.\")\nend","category":"page"},{"location":"ch12/#書式付き文字列と出力","page":"第12回：テキストファイルの入出力","title":"▶ 書式付き文字列と出力","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"Printf.@sprintf\nPrintf.@sprintf","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式を指定して，値を文字列に変換する場合には @sprintf() マクロを用いる． また，書式を指定して値を印字するには @printf() マクロを用いる． @sprintf，@printf はどちらも， Printf パッケージに定義されている． using Printf で，このパッケージを読み込んでから用いる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"マクロ @sprintf(fmt,x) は， x を 書式 fmt に従って文字列にする． マクロ @printf(fmt, x) は，その文字列を印字する． 書式文字列 fmt は， C言語の printf 関数などで用いられる書式と，ほぼ同じである．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"なお，Jupyter notebookでは，結果が右寄せされて表示されない場合がある．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式文字列 %i は，整数を印字する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"i の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．指定されたフィールドサイズで収まらない場合には，幅を増やして印字される．\nフィールドサイズを 0 で始めると，空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Printf\n@printf(\"%5i\\n\", -41)\n@printf(\"%05i\\n\", 413)\n@printf(\"%+5i\\n\", 413)\n@printf(\"%+5i\\n\", -413)\n@printf(\"%+05i\\n\", -413)\n@printf(\"%+5i\\n\", -41131)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式文字列 %f は，小数を印字する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"f の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．指定されたフィールドサイズで収まらない場合には，幅を増やして印字される．\nフォールドサイズに続けて，ピリオド . と整数を付けると，小数点以下の桁数を指定する．指定された小数点以下桁数で表されない場合には，丸められる．\nフィールドサイズを 0 で始めると，頭の空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．\nInf と NaN は，その通り印字される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"@printf(\"%8.3f\\n\", -2e-2)\n@printf(\"%08.0f\\n\", -0.252)\n@printf(\"%8.1f\\n\", -0.252)\n@printf(\"%08.2f\\n\", -0.252)\n@printf(\"%8.3f\\n\", -0.252)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式文字列 %e は，指数形式で印字する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"e の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．フィールドサイズで収まらない場合には，幅を増やして印字される．\nフォールドサイズに続けて，ピリオド . と整数を付けると，小数点以下の桁数を指定する．指定された小数点以下桁数で表されない場合には，丸められる．\nフィールドサイズを 0 で始めると，頭の空白が 0 で埋められる．\nフィールドサイズの前に + を付けると，非負の数の前に + 符号がつく．\nInf と NaN は，その通り印字される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"@printf(\"%11.5e\\n\", -0.0078125)\n@printf(\"%12.4e\\n\", -0.0078125)\n@printf(\"%13.3e\\n\", -0.0078125)\n@printf(\"%13.2e\\n\", -0.0078125)\n@printf(\"%13.1e\\n\", -0.0078125)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式文字列 %s は，文字列形式で印字する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"s の前に整数（フィールドサイズ）を付けると，その整数の幅で右寄せされて印字される．フィールドサイズで収まらない場合には，幅を増やして印字される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"@printf(\"%8s\\n\", \"Hello\")\n@printf(\"%8s\\n\", \"Hello world\")","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書式は復数使用してもよい．書式があるのに，印字すべき値がないと例外が発生する．\n書式を指定しない文字は，そのまま印字される．\n\\n は改行文字を表す．\n\\t はタブ（TAB）文字を表す．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"@printf(\"%.1f %15.7e\\n\", 0.025, -0.0078125)\n@printf(\"x=%.1f        y=%15.7e\\n\", 0.025, -0.0078125)\n# 引数が足りない例\n@printf(\"%.1f %15.7e\\n\", 0.025)","category":"page"},{"location":"ch12/#書式を指定して，テキストファイルに書き込む．","page":"第12回：テキストファイルの入出力","title":"▶ 書式を指定して，テキストファイルに書き込む．","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"正規乱数 10 個からなるCSVファイルを書き出そう． 関数 @printf の第一引数に，ファイル記述子 f を入れると，f で示されたファイルに印字される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Printf\nopen(\"test1.txt\", \"w\") do f\n   for i = 1:10\n      @printf(f, \"%15.7f\\n\", randn())\n   end\nend","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上のプログラムが正しく動作したら，test1.txt が作成されるはずである． このファイルを開き，数字が指定された書式で書き込まれたことを観察・確認せよ． さらに，「Excel」アプリを起動し，このファイルを1列のデータとして読み込んでみよ．","category":"page"},{"location":"ch12/#CSVファイルへの書き込み","page":"第12回：テキストファイルの入出力","title":"▶ CSVファイルへの書き込み","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"カンマ , で区切られた値が並ぶ行から構成されるテキストファイルを CSV（Comma Separated Value） ファイルという． 表計算ソフトウエアとのデータの輸入輸出によく用いられる． 拡張子は csv である．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 @printf を用いて，整数と浮動小数点数をカンマで区切った行を書き出そう．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"なお，CSVファイルの1行目に，カンマ , で区切られた文字列を，各列の表題として書くことが多い．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Printf\nopen(\"test2.csv\", \"w\") do f\n   println(f, \"i,x\")\n   for i = 1:10\n      @printf(f, \"%i,%15.7f\\n\", i, randn())\n   end\nend","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上のプログラムが正しく動作したら，test2.csv が作成されるはずである． このファイルを開き，プログラムの指示通り書き込まれたか観察・確認せよ． さらに，「Excel」アプリを起動し，2列のデータとして読み込んでみよ．","category":"page"},{"location":"ch12/#テキストファイルからの読み込み","page":"第12回：テキストファイルの入出力","title":"▶ テキストファイルからの読み込み","text":"","category":"section"},{"location":"ch12/#テキストファイルからの行単位の読み込み","page":"第12回：テキストファイルの入出力","title":"▶ テキストファイルからの行単位の読み込み","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 open( fn ) は，ファイル名 fn のファイルをテキストとして，読み込む準備を行う． ファイル fn が読み込めない場合には例外が発生する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"テキストファイルを読み込むためにも，関数 open と close を組で用いる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"以下のプログラムは，テキストファイルから，１行ずつ読み込み，それを印字する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 eachline(f) は，ファイル記述子 f からテキストを読み込み，行に分割する．このとき，行末の改行文字は取り除かれる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"f = open(\"hello1.txt\")\nfor line in eachline(f)\n   print(line)\nend\nclose(f)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"書き込みの場合と同様に，do...end 構文を用いて書くこともできる． end が終わると関数 close(f) が暗黙的に呼ばれる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"open(\"hello1.txt\") do f\n   for line in eachline(f)\n      print(line)\n   end\nend","category":"page"},{"location":"ch12/#文字列から数に変換する","page":"第12回：テキストファイルの入出力","title":"▶ 文字列から数に変換する","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"文字列を数に変換するには，関数 parse(t, s)を用いる． 第一引数には変換先の型を，第二引数には，変換したい文字列を書く．文字列の前後の空白は無視される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"parse(Float64, \" 12.3\")\nparse(Float64, \" 12.3e-2 \")\nparse(Int64, \" 123 \")\n# 変換できない例\nparse(Int64, \" 12.3 \")","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上のプログラムで作成したファイル test1.txt から1行ずつ読み込み，浮動小数点数に変換して印字してみよう．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"open(\"test1.txt\") do f\n   for line in eachline(f)\n      x = parse(Float64, line)\n      @printf(\"%15.7f\\n\", x)\n   end\nend","category":"page"},{"location":"ch12/#文字列を分割する","page":"第12回：テキストファイルの入出力","title":"▶ 文字列を分割する","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 split(s, c) は，文字列を分割する． 第一引数の文字列 s を，第二引数の文字列のどれか一つの文字が出現したら分割する．結果として，文字列を要素とする配列が返される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"英文テキストを，空白で区切る．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"split(\"one cup of brown suger\", \" \")","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"行をカンマで区切って，それぞれ整数と浮動小数点数に変換する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"line = \"   15  , 0.2401863\"\ns = split(line, \",\")\nparse(Int64, s[1])\nparse(Float64, s[2])","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"上のプログラムで作成した test2.csv を読み込み，各行を整数と浮動小数点数に変換し，印字する． ただし，1行目は読み飛ばす．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Printf\nopen(\"test2.csv\") do f\n   i = 0\n   for line in eachline(f)\n      i += 1\n      i == 1 && continue\n      s = split(line, \",\")\n      x = parse(Int64, s[1])\n      y = parse(Float64, s[2])\n      @printf(\"%5i %15.7f\\n\", x, y)\n   end\nend","category":"page"},{"location":"ch12/#配列に要素を加える","page":"第12回：テキストファイルの入出力","title":"▶ 配列に要素を加える","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"関数 push!(a,x) は，配列 a に，値 x を付け加える．配列 a は書き換えられる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"# Int64 を要素とする配列\nxs = [1, 2]\npush!(xs, 3)\nxs\npush!(xs, 4)\nxs","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"要素がない配列を作るには 関数 zeros(t, 0) を使えばよい． 第一引数 t は，作成する配列の要素である．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"以下では，Float64 型の配列（要素数 0）を最初に作成した．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"xs = zeros(Float64, 0)\npush!(xs, 1.0)\nxs\npush!(xs, 2.0)\nxs","category":"page"},{"location":"ch12/#CSVファイルから配列を作る","page":"第12回：テキストファイルの入出力","title":"▶ CSVファイルから配列を作る","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"以上を組合せて，CSVファイルを読み込み，値を配列としてまとめることができる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Printf\nxs = zeros(Int64, 0)\nys = zeros(Float64, 0)\n\nopen(\"test2.csv\") do f\n   i = 0\n   for line in eachline(f)\n      i += 1\n      i == 1 && continue\n      s = split(line, \",\")\n      x = parse(Int64, s[1])\n      push!(xs, x)\n      y = parse(Float64, s[2])\n      push!(ys, y)\n   end\nend\n@show xs\n@show ys","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"続けて，データを描くと，","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"using Plots\nscatter(ys, shape=:circle)","category":"page"},{"location":"ch12/#CSVパッケージ","page":"第12回：テキストファイルの入出力","title":"▶ CSVパッケージ","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"CSV パッケージを用いると，CSVファイルを容易に扱うことができる．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"CSV パッケージを設置（インストール）していない場合は，次のように設置する．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"import Pkg;\nPkg.add(\"CSV\")","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"CSV パッケージに定義されている関数 CSV.read(fn, DataFrame) を用いると，CSVファイル fn を読み込むことができる． 結果として，拡張された配列（ DataFrame 型）が返される．","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"# CSV\nusing CSV, DataFrames\ndf = CSV.read(\"test2.csv\", DataFrame)\n# 1番目のデータ配列\n@show df[:,1]\n# 2番目のデータ配列\n@show df[:,2]\n#\nusing Plots\nscatter(df[:,2], shape=:circle)","category":"page"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"データを描いた結果は，上と同じである．","category":"page"},{"location":"ch12/#今回のまとめ","page":"第12回：テキストファイルの入出力","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch12/","page":"第12回：テキストファイルの入出力","title":"第12回：テキストファイルの入出力","text":"文字列の扱い\n，出力\n文字列の分割\n文字列から数への変換\n配列に要素を加える\nテキストファイル\n書き込み\n読み込み\nCSVファイル","category":"page"},{"location":"ch06/#ch06","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"","category":"section"},{"location":"ch06/#数の大小比較","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 数の大小比較","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Numeric Comparisons (section)","category":"page"},{"location":"ch06/#値が等しい・異なる","page":"第6回：■ 条件式・■ 条件分岐","title":"値が等しい・異なる","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Base.:== — Function\nBase.:!= — Function","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"演算子 == は，a == b のように用いて，値が等しいか否か判定する． 演算子 != は，値が異なるか否か判定する． 成立すれば（真ならば） true が， 成立しなければ（偽ならば） false が結果となる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"1 == 1\n1 == 2\n1 != 1\n1 != 2","category":"page"},{"location":"ch06/#より大きい","page":"第6回：■ 条件式・■ 条件分岐","title":"より大きい","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Base.:> - Function\nBase.:>= — Function","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"演算子 > は，a > b のように用いて，a の値が b の値よりも大きいか否か． 演算子 >= は，a >= b のように用いて，a の値が b の値以上であるか否か判定する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"2 > 1\n2 >= 1\n2 >= 2","category":"page"},{"location":"ch06/#より小さい","page":"第6回：■ 条件式・■ 条件分岐","title":"より小さい","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Base.:< - Function\nBase.:<= - Function","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"演算子 < は，a < b のように用いて，a の値が b の値よりも小さいか否か． 演算子 <= は，a <= b のように用いて，a の値が b の値以下であるか否か判定する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"2 < 1\n2 <= 1\n2 <= 2","category":"page"},{"location":"ch06/#論理型","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 論理型","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"比較演算子の結果は true または false のどちらかである． この二つの値からなるデータの種類を論理型（logical type）という．","category":"page"},{"location":"ch06/#if文","page":"第6回：■ 条件式・■ 条件分岐","title":"■ if文","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Conditional Evaluation (section)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"if文は，直後に論理式をとる． 論理式の値が true なら，if文の次の文から，end , else , elseif が出現するまでの文を実行する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"条件が成り立つときだけに実行される部分を「 if ブロック（block）」という．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"ブロックは，字下げ（indent） で表記される．が，字下げは見やすさのためだけである．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"if ブロックの後ろに，else 文が続く場合がある． 論理式の値が false なら，else 文の次の文から end が出現するまでの文（「 else ブロック」）を実行する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nelse\n   println(\"x は y より小さくない\")\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"else 文の前に，elseif 文が続く場合もある． 最初の if 文の論理式が false なら，elseif 文の論理式を計算し， それが true なら，elseif 文の次の文から，elseif または end が出現するまでの文（「 elseif ブロック」）を実行する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x = 1\ny = 2\nif x < y\n   println(\"x は y より小さい\")\nelseif x > y\n   println(\"x は y より大きい\")\nelse\n   println(\"x は y と等しい\")\nend","category":"page"},{"location":"ch06/#if式","page":"第6回：■ 条件式・■ 条件分岐","title":"■ if式","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"if式は，論理式が成立したブロックの最後の値を，式の値とする．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x = 40\nm = if x >= 100\n   \"x は 100 以上である\"\nelseif x >= 50\n   \"x は 50 以上である\"\nelseif x >= 20\n   \"x は 20 以上である\"\nelse\n   \"x は 20 よりも小さい\"\nend\n\n@show m","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"if式を用いて ▼ 絶対値関数 を，以下のように書くこともできる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"myabs1(x) =\n   if x >= 0\n      x\n   else\n      -x\n   end\n\n@show myabs1(-1)","category":"page"},{"location":"ch06/#3項演算子","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 3項演算子","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Conditional evaluation \"ternary operator\"","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"a ? b : c","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"条件 a が真 true なら b を， 偽 false なら c を値とする「マクロ」である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"m = 2 > 1 ? \"yes\" : \"no\"\n@show m","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"if式を用いて ▼ 絶対値関数 を，以下のように書くこともできる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"myabs2(x) = x >= 0 ? x : -x\n\n@show myabs2(-1)","category":"page"},{"location":"ch06/#論理演算","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 論理演算","text":"","category":"section"},{"location":"ch06/#論理否定","page":"第6回：■ 条件式・■ 条件分岐","title":"論理否定","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Base.:! — Function","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理否定 ! a は，a の論理値を反転する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"!true\n!false","category":"page"},{"location":"ch06/#論理積","page":"第6回：■ 条件式・■ 条件分岐","title":"論理積","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"&& - Keyword","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理積 a && b は，a と b との両方が true のときだけ true となる．言い換えると，a と b との，少なくとも一つが false なら，false となる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"true && true\ntrue && false\nfalse && true\nfalse && false","category":"page"},{"location":"ch06/#数の大小比較の連続した記述","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 数の大小比較の連続した記述","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"数の比較演算子は，連続して記述できる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"1 < 2 < 3\n1 < 2 && 2 < 3","category":"page"},{"location":"ch06/#論理和","page":"第6回：■ 条件式・■ 条件分岐","title":"論理和","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"|| - Keyword","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理和 a || b は，a と b との少なくとも一つが true のとき true となる．言い換えると，a と b のどちらも false のときに false となる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"true || true\ntrue || false\nfalse || true\nfalse || false","category":"page"},{"location":"ch06/#短絡評価","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 短絡評価","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Short-Circuit Evaluation (section)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理積 a && bと論理和 a || bの評価において， 第1項 a で結果が決まるなら，第2項 b は評価しない． これを短絡評価という．具体的には．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理積 a && b において，a が 偽 false なら，b を評価しない．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"( a が 偽 false なら，b の値によらず，論理積 a && b は偽 false であるから．)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理和 a || b において，a が 真 true なら，b を評価しない．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"( a が 真 true なら，b の値によらず，論理和 a || b は 真 true であるから．)","category":"page"},{"location":"ch06/#論理型〜整数型の一つとして","page":"第6回：■ 条件式・■ 条件分岐","title":"●▼ 論理型〜整数型の一つとして","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Bool 型は，2進数1桁の符号なし整数 UInt1 である． 整数と論理型の値との演算では false は整数 0 , true は整数 1 とみなされる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"2 + true\n2 + false","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"逆に，整数 0 と 1 を論理型に変換するには関数 Bool を用いる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Bool(0)\nBool(1)\nBool.([0, 1])  # 整数のベクトル [0,1] を論理型のベクトルに変換する","category":"page"},{"location":"ch06/#論理式と真理表","page":"第6回：■ 条件式・■ 条件分岐","title":"●▼ 論理式と真理表","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"「論理式（logical expression）」とは， 論理型の変数，または，それらに論理演算を適用した式をいう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"「真理表（truth table）」とは， 論理式に出現する変数（論理変数）のすべての組合せに対して，論理式の値を示した表である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"上の 論理和, 論理積 では，論旨式に変数の４通りの組み合わせに対する演算結果を列挙した．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"上で導入した 論理和 a || b  および 論理積 a && b に対して， 論理変数 a と b のすべての組合せに対する計算結果を計算してみよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"for a in [false, true]\n   for b in Bool.([0, 1])\n      @show a, b, a || b, a && b\n   end\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は，論理式 z=(!a && b) || (a && !b) の値を計算してみよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"ここで，論理否定 ! は，論理和 && や論理積 || よりも 優先順位が高い演算であるので，!a || b は (!a) && b と解釈される． !(a || b) とは解釈されない．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"for a in Bool.([0, 1]), b in Bool.([0, 1])\n   x = !a && b\n   y = a && !b\n   z = x || y\n   @show a, b, x, y, z\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"論理式 z は，","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"a と b の値が異なるときに true\na と b の値が等しいときに false","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"の値をとる． この論理式は，排他的（はいたてき）論理和（exclusive or, 略して exor あるいは XOR）と呼ばれる．","category":"page"},{"location":"ch06/#総当たりによる不定方程式の解法","page":"第6回：■ 条件式・■ 条件分岐","title":"▼ 総当たりによる不定方程式の解法","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"方程式の数よりも，未知数の数が少ない方程式を不定方程式という． 未知数の性質が決まっていれば，未知数の候補を，方程式に代入して， 成り立つ未知数の組合せを求めることができる（総当たり攻撃，brute-force attack）．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"問題　「負ではない三つの整数 x y z が，次の二つの等式を同時に満たすという．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x + y + z = 24","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"x+2y+4z = 51","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"三つの数 x y z の組合せをすべて求めよ．」","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"ここで， x y z は，0 から 24 までの整数である． x y z のすべての組み合わせに対して，二つの等式が成り立つ条件を，if文に渡す．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"for z = 0:24\n   for y = 0:24\n      for x = 0:24\n         if x + y + z == 24 && x + 2 * y + 4 * z == 51\n            @show x, y, z\n         end\n      end\n   end\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"上の for 文の繰り返しは，３重の入れ子になっている．これは，一つの for 文にまとめられる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"for z = 0:24, y = 0:24, x = 0:24\n   if x + y + z == 24 && x + 2 * y + 4 * z == 51\n      @show x, y, z\n   end\nend","category":"page"},{"location":"ch06/#練習：総当たりによる不定方程式の解法","page":"第6回：■ 条件式・■ 条件分岐","title":"▲ 練習：総当たりによる不定方程式の解法","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"以下の式を満たす整数 𝑎𝑏 をすべて求めよ（京都大学・数学 2005年）","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"(1) 𝑎^3  𝑏^3 = 65,\n(2) 𝑎^3  𝑏^3 = 217","category":"page"},{"location":"ch06/#プロット・デフォルトの設定6","page":"第6回：■ 条件式・■ 条件分岐","title":"プロット・デフォルトの設定6","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch06/#格子点による平面領域の塗り分け","page":"第6回：■ 条件式・■ 条件分岐","title":"▼ 格子点による平面領域の塗り分け","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"平面座標 の第一象限 0 le x le 1 0 le y le 1 の範囲に， 格子点を配置しよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"そのうち，x^2+y^2 lt 1 の範囲にある点を赤で， それ以外を青で色分けして示そう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"二重の繰り返し（二重ループ，double loop）を用いた．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"刻み幅は各軸 0025 に選んだので， 格子点の総数は 40times40 = 1600 個である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"赤色の範囲は，4分円となる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlims=(-0.1,1.1), ylims=(-0.1,1.1))\n\nfor y = 0:0.025:1\n   for x = 0:0.025:1\n      c = x * x + y * y < 1 ? 2 : 1\n      scatter!([x], [y], mc=c, shape=:circle)\n   end\nend\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は，二つの不等式 y  x と y  1-x の両方に囲まれる領域を， 赤で示そう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"二重ループを一つの for 文にまとめた． for 文の右側に書かれたループ変数が内側のループに相当する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlims=(-0.1,1.1), ylims=(-0.1,1.1))\n\nfor y = 0:0.025:1, x = 0:0.025:1\n   if y < x && y < 1 - x\n      c = 2\n   else\n      c = 1\n   end\n   scatter!([x], [y], mc=c, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch06/#練習","page":"第6回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"格子点の刻み幅を大きく，または，小さくして， 色分けの様子を観察してみよ． `","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"note: Note\n刻み幅を小さくすると，格子点の数は急激に増える（例えば，xy 軸方向の刻みの数を2倍にすると，格子点の数は 4倍になる）ので，刻み幅を急激に小さくすべきではない．計算量が増えた場合，数分以内に計算が終わらない可能性もあるが，このような状況を経験するのも重要である．","category":"page"},{"location":"ch06/#練習-2","page":"第6回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"以下の領域を表す条件を，式で表せ．その領域を，格子点を用いて塗り分けてみよ．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"点 (00) と点 (10) を一辺とし，第一象限に描かれた正三角形\n中心 left(dfrac12dfrac12right) , 半径 dfrac12 の円","category":"page"},{"location":"ch06/#擬似乱数","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 擬似乱数","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"計算機で発生する乱数を，「擬似乱数（pseudorandom numbers）」という．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"note: Note\n本来の意味の「乱数」は，計算する方法がないはずである． にもかかわらず，ある手順で乱数を発生しているので「擬似乱数」という．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"Random Numbers (section)\nBase.Random.rand - Function","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"関数 rand() は，0 から 1 未満の擬似乱数を発生する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"rand()\nrand()\nrand()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"関数 Random.seed!(m) は，擬似乱数の種をリセットする． パッケージ Random を using してから用いる． 種 m には，0 から 2^32-1 までの整数を指定する． 同じ種を指定すると，同じ系列で擬似乱数を発生する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"using Random\nRandom.seed!(1234)\nrand()\nrand()\nrand()","category":"page"},{"location":"ch06/#乱数による平面領域の塗り分け","page":"第6回：■ 条件式・■ 条件分岐","title":"▼ 乱数による平面領域の塗り分け","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"関数 rand() を2回用いて，座標点 (x,y) を発生しよう． 点の数を増やすと，これらの点は，平面の第一象限 0 le x lt 1 0 le y lt 0 の範囲を埋め尽くすはずである．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"そのうち，x^2+y^2 lt 1 の範囲にある点を赤で， それ以外を青で色分けして示そう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"点の個数は 2^10 = 1024 である． 格子点で図示した場合（ ▼ 格子点による平面領域の塗り分け ）に比べて 点の数は少ないが，特徴を捉えている．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlims=(-0.1,1.1), ylims=(-0.1,1.1))\n\nn = 2^10\nfor i = 1:n\n   x = rand()\n   y = rand()\n   c = x * x + y * y < 1 ? 2 : 1\n   scatter!([x], [y], mc=c, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は， 二つの不等式 y  x と y  1-x の両方に囲まれる領域のみ，赤で示そう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlims=(-0.1,1.1), ylims=(-0.1,1.1))\n\nn = 2^10\nfor i = 1:n\n   x = rand()\n   y = rand()\n   if y < x && y < 1 - x\n      c = 2\n   else\n      c = 1\n   end\n   scatter!([x], [y], mc=c, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch06/#モンテカルロ法による平面図形の面積の推定","page":"第6回：■ 条件式・■ 条件分岐","title":"▼ モンテカルロ法による平面図形の面積の推定","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"以上の例で，ランダムに落とした点の総数のうち， 図形の中に入った数を数えよう． 両者の割合から，図形の面積を推定できる． これを，「モンテカルロ（Monte Carlo）法による面積の算出法」という．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"note: Note\nモンテカルロ（Monte Carlo）は，モナコ公国（Monaco）の地名の一つであり，公営カジノで有名である．モンテカルロ法（Monte Carlo Method）は，擬似乱数を用いて，数値計算やシミュレーションを行う手法の総称である（面積を推定する手法以外の「モンテカルロ法」もある）．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"まず，4分円の面積を推定しよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"n = 2^10\ns = 0\nfor i = 1:n\n   global s\n   x = rand()\n   y = rand()\n   if x * x + y * y < 1\n      s += 1\n   end\nend\na_estimated = s / n\na_exact = pi / 4\ne_rel = (a_estimated - a_exact) / a_exact\n@show a_estimated, a_exact, e_rel","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"測定値について，","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"絶対誤差（absolute error）とは，推定値と真値（exact value, 正しい値）との差（の絶対値）である．\n相対誤差（relative error）とは，絶対誤差を真値で除した値（の絶対値）である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"面積の推定値（experimental value）は a_estimated = s/n である． 4分円の面積の真値 a_exact は dfracpi4 である． （絶対値をとらない）相対誤差は e_rel=(a_estimated - a_exact)/a_exact と計算できる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"点数 1024 個で，相対誤差 2 程度の，面積推定値が得られた．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は，面積の推定値 a_estimated を，点の総数 n に対して描く．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(xscale=:log10, xlabel=\"n\", ylabel=\"a\")\nxticks!(exp10.(0:4))\n\nfor m = 1:16\n   n = 2^m\n   s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if x * x + y * y < 1\n         s += 1\n      end\n   end\n   a_estimated = s / n\n   scatter!([n], [a_estimated], mc=1, shape=:circle)\n   @show n, a_estimated\nend\n\na_exact = pi / 4\nylims!(0.9 * a_exact, 1.1 * a_exact)\nhline!([a_exact]; aux...)\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は，面積の相対誤差（の絶対値） e_rel を，点の総数 n に対して描いてみる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(xscale=:log10, yscale=:log10, \n   xlabel=\"n\", ylabel=\"relative errors\")\nxticks!(exp10.(0:4))\n\nfor m = 1:16\n   n = 2^m\n   s = 0\n   for i = 1:n\n      x = rand()\n      y = rand()\n      if x * x + y * y < 1\n         s += 1\n      end\n   end\n   a_estimated = s / n\n   a_exact = pi / 4\n   e_rel = abs((a_estimated - a_exact) / a_exact)\n   scatter!([n], [e_rel], mc=1, shape=:circle)\nend\nplot!()","category":"page"},{"location":"ch06/#練習-3","page":"第6回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"モンテカルロ法を用いて，以下の領域の面積を推定せよ（これらの領域の，格子点を用いた塗り分けは，以前の例題・練習として行った）．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"余裕があれば，点数に対する相対誤差の変化も描いてみよ．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"二つの不等式 y  x と y  1-x の両方に囲まれる領域\n点 (00) と点 (10) を一辺とし，第一象限に描かれた正三角形\n中心 left(dfrac12dfrac12right) ,　半径 dfrac12 の円","category":"page"},{"location":"ch06/#モンテカルロ法による平面図形の面積の推定：落とす点の範囲を変える","page":"第6回：■ 条件式・■ 条件分岐","title":"●▼ モンテカルロ法による平面図形の面積の推定：落とす点の範囲を変える","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"上のプログラムで，x=rand() の行を x=rand()*2 に変えると，0 le x lt 2 0 le y lt 1 の範囲に点を落とすことになる．この場合についても，面積の推定値を求めてみよ．点を落とす範囲が 0 le x lt 1 0 le y lt 1 と何が違うのだろうか？","category":"page"},{"location":"ch06/#関数の定義（代入文形式）","page":"第6回：■ 条件式・■ 条件分岐","title":"■ 関数の定義（代入文形式）","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"関数は，いくつかの値を受け取って，何らかの操作をして返す，まとまった処理である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"1行によるユーザ定義関数の例を，以下に示す．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"f(x) = x * 2 - 1","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"(の前が，ユーザ定義関数の名前である． 関数名の規則は，■ 変数名の規則 と同じである．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"括弧 () の中に，変数名の並びを記述する． この変数名を，仮引数（「かり・ひきすう」 parameter）という．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"=より右が，関数の定義である． 具体的な値（「実引数＝じつ・ひきすう」，argument）を入れて， 関数を評価する（evaluate）． 関数の定義の中に出現した仮引数は，実引数の値に置き換えられる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"f(0)\nf(1)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"実引数にベクトルなどを与えて，各要素に対して評価する場合には， 関数名の直後にピリオド .を置く．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"f.([1, 2, 3])\nf.(0:5)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"仮引数は，2個以上でもよい．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"g(x, y) = x * y\ng(1, 1)\ng(\"a \", \" b\")","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"数どうしの * 演算は，数の乗算である． 文字列どうしの * 演算は，文字列の連結である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"引数の型にあわせて，正しい演算が得られていることに着目せよ．","category":"page"},{"location":"ch06/#「はさみうち」法による，方程式の求解","page":"第6回：■ 条件式・■ 条件分岐","title":"▼ 「はさみうち」法による，方程式の求解","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"条件判断を，繰り返し行うことで，求める答えに近づいていく例を， もう一つ紹介する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"▼ 不連続な有理式を描く の例として挙げた分母の式 f(x)=x^3+3x^2-4x-12 について，方程式 f(x)=0 の解の近似値を求めてみる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"まず，y=f(x) のプロットを描こう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot()\n\nf(x) = x^3 + 3x^2 - 4 * x - 12\nxs = -3.5:0.05:3\nplot!(xs, f.(xs))\nhline!([0]; aux...)\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"上の関数 f(x) で a=-32  x  b=-26 の区間を選ぼう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"この区間で f(x) が単調増加することを確かめよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot()\n# f(x)=x^3+3*x^2-4*x-12\nxs = -3.2:0.01:-2.6\n\nplot!(xs, f.(xs))\nxlims!(extrema(xs))\nhline!([0];aux...)\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"さて， 連続な関数 f(x) が， 区間 a lt x lt b で単調（単調増加または単調減少）であるとする． ここで，f(a)cdot f(b)lt 0，すなわち，f(a) と f(b) との符号が 異なるとき， 方程式 f(x)=0 の解は a lt x lt b の区間にある．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"ここで，a と b との中点 c=dfraca+b2 をとり，f(a) と f(c) が同じ符号であれば 左端 a を c に更新する． これに対して，f(b) と f(c) が同じ符号であれば 右端 b を c に更新する．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"この手順を繰り返すことで， 方程式 f(x)=0 の解が存在する区間 a lt x lt b を狭めていくことができる． この手法を「はさみうち」法という． 英語では，squeeze theorem, pinching theorem, sandwich theorem などと呼ばれる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"この区間で，「はさみうち」を数回繰り返してみる．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"# f(x)=x^3+3x^2-4*x-12\na = -3.2;\nb = -2.6;\n@show a, b\n@show f(a), f(b)\nfor i = 1:10\n   global a, b, c\n   c = (a + b) / 2\n   @show i, a, b, c, f(c)\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"この範囲の解は x=-3である．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"@show f(-3)","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"区間が狭まる様子を，プロットに描いてみよう．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(xlabel=\"x\", ylabel=\"i\")\n\n# f(x)=x^3+3x^2-4*x-12\na = -3.2;\nb = -2.6;\nfor i = 1:15\n   global a, b, c\n   scatter!([b], [i], mc=1, ms=4, shape=:circle)\n   scatter!([a], [i], mc=2, shape=:circle)\n\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend\nplot!()","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"今度は，区間の幅 (b-a) を描こう． 区間の幅が，単調に減少する様子が観察される．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"closeall() #hide\nplot(yscale=:log10, xlabel=\"i\", ylabel=\"b-a\")\n\n# f(x)=x^3+3x^2-4*x-12\na = -3.2;\nb = -2.65;\nfor i = 1:30\n   global a, b, c\n   scatter!([i], [b - a], mc=1, shape=:circle)\n\n   c = (a + b) / 2\n   if f(a) * f(c) > 0\n      a = c\n   else\n      b = c\n   end\nend\n\nplot!()","category":"page"},{"location":"ch06/#練習-4","page":"第6回：■ 条件式・■ 条件分岐","title":"▲ 練習","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"同じ関数で，異なる区間で，はさみうち法を試してみよ．\n別の関数に対して，単調な区間を選び，はさみうち法を試してみよ．","category":"page"},{"location":"ch06/#NLsolveパッケージの紹介","page":"第6回：■ 条件式・■ 条件分岐","title":"●▲ NLsolveパッケージの紹介","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"NLsolveパッケージは，連立非線形方程式を解くためのパッケージのひとつである．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"NLsolve パッケージを用いて，上の例題を解く例を示す． ただし，まだ説明していない文法（ベクトルの添字，関数の副作用）を用いているので，学習が進んでから，再度試してみよ．","category":"page"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"# Pkg.add(\"NLsolve\") # パッケージの導入．冒頭の`#`を外して１回だけ実行すればよい．\nusing NLsolve\n\n# 解くべき関数を定義する\nf(x)=x^3+3x^2-4*x-12\n# NLsolve に渡す関数を定義する\nf1(x)=f(x[1])\n\n# nlsolve関数を呼び出す．初期値 [-3.5] から解を探索する\nnlsolve(f1, [-3.5])\n\n# 結果を変数 r に保存する\nr = nlsolve(f1, [-3.5]);\n\n# 解を表示する\nr.zero\n\n# 初期値 [-1.8] から解を探索する\nr = nlsolve(f1, [-1.8]);\n\n# 解を表示する\nr.zero\n\n# 初期値 [1.5] から解を探索する\nr = nlsolve(f1, [1.5]);\n\n# 解を表示する\nr.zero","category":"page"},{"location":"ch06/#今回のまとめ","page":"第6回：■ 条件式・■ 条件分岐","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch06/","page":"第6回：■ 条件式・■ 条件分岐","title":"第6回：■ 条件式・■ 条件分岐","text":"数の大小比較\nif文\nif式\n3項演算子\n論理演算\n格子点による平面領域の塗り分け\n擬似乱数\n乱数による平面領域の塗り分け\nモンテカルロ法による平面図形の面積の推定\nユーザ定義関数（代入文の形式）\n「はさみうち」法による，方程式の求解","category":"page"},{"location":"ch07/#ch07","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"","category":"section"},{"location":"ch07/#型","page":"第7回：■ 整数","title":"■ 型","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"型（type）：データの種類のこと","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数型 Int64\n浮動小数点型 Float64","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typeof(1)\ntypeof(1.0)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"論理型 Bool","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typeof(true)\ntypeof(false)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Primitive Types 基本型\nComposite Types 複合型，構成型","category":"page"},{"location":"ch07/#整数","page":"第7回：■ 整数","title":"■ 整数","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Integers (section)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"既定の整数型は，Int64 であり， 64 桁（64bit, binary digit）の2進数である．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"負の数 -n を 2^64-n で表す「2の補数」方式を用いて， 正負の数を表す「符号付整数」である．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Int64 で表される最大の数は 2^63-1 である． また，最小の数（絶対値が最大な負の数)は -2^63 である． これらの値は， 関数 typemax(Int64),typemin(Int64) で，それぞれ求められる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"2^63 - 1\ntypemax(Int64)\ntypemin(Int64)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"note: Note\n2の補数を求める方法が知られていれば， 減算は，引く数の「2の補数」を求め，加算すればよい． 実は，2の補数は簡単に求められる．2の補数では，2進数の最上位の桁が，符号に相当する． すなわち，負の数では， 最上位の桁（Most-Significant Bit, MSB）は 1 , 正の数または 0 では，MSBは 0 になる．","category":"page"},{"location":"ch07/#整数どうしの加減乗算","page":"第7回：■ 整数","title":"■ 整数どうしの加減乗算","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数どうしの加減算は，2の補数として行われる． typemin(Int64) から typemin(Int64) までの範囲を超えても，例外は発生しない．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Overflow behavior (section)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typemax(Int64) + 1\ntypemax(Int64) + 2\ntypemin(Int64) - 1\ntypemin(Int64) - 2\ntypemax(Int64) + typemax(Int64)\ntypemax(Int64) * 2\ntypemax(Int64) * 4","category":"page"},{"location":"ch07/#整数の2進数による表現．","page":"第7回：■ 整数","title":"●▼ 整数の2進数による表現．","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Base.bitstring — Function","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"関数 bitstring(x) は，数 x の2進数表現を文字列として返す．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"bitstring(0)\nbitstring(1)\nbitstring(2)\nbitstring(-1)\nbitstring(-2)\nbitstring(typemax(Int64))\nbitstring(typemin(Int64))","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"上の例で，以下の理由を説明できただろうか？","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typemax(Int64)+1 == typemin(Int64)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typemax(Int64)+typemax(Int64) == -2","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"typemax(Int64)*2 == -2","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"2進数に 2 を乗じることは，左に一つ分ずらすこと（左シフト 1bit）と同じである．","category":"page"},{"location":"ch07/#整数どうしの除算","page":"第7回：■ 整数","title":"■ 整数どうしの除算","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数どうしの割り算（除算）の結果（商 quotient）は，小数（浮動小数点数）になる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"1 / 2","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"余り（剰余）を求めたい場合は，■ 残余 rem と整商 div を参照せよ．","category":"page"},{"location":"ch07/#整数と浮動小数点数との加減乗除","page":"第7回：■ 整数","title":"■ 整数と浮動小数点数との加減乗除","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数と小数を加減乗除すると，小数になる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"1 + 2\n1 + 2.0\n1 * 2\n1 * 2.0","category":"page"},{"location":"ch07/#浮動小数点数から整数への変換","page":"第7回：■ 整数","title":"■ 浮動小数点数から整数への変換","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"浮動小数点数を整数に変換するには，Int64(x) を用いる． ただし，x が小数部を含むと例外がでる（エラーとなる）ので， 小数部を 0 に変換する必要がある．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"この際，床関数が用いられる． 参考→ ■ 床関数・天井関数","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Int64(1.0)\nInt64(1.1)  # エラー\nInt64(floor(1.1))","category":"page"},{"location":"ch07/#プロットデフォルトの設定7","page":"第7回：■ 整数","title":"プロットデフォルトの設定7","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch07/#残余-rem-と整商-div","page":"第7回：■ 整数","title":"■ 残余 rem と整商 div","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"正の整数 x  0 を，正の整数 d  0 で割った結果， 整数の商 q と余り r が得られたとき，","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"x=qd+r","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"が成り立つ．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"割られる数 x を「被除数（dividend）」，割る数 d を「除数（divisor）」という．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数の商 q を，「整商（integral quotient）」， 余り r を「残余（remainder）」という． 残余は，d を超えない，すなわち，","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"0 le r lt d","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"である．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Base.rem - Function\nBase.div - Function","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"関数 rem(x,d) は，x を d で割ったときの残余を返す． 関数 rem の代わりに，% 演算子を用いて x % d と書いてもよい．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"rem(15, 4)\n15 % 4","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"関数 div(x,d) は，x を d で割ったときの整商を返す．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"div(15, 4)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"整数 0 から 7 までを，3 で割った整商と残余（ div と rem の計算結果）を描く．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"x\")\n\nxs = 0:7\nd = 3\nscatter!(xs, rem.(xs, d), ms=4, shape=:circle,\n   label = \"rem(x,\" * string(d) * \")\")\nscatter!(xs, div.(xs, d), shape=:circle,\n   label = \"div(x,\" * string(d) * \")\")\nxlims!(-0.2, 6.2)\nylims!(-0.2, 3.2)\n\nvline!(0:7; aux...)\nhline!(0:3; aux...)","category":"page"},{"location":"ch07/#練習：硬貨への分割","page":"第7回：■ 整数","title":"▲ 練習：硬貨への分割","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"日本では，小額の取引に，","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"500円\n100円\n50円\n10円\n5円\n1円","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"の6種類の硬貨がよく用いられる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"金額が与えられたときに，6種類の硬貨が各々何枚必要か計算せよ． ただし，高額の硬貨を優先して用いるものとする．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"第一段階として，100円，10円，1円に分けるプログラムを書いて実行せよ．\n第二段階として，上の 6種類の硬貨に分けるプログラムを書いて実行せよ．同様な処理は，繰り返し（ for 文）を用いてみよ．\n第三段階として，1円刻みで551円までの金額に対して，6種類の硬貨の枚数を描くプログラムを書いて実行せよ．","category":"page"},{"location":"ch07/#ユークリッドの互除法","page":"第7回：■ 整数","title":"▼ ユークリッドの互除法","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"2 つの自然数 a, b（ただし，a ge b とする）について， a の b による残余を r とすると， a と b との最大公約数（greatest common divisor, gcd）は b と r との最大公約数に等しいという性質が成り立つ． この性質を利用して，b を r で割った残余を求め， 除数 r をその剰余で割った残余を求め， という計算を逐次繰り返し， 残余が 0 になった時の除数が a と b との最大公約数となる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"以下のプログラムで，変数 t は b の値を一時保存するための役目をする． このような変数を，「一時変数（temporary variable）」と呼ぶ．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"a = 1071\nb = 1029\n@show a, b\nwhile b != 0\n   global a, b\n   t = b\n   b = rem(a, b)\n   a = t\n   @show a, b\nend\nprintln(\"gcd=\" * string(a))\n# 公約数の確認\n@show rem(1071, a);\n@show rem(1029, a);","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"3355と2379の最大公約数を求めてみよう．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"a = 3355\nb = 2379\n@show a, b\nwhile b != 0\n   global a, b\n   t = b\n   b = rem(a, b)\n   a = t\n   @show a, b\nend\nprintln(\"gcd=\" * string(a))\n# 公約数の確認\n@show rem(3355, a);\n@show rem(2379, a);","category":"page"},{"location":"ch07/#一般の残余-rem-と整商-div","page":"第7回：■ 整数","title":"■ 一般の残余 rem と整商 div","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"正の整数 x  0 を 正の整数 d  0 で割ったときの 「商」 q と「余り」 r の関係","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"x = qd + r","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"は， 被除数 x や除数 d が，小数や負の数の場合に拡張できる． ここで，「商」q は整数であり， 「余り」r の絶対値は，除数 d の絶対値を超えないものとする．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"0 le leftvertrrightvert lt leftvertdrightvert","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"さて，被除数 x や除数 d が負の数の場合， 「商」q と「余り」 r の取るべき値について，いくつかの考え方がある．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"残余 rem(x,d) とは，「被除数 x と同じ符号の余り」である． すなわち，被除数 x が負なら，残余 r は","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"-d lt r le 0","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"の範囲になる． 対応する「商」は 整商 div(x,d) で求められる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"以下では，-6 から 6 までの数（被除数）を，3 （正の除数）で割ったときの 残余と整商を描く． 被除数が負のとき，3 lt r le 0 となることを観察せよ．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal,xlabel=\"x\")\n\nxs = -6.8:0.2:6.8\nd = 3\nscatter!(xs, rem.(xs, d), ms=4, shape=:circle,\n   label = \"rem(x,\" * string(d) * \")\")\nscatter!(xs, div.(xs, d), shape=:circle,\n   label = \"div(x,\" * string(d) * \")\")\nxlims!(-6.2,6.2)\nylims!(-3.2,3.2)\n\nvline!(-7:7; aux...)\nhline!(-3:3; aux...)\nplot!()","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"今度は，被除数の範囲は変えずに，-3（負の除数）で割ったときの残余と整商を描く．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"x\")\n\nxs = -6.8:0.2:6.8\nd = -3\nscatter!(xs, rem.(xs, d), ms=4, shape=:circle,\n   label = \"rem(x,\" * string(d) * \")\")\nscatter!(xs, div.(xs, d), shape=:circle,\n   label = \"div(x,\" * string(d) * \")\")\nxlims!(-6.2, 6.2)\nylims!(-3.2, 3.2)\n\nvline!(-7:7; aux...)\nhline!(-3:3; aux...)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"上の二つのプロットを比較すると， 残余 rem(x,3) と rem(x,-3) が一致することが観察される．また， 整商 div(x,3) と div(x,-3) は，互いに符号が逆である．","category":"page"},{"location":"ch07/#練習：切り捨て","page":"第7回：■ 整数","title":"▲ 練習：切り捨て","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"正の数 x を","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"01 の位（小数第1位）で（すなわち，小数点以下を切り捨て）\n001 の位（小数第2位）で\n1 の位で\n10 の位で\n一般に 10^n の位で","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"切り捨てるプログラムを書け．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"作成したプログラムの動作を確かめるための数を選び，実行結果を示せ． さらに，切り捨てる前後の数の関係を分かりやすくプロットしてみよ．","category":"page"},{"location":"ch07/#練習：四捨五入","page":"第7回：■ 整数","title":"▲ 練習：四捨五入","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"正の数 x を","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"01 の位（小数第1位）で（すなわち，小数点以下を四捨五入）\n001 の位（小数第2位）で\n1 の位で\n10 の位で\n一般に 10^n の位で","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"四捨五入するプログラムを書け．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"作成したプログラムの動作を確かめるための数を選び，実行結果を示せ． さらに，四捨五入する前後の数の関係を分かりやすくプロットしてみよ．","category":"page"},{"location":"ch07/#剰余-mod-と，商の床-fld","page":"第7回：■ 整数","title":"■ 剰余 mod と，商の床 fld","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Base.mod - Function\nBase.fld - Function","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"「商」 q と「余り」 r の一般の関係","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"begingathered\nx=qd+r \n0 le leftvertrrightvert lt leftvertdrightvert\nendgathered","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"について，別の考え方を示す．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"剰余（modulo）は， 「除数 d と同じ符号の余り」r である． 剰余関数 mod(x,d) は，この「余り」rを返す． 対応する「商」q は，関数 fld(x,d) で求められる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"被除数が非負 x ge 0，かつ，除数が正 d gt 0 なら，残余 rem と剰余 mod は一致する．\n被除数が負 x  0 の場合も，剰余は非負である．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"note: Note\n被除数と除数の両方とも正なら，残余 rem と剰余 mod は一致する．この場合，残余 rem の方が，少し計算コストが小さく，好まれる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"では，-6 から 6 までの数（被除数）を，3（正の除数）で割ったときの剰余と「商」を描こう．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"x\")\n\nxs = -6.8:0.2:6.8\nd = 3\nscatter!(xs, mod.(xs, d), ms=4, shape=:circle,\n   label = \"mod(x,\" * string(d) * \")\")\nscatter!(xs, fld.(xs, d), shape=:circle,\n   label = \"fld(x,\" * string(d) * \")\")\n\nxlims!(-6.2, 6.2)\nylims!(-3.2, 3.2)\n\nvline!(-7:7; aux...)\nhline!(-3:3; aux...)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"実は，関数 fld(x,d) は，floor(x/d) と同じ値であり，「商の床」 floored division ともいう． すなわち，dfracxd 以下の最大の整数である． 参照： ■ 床関数・天井関数","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"上の例で，「商の床」を描く． 関数 fld と同じ結果が得られることが観測できる．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"x\")\n\nxs = -6.8:0.2:6.8\nd = 3\nqs = floor.(xs / d)\nrs = xs - qs * d\nscatter!(xs, rs, ms=4, shape=:circle,\n   label = \"remainder divided by \" * string(d))\nscatter!(xs, qs, shape=:circle,\n   label = \"quotient divided by \" * string(d))\n\nxlims!(-6.2, 6.2)\nylims!(-3.2, 3.2)\nvline!(-3:3; aux...)\nhline!(-7:7; aux...)\nplot!()","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"今度は，被除数の範囲は変えずに，-3 （負の除数）で割ったときの剰余と「商」を描こう．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"x\")\n\nxs = -6.8:0.2:6.8\nd = -3\nscatter!(xs, mod.(xs, d), ms=4, shape=:circle,\n   label = \"mod(x,\" * string(d) * \")\")\nscatter!(xs, fld.(xs, d), shape=:circle,\n   label = \"fld(x,\" * string(d) * \")\")\nxlims!(-6.2, 6.2)\nylims!(-3.2, 3.2)\nvline!(-7:7; aux...)\nhline!(-3:3; aux...)\nplot!()","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"負の数 -3 で割ったとき，剰余 r の範囲は -3 lt r le 0 であることが観察できる．","category":"page"},{"location":"ch07/#練習：「商の床」","page":"第7回：■ 整数","title":"◀ 練習：「商の床」","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"上の例で，「商の床」 floor( x/-3 ) を描け． 関数 fld(x,-3) と結果が等しいことを確認せよ．","category":"page"},{"location":"ch07/#2piで割った剰余","page":"第7回：■ 整数","title":"▶ 2piで割った剰余","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"Base.Math.mod2pi — Function","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"関数 mod2pi(x) は，mod(x,2*pi) と同じである． すなわち，x を 2pi で割った剰余を返す．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"closeall() #hide\nplot(aspect_ratio=:equal)\n\nis = -24:24\nxs = is / 3\nscatter!(xs, mod2pi.(xs), shape=:circle)\nplot!(xlabel=\"x\", ylabel=\"mod2pi(x)\")\nhline!([0,2pi]; aux...)\nplot!()","category":"page"},{"location":"ch07/#整数-0による除算","page":"第7回：■ 整数","title":"■ 整数 0による除算","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"除数が　0 であっても，「余り」を計算しない除算では， 例外は発生しない．→ ■ 0による除算","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"しかし，「余り」を計算する rem , mod , div , mod などにおいて， 除数が 0 であると例外（exception）を発生する． 例外が発生すると，プログラムの実行は，そこで中断する．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"除算例外 Division errors (section)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"div(3, 0)\nrem(3, 0)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"note: Note\n例外が発生した場合，それを救済する手続きを書いて，プログラムを続行することもできる．だが，この文書の範囲を超えるので，説明しない． → Exception Handling","category":"page"},{"location":"ch07/#床関数・天井関数の型を整数型にする","page":"第7回：■ 整数","title":"▶ 床関数・天井関数の型を整数型にする","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"■ 床関数・天井関数 floor(x) および ceil の結果の型は， 引数（ひきすう） x の型に一致する．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"floor(2) # => 整数\nfloor(0.2) # => 小数（浮動小数点数)\n\nceil(2) # => 整数\nceil(0.2) # => 小数（浮動小数点数)","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"結果の型を整数にするには，引数 x の前に，型の名前 Int64 をつける．","category":"page"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"floor(Int64, 2)\nfloor(Int64, 0.2)\n\nceil(Int64, 2)\nceil(Int64, 0.2)","category":"page"},{"location":"ch07/#今回のまとめ","page":"第7回：■ 整数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch07/","page":"第7回：■ 整数","title":"第7回：■ 整数","text":"型\n整数\n整数どうしの加減乗算\n整数どうしの除算\n整数と浮動小数点数との加減乗除\n浮動小数点数から整数への変換\n残余 rem と整商 div\nユークリッドの互除法\n切り捨て，四捨五入（練習）\n剰余 mod と商の床 fld\n整数 0 による除算：例外","category":"page"},{"location":"ch14/#ch14","page":"第14回：複素数","title":"第14回：複素数","text":"","category":"section"},{"location":"ch14/#プロットデフォルトの設定14","page":"第14回：複素数","title":"プロットデフォルトの設定14","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"aux = (label=\"\", lc=:black, lw=0.5)\nusing LaTeXStrings\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch14/#複素数を作る","page":"第14回：複素数","title":"■ 複素数を作る","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"以下では，x, y は Int64 型または Float64 型の数とする．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"関数 complex(x) は，実数部が x の複素数を作る．\n関数 complex(x,y) は，実数部（実部）が x ，虚数部（虚部）が y の複素数を作る．\n複素数の型は，実数部と虚数部の型に合わせて Complex{Int64} または Complex{Float64} となる．x y で Int64 と Float64 型が混在した場合には．後者になる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"complex(1)\ncomplex(1.0)\ncomplex(1.0, -1.0)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"定数 im は虚数単位である．これは，complex(0,1) または complex(0.0,1.0) と同じ意味である． 複素数 x+iy を作るのに，以下のように書いてもよい （が，乗算と加算の演算を含むので，関数 complex を使うほうが好ましい )．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"1 - 1im\n1.0 - 1.0im","category":"page"},{"location":"ch14/#複素数と整数・浮動小数点数との加減乗除","page":"第14回：複素数","title":"▶ 複素数と整数・浮動小数点数との加減乗除","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数と整数または浮動小数点数との加減乗除は，演算子 +, -, *, / を用いる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = complex(1, -1)\nz + 2\nz - 2\nz * 2\nz / 2","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"零 0 による除算は，実数部と虚数部の各々で行われ，Inf ないし NaN の値となる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"complex(1, 0) / 0","category":"page"},{"location":"ch14/#複素数どうしの加減乗除","page":"第14回：複素数","title":"▶ 複素数どうしの加減乗除","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数どうしの加減乗除にも，演算子 +, -, *, / を用いる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = complex(1,-1)\nw = complex(2,-2)\nz + w\nz - w\nz * w\nz / w","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数を値とする変数に対して，更新演算子 +=, -=, *=, /= も使える．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z *= w","category":"page"},{"location":"ch14/#複素数のベクトル","page":"第14回：複素数","title":"▶ 複素数のベクトル","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"整数または浮動小数点数のベクトルを作るのと同様な方法で，複素数のベクトルを作ることができる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"[complex(0, 0), complex(1, 0), complex(1, 1)]\n[complex(i, 2i) for i = -2:2]","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数の零 complex(0.0,0.0) を 5 個含むベクトルを作るには，以下のように書けばよい．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"zeros(Complex{Float64}, 5)","category":"page"},{"location":"ch14/#複素数の実数部・虚数部・共役複素数","page":"第14回：複素数","title":"▶ 複素数の実数部・虚数部・共役複素数","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"関数 real(z) は複素数 z の実数部（実部，real part）を返す．\n関数 imag(z) は複素数 z の虚数部（虚部，imaginary part）を返す．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = complex(1, -1)\nreal(z)\nimag(z)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数ベクトルの各要素の実数部ないし虚数部を計算するには，dot記法を用いる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"zs = [complex(0, 0), complex(1, 0), complex(1, 1), complex(0, 1), complex(0, 0)]\nreal.(zs)\nimag.(zs)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"関数 conj(z) は複素数 z の「共役（きょうえき）複素数（conjugate complex number）」を返す．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = complex(1, -1)\nconj(z)","category":"page"},{"location":"ch14/#負の数に対する平方根","page":"第14回：複素数","title":"▶ 負の数に対する平方根","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"Base.sqrt - Function","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"平方根 sqrt(x)は，負の実数 x に対して例外を出すが，引数を複素数の引数を与えれば計算できる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"# 例外を出す\nsqrt(-1)\n# 計算できる\nsqrt(complex(-1))","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"正負の実数に対して，平方根の実数部と虚数部を描け．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal,legend=:bottomright,\n   xlabel=\"x\", ylabel=\"sqrt of x\")\n\nxs = -1:0.05:1\nzs = complex.(xs)\nsqzs = sqrt.(zs)\nplot!(xs, real.(sqzs), label = \"real part\")\nplot!(xs, imag.(sqzs), label = \"imaginary part\")\nxlims!(-1.5, 1.5)\nylims!(-1.5, 1.5)\nplot!()","category":"page"},{"location":"ch14/#2次方程式の解：一般の場合","page":"第14回：複素数","title":"◀ 2次方程式の解：一般の場合","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"2次方程式 x^2 -bx + c = 0 の解を求める方法について，▼ 2次方程式 で紹介したが， 実数解のみに留めていた． 以下では，複素数解を含めて求めてみる． 一方の解 x_1 を，2次方程式の解の公式で求め， 他方の解を，係数と解の関係により求める．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\nx_1 = dfracb+sqrtb^2-4c2 \nx_2 = dfraccx_1\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"係数 b=1 を一定とし，係数 c を -1 から 1 の範囲で動かす．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"実数部を実線で，虚数部を点線で表した．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal,\n   xlabel=\"real part\", ylabel=\"imag part\")\n\nb = 1\ncs = range(-2, 2, length = 200)\nds = complex(b .* b .- 4cs)\nx1s = (b .+ sqrt.(ds)) / 2;\nx2v = cs ./ x1s;\nplot!(cs, real.(x1s), lc=1, label = \"x1, real part\")\nplot!(cs, imag.(x1s), lc=2, label = \"x1, imag part\")\nplot!(cs, real.(x2v), lc=3, label = \"x2, real part\")\nplot!(cs, imag.(x2v), lc=4, label = \"x2, imag part\")\nxlims!(-2.5, 2.5)\nylims!(-2.5, 2.5)\nplot!()","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"定数 c の値により，解の形が異なる様子が観察できる．すなわち，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"範囲 c lt dfrac14 では実数解（虚数部は零 0 ）\n範囲 c = dfrac14 では重解 dfrac12\n範囲 c gt dfrac14 では複素解（共役複素数）","category":"page"},{"location":"ch14/#ガウス平面","page":"第14回：複素数","title":"▶ ガウス平面","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 x + i y は，平面上の点 (xy) と一対一に対応する．複素数を平面に表したものをガウス平面という．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\",ylabel=\"imag part\")\n\nz = complex(1, 1)\nw = complex(-2, 1)\n\nscatter!([real(z)], [imag(z)], lc=1, label = \"z\")\nscatter!([real(w)], [imag(w)], lc=2, label = \"w\")\nxlims!(-3, 3)\nylims!(-3, 3)\nplot!()","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数ベクトルで表された図形を，ガウス平面に描こう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\",ylabel=\"imag part\")\n\nzs = [complex(0, 0), complex(1, 0), complex(1, 1), complex(0, 1), complex(0, 0)]\n\nplot!(real.(zs), imag.(zs), ms=4)\nxlims!(-2, 2)\nylims!(-2, 2)\nplot!()","category":"page"},{"location":"ch14/#複素数の絶対値と偏角","page":"第14回：複素数","title":"▶ 複素数の絶対値と偏角","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"関数 abs(z) は，複素数 z の絶対値 leftvertzrightvert を返す．\n関数 abs2(z) は，複素数 z の絶対値の2乗 leftvertzrightvert^2 を返す．\n関数 angle(z) は，複素数 z の偏角 anglez をラジアンで返す．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"結果（値域）は -pi から pi である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"これは，ガウス平面上で，複素数を極座標で表示したものに対応している．次の ▶ オイラーの公式 も参照．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"for z in [\n    0,   complex(1, 1), 1im, complex(-1, 1),\n   -1, complex(-1, -1), -im, complex(1, -1), ]\n   @show z, abs(z), angle(z)\nend","category":"page"},{"location":"ch14/#オイラーの公式","page":"第14回：複素数","title":"▶ オイラーの公式","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"実数 theta に対して，指数関数 expitheta は，以下のように書き表される．これをオイラーの公式という．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"expitheta = costheta+ i sintheta","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"指数関数は，複素数を引数とするように拡張されている． expitheta をガウス平面上に描く．これは，単位円（半径 1 ）の円を描く．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal,\n   xlabel=\"real part\", ylabel=\"imag part\")\nxlims!(-1.5,1.5)\nylims!(-1.5,1.5)\n\n\nzs = [exp(im * t) for t = 0:pi/18:2pi]\nscatter!(real.(zs), imag.(zs), shape=:circle)\nplot!()","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"関数 cis(x) は，数 x に対して expi x を計算する．同じ結果が得られることを確認しよう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, legend=:bottomright,\n   xlabel=\"real part\", ylabel=\"imag part\")\nxlims!(-1.5,1.5)\nylims!(-1.5,1.5)\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nscatter!(real.(zs), imag.(zs), ms=4, shape=:circle, label=\"cis\")\n\nzs = [exp(im * t) for t = 0:pi/18:2pi]\nplot!(real.(zs), imag.(zs), ms=2, shape=:circle, label=\"exp(i t)\")","category":"page"},{"location":"ch14/#ガウス平面内で回転する","page":"第14回：複素数","title":"◀ ガウス平面内で回転する","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数に exp(i theta) を乗ずることは，ガウス平面上で，原点に対して，反時計方向に角度 theta だけ回転することに相当する．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\n\nr15 = cis(pi * 15 / 180)\nzs = complex(1, 1)\n\nfor i = 1:10\n   global zs\n   plot!([0, real.(zs)], [0, imag.(zs)])\n   zs *= r15\nend\n\nxlims!(-2, 2)\nylims!(-2, 2)\nplot!()","category":"page"},{"location":"ch14/#アルキメデスの渦を描く（複素数版）","page":"第14回：複素数","title":"◀ アルキメデスの渦を描く（複素数版）","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"実数 t に対して，複素数 z=t exp(i t) の軌跡を，ガウス平面上に描いてみよう． これは，アルキメデスの渦である．参考 →  ▼ アルキメデスの渦を描く","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\n\nts = range(0, 4pi, length = 200)\nzs = ts .* exp.(im * ts)\nplot!(real.(zs), imag.(zs))","category":"page"},{"location":"ch14/#花曲線（複素数版）","page":"第14回：複素数","title":"●▼ 花曲線（複素数版）","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"実数 t に対して， 複素数 z= cos(nt) exp(i t) の軌跡をガウス平面上に描いてみよ． これは，花曲線となる． 参考 → ▼ 花曲線を描く","category":"page"},{"location":"ch14/#複素数どうしの乗算の意味","page":"第14回：複素数","title":"◀ 複素数どうしの乗算の意味","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数どうしの乗算は，極座標で表示すると，その意味が明らかになる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"オイラーの公式を使うと，複素数 z w は，その絶対値と偏角を用いて，以下のように書いて，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\nz = leftvertzrightvert exp(i anglez) \nw = leftvertwrightvert exp(i anglew)\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 z と w の積を求めると，次のようになる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"zw = leftvertzrightvert leftvertwrightvert expleft( i left(anglez+anglewright)right)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"つまり，積 zw の絶対値は，2つの複素数の絶対値の積である． また，積 zw の偏角は，2つの複素数の偏角の和である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"まとめると，複素数どうしの積は，ガウス平面上で拡大縮小と回転を同時に行う演算である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\n\nz = 1 * cis(pi / 3)\nw = 2 * cis(pi / 4)\nzw = z * w\n\nplot!([0, real(z)],  [0, imag(z)],  lc=1, label = \"z\")\nplot!([0, real(w)],  [0, imag(w)],  lc=3, label = \"w\")\nplot!([0, real(zw)], [0, imag(zw)], lc=5, label = \"z*w\")\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nplot!(real.(zs),  imag.(zs),  lc=2, lw = 0.5)\nplot!(real.(2zs), imag.(2zs), lc=6, lw = 0.5)\n\nxlims!(-3, 3)\nylims!(-3, 3)\nplot!()","category":"page"},{"location":"ch14/#複素数の平方根とは","page":"第14回：複素数","title":"◀ 複素数の平方根とは","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"上の特別な場合として，z の二乗を検討する． w=z として，以下を得る．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z^2 = leftvertzrightvert^2 expleft( i 2 anglez right)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"これから，z の平方根 sqrtz は，以下のように求められる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = sqrtleftvertzrightvert expleft( i dfracanglez2 right)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"すなわち，複素数の平方根は，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"絶対値が，元の複素数の絶対値の平方根\n偏角が，元の複素数の偏角の半分","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"となる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"以下に，数値例を示す．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\nz  = -1 + i sqrt3 = 2 left( -dfrac12 + i dfracsqrt32 right) = 2 expleft(i dfracpi3right) \nsqrtz  = sqrt2 expleft(i dfracpi6 right) =  sqrt2 left( dfracsqrt32 + i dfrac12 right)\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"z = complex(-1, sqrt(3));\n@show z, abs(z), angle(z);\nw = sqrt(z);\n@show w, abs(w), angle(w);","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\n\nz = complex(-1, sqrt(3))\nw = sqrt(z)\n\nplot!([0, real(z)], [0, imag(z)], lc=1, label = \"z\")\nplot!([0, real(w)], [0, imag(w)], lc=2, label = \"sqrt(z)\")\n\nzs = [cis(t) for t = 0:pi/18:2pi]\nplot!(real.(zs) * 2, imag.(zs) * 2, lc=1, lw = 0.5)\nplot!(real.(zs) * sqrt(2), imag.(zs) * sqrt(2), lc=2, lw = 0.5)\n\nxlims!(-3, 3)\nylims!(-3, 3)\nplot!()","category":"page"},{"location":"ch14/#図形を回転する","page":"第14回：複素数","title":"◀ 図形を回転する","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数に exp(i theta) を乗ずることは， ガウス平面上で，原点に対して，反時計方向に角度 theta だけ回転することに相当する． 平面図形を複素数ベクトルとして表して，図形を回転しよう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\n\nr15 = cis(pi * 15 / 180)\nzs = [complex(0, 0), complex(1, 0), complex(1, 2), complex(0, 0)]\n\nfor i = 1:10\n   global zs\n   plot!(real.(zs), imag.(zs), shape=:circle)\n   zs *= r15\nend\n\nxlims!(-3, 3)\nylims!(-3, 3)\nplot!()","category":"page"},{"location":"ch14/#伝達関数","page":"第14回：複素数","title":"◀ 伝達関数","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"制御工学や電気電子回路では「線形システム」に着目する． これは，入力と出力が，時刻 t に対する定数係数の微積分方程式で表されるようなものである． 線形システムでは，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"角振動数 omega=2pif の正弦波 x(t) = x_0 cos left(omegat+phi angleXright) を入力に与えると，\n同じ角振動数の正弦波 y(t) = y_0 cos left(omegat+angleY right) が出力として得られること","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"が知られている．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"そこで，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 X = x_0 exp(iangleX) を入力の正弦波 x(t) と同一視し（＝同じものと考え），\n複素数 Y = y_0 exp(iangleY) を出力の正弦波 y(t) と同一視すると，","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"入力と出力との比は，複素数 H になる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"Y = H X","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"ここで，X Y H は，一般に， 角振動数 omega または 周波数 f の関数である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"Y(omega) = H(omega) X(omega)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 H(omega) を，「伝達関数（transfer function）」という．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"伝達関数の絶対値は，入力と出力の振幅の比（振幅比）を与える．\n伝達関数の偏角は，入力の位相と出力の位相の「ズレ」（位相差）を与える．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\nleftvertH(omega)rightvert = dfracleftvertY(omega)rightvertleftvertX(omega)rightvert = dfracy_0x_0 \nangleH(omega) = angleY(omega) - angleX(omega)\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"「周波数応答（frequency response）」とは， 角振動数 omega または 周波数 f の関数として 伝達関数の振幅 leftvertH(omega)rightvert と 位相 angleH(omega) を描いた図である． 線形システムの振る舞いを観察するのに便利である．","category":"page"},{"location":"ch14/#共振回路","page":"第14回：複素数","title":"◀ 共振回路","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"(Image: )","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"自己インダクタンス（コイル） L, 電気容量（コンデンサ） C,  電気抵抗 R を直列に接続した LCR 直列回路の電源に正弦波電圧 e(t) を加える． 抵抗 R の両端子間の電圧 v(t) は，同じ角振動数を持つ正弦波 v(t) となる． 正弦波 e(t) と v(t) を複素数 E(omega) と V(omega) で表したとき， 両者の比は，以下の複素数 H(omega) で表される．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"H(omega) = dfracV(omega)E(omega) \n= dfrac11 + i Q left(dfracomegaomega_0 - dfracomega_0omegaright)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"ここで，omega_0 = 2pif_0 と Q は，回路素子 L C R の値から 決まる正の定数である．f_0 は周波数の次元，omega_0 は角振動数の次元を持ち，Q は無次元である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"まず，f_0= 1mathrmkHz Q = 1 として，H(omega) の 振幅 leftvertH(omega)rightvert を描く．横軸 周波数は対数で表示する．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 200))\nws = 2pi * fs\nq = 1\nh1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n\ncloseall() #hide\nplot(xscale=:log10, ylabel=\"Amplitude squared\", xlabel=\"f / Hz\")\nxticks!(exp10.(1:5))\n\nplot!(fs, abs.(h1))","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"振幅は，単峰性の極大値 1 をとる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"極大となる周波数 f_0 を「共振周波数（resonance frequency）」， これに対応する角振動数 omega_0=2pif_0 を 「共振角振動数（resonance angular frequency）」という．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"今度は，振幅の二乗 leftvertH(omega)rightvert^2 と 位相 angleH(omega) を同時に描こう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 200))\nws = 2pi * fs\nq = 1\nh1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n\ncloseall() #hide\np1=plot(xscale=:log10, ylabel=\"Amplitude squared\")\nxticks!(p1,exp10.(1:5))\n\nplot!(p1,fs, abs2.(h1))\nvline!(p1, [f0]; aux...)\nhline!(p1, [1 / sqrt(2)]; aux...)\n\np2=plot(xscale=:log10,\n   xlabel=\"f / Hz\",ylabel=\"Phase\",ylims=(-100, 100))\nxticks!(p2,exp10.(1:5))\n\nplot!(p2, fs, angle.(h1) * 180 / pi)\nytics = [-90, -45, 0, 45, 90]\nyticks!(p2,ytics)\nhline!(p2,ytics; aux...)\nvline!(p2,[f0];aux...)\n\nplot(p1,p2, link=:x,\n   layout=grid(2,1,heights=[0.5,0.5]), \n   bottom_margin=[-30px 0px])","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"位相は 90^circ から始まり -90^circ に単調減少する． 振幅が極大となる周波数 f_0 で位相は 0 となる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"さらに，leftvertH(omega)rightvert^2 = dfrac12 となる周波数（２つある）で， 位相は pm 45^circ をとる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"次に，f_0 omega_0 を変えずに，Q の値を増減して， 振幅の二乗 leftvertH(omega)rightvert^2 を描く．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(xscale=:log10, \n   xlabel=\"f / Hz\",ylabel=\"Amplitude squared\")\nxticks!(exp10.(1:5))\n\nfor q in [0.5, 1, 2]\n   h1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n   plot!(fs, abs2.(h1), label = \"Q=\" * string(q))\nend\nvline!([f0]; aux...)\nhline!([1 / sqrt(2)]; aux...)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"定数 Q が小さくなると，峰が鋭くなる（幅が狭くなる）様子が観察される．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"さらに，位相のプロットを加えよう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 200))\nws = 2pi * fs\nq = 1\nh1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n\ncloseall() #hide\np1=plot(xscale=:log10, ylabel=\"Amplitude squared\")\np2=plot(xscale=:log10, xlabel=\"f / Hz\",ylabel=\"Phase\",ylims=(-100, 100))\nxticks!(p1,exp10.(1:5))\nxticks!(p2,exp10.(1:5))\n\nfor q in [0.5, 1, 2]\n   h1 = 1 ./ (1 .+ im * q * (ws / w0 - w0 ./ ws))\n   plot!(p1,fs, abs.(h1), label = \"Q=\" * string(q))\n   plot!(p2,fs, angle.(h1) * 180 / pi)\nend\n\nvline!(p1, [f0]; aux...)\nvline!(p2,[f0];aux...)\nhline!(p1, [1 / sqrt(2)]; aux...)\nytics = [-90, -45, 0, 45, 90]\nyticks!(p2,ytics)\nhline!(p2,ytics; aux...)\n\nplot(p1,p2, link=:x,\n   layout=grid(2,1,heights=[0.5,0.5]), \n   bottom_margin=[-30px 0px])","category":"page"},{"location":"ch14/#練習：共振回路","page":"第14回：複素数","title":"●◀ 練習：共振回路","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 H(omega) の分母の虚数部分","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"Q left( dfracomegaomega_0 - dfracomega_0omega right)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"を，角振動数 omega の関数として描け． その特徴を記せ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"振幅の二乗が最大値の半分 leftvertH(omega)rightvert^2 = dfrac12 になる角振動数は2つある． その周波数 omega_1 omega_2 を数値的に求めてみよ． 参考 → ▼ 「はさみうち」法による，方程式の求解","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"２つの角振動数の差 Deltaomega = omega_2 - omega_1 を， 角振動数の半値全幅（FWHM; full width of half maximum）という．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"定数 Q は，半値全幅 Deltaomega と共振角振動数 omega_0 の比に，ほぼ等しい．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"Q simeq dfracomega_0Deltaomega = dfracf_0Deltaf","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"これを，数値的に確かめてみよ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"ヒント： 半値全幅を与える角振動数 omega_1 omega_2 では，以下が成り立つ． 複号 pm が，omega_1 omega_2 のどちらかに対応するかを考えよ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"H(omega_12 ) = dfrac11 pm i","category":"page"},{"location":"ch14/#低域通過フィルタ","page":"第14回：複素数","title":"◀ 低域通過フィルタ","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"(Image: )","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"自己インダクタンス L と電気抵抗 R を直列に接続したLR直列回路の電源に正弦波電圧 e(t) を加える． 抵抗 R の両端子間の電圧 v(t) は，同じ角振動数を持つ正弦波 v(t) となる． 正弦波 e(t) と v(t) を複素数 E(omega) と V(omega) で表したとき， 両者の比は，以下の複素数 H(omega) で表される．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"H(omega) = dfracV(omega)E(omega) = dfrac11+idfracomegaomega_0","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"ここで，omega_0 = 2pif_0 は，回路素子 L R の値から 決まる正の定数である．f_0 は周波数の次元，omega_0 は角振動数の次元を持つ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"まず，f_0 = 1mathrmkHz として，H(omega) の 振幅 leftvertH(omega)rightvert を，描く． 横軸の周波数は対数で表示する．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 100))\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\ncloseall() #hide\nplot(xscale=:log10, xlabel=\"f / Hz\", ylabel=\"Amplitude squared\")\nxticks!(exp10.(1:5))\n\nplot!(fs, abs.(h1))\nhline!([1, 1/sqrt(2)]; aux...)\nvline!([f0];aux...)\nplot!()","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"振幅は，周波数が低いとき 1 にほぼ等しく，周波数の増加に伴い，単調減少する． 周波数が低い正弦波をそのまま通し，周波数の高い正弦波を減衰させるので，「低域通過フィルタ（Low Pass Filter; LPF）」と呼ばれる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"周波数 f_0 における振幅は dfrac1sqrt2 である． 周波数 f_0 は，振幅が減衰する周波数の目安であり，「遮断（しゃだん）周波数（cut-off frequecy）」と呼ばれる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"振幅 A の常用対数（底が 10 の対数）をとり，20 倍したものを「利得（gain）」という． 利得の「単位」はデシベル（dB）である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"G = 20 log_10 A","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"上のプロットを，縦軸を利得に変換して描く．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 100))\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\ncloseall() #hide\nplot(xscale=:log10,xlabel=\"f / Hz\",ylabel=\"gain / dB\")\nxticks!(exp10.(1:5))\n\nplot!(fs, 20 * log10.(abs.(h1)))\nhline!([0,-3]; aux...)\nvline!([f0]; aux...)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"振幅 1 は 利得 0mathrmdB である． 減衰動作の周波数領域では，周波数が 10 倍になると利得は -20mathrmdB 減少する． この傾きを -20mathrmdBmathrmdecade と称する（decade は 10 倍の意味）．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"さらに，位相を加えて描く．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"f0 = 1e3\nw0 = 2pi * f0\nfs = exp10.(range(1, 5, length = 100))\nws = 2pi * fs\nh1 = 1 ./ (1 .+ im * ws / w0)\n\ncloseall() #hide\np1 = plot(xscale=:log10, \n    xlabel=\"f / Hz\", ylabel=\"gain / dB\",\n    xformatter=Returns(\"\"))\nxticks!(p1,exp10.(1:5))\nplot!(p1,fs, 20 * log10.(abs.(h1)))\n\nvline!(p1, [f0]; aux...)\nhline!(p1, [0,-3]; aux...)\n\np2 = plot(xscale=:log10, \n   xlabel=\"f / Hz\",ylabel=\"phase / degree\",\n   ylims=(-100, 10))\nxticks!(p2,exp10.(1:5))\n\nplot!(p2,fs, rad2deg.(angle.(h1)))\nyticks!(p2,[-90, -75, -60, -45, -30, -15, 0]) # y軸の刻みを指定する\nvline!(p2,[f0]; aux...)\nhline!(p2,[-45,0,45,-90]; aux...)\n\nplot(p1,p2, link=:x,\n   layout=grid(2,1,heights=[0.5,0.5]), \n   bottom_margin=[-30px 0px])","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"位相は 周波数の増加に伴い単調減少する． 低い周波数では 0^circ に，高い周波数では -90^circ にそれぞれ漸近する．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"遮断周波数 f_0 では伝達関数は H(omega_0) = dfrac11+i である． したがって，遮断周波数 f_0 での利得は -3mathrmdB ，位相は -45^circ である （註: log_10 2 simeq 03 ）．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"以下の伝達関数に対して，周波数応答を描け．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"H(omega) = dfrac-A1+idfracomegaomega_0","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"まず，A = 1 を保ったまま f_0 = 100 1000 10000mathrmHz と増やしてみよ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"次に，A = 1 10 100 と増やしてみよ．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"それぞれ，どのように変化するか，言葉で記述してみよ．","category":"page"},{"location":"ch14/#複素数に拡張された関数","page":"第14回：複素数","title":"■ 複素数に拡張された関数","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"平方根や指数関数以外でも，実数を引数とする関数の多くが，複素数を引数とするように拡張されている．","category":"page"},{"location":"ch14/#対数関数（複素数）","page":"第14回：複素数","title":"▶ 対数関数（複素数）","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 z = rexp(itheta) と極座標表示したとき，その自然対数は，以下のように計算できる． すなわち，実数部は絶対値の自然対数，虚数部は偏角である．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"logz = log rexp(itheta) = logr + i theta","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 z = 1 + i y の自然対数 logz の実数部と虚数部を描く．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"y\", legend=:top)\n\nys = range(-2pi, 2pi, length = 101)\nzs = complex.(1, ys)\ncs = log.(zs)\nplot!(ys, real.(cs), label = \"real log (1+i*y)\")\nplot!(ys, imag.(cs), label = \"imag log (1+i*y)\")\nylims!(-3, 3)\nxlims!(-3, 3)\n\nvline!([0]; aux...)\nhline!([-pi/2,0,pi/2]; aux...)\nhline!([-pi/2,pi/2], lc=:cyan; aux...)\n#\nhline!([log(sqrt(2))], lc=:magenta; aux...)\nhline!([-pi/4,pi/4], lc=:magenta; aux...)\nvline!([-1,1]; lc=:magenta, aux...)","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"変数 y の増加に伴い，logz の虚数部は -dfracpi2 から dfracpi2 へ単調に増加する（シアン色の補助線） ． 実数部は下に凸で，y=0 で極小値 log1 = 0 をとる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"特に，y = pm1 において，虚数部は pmdfracpi4 ，実数部は logsqrt2 をとる（マゼンダ色の補助線）．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"上のプロットは，ガウス平面上の z = 1 + i y の軌跡から理解できるであろう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, \n    xlabel=\"real part\", ylabel=\"imag part\")\n\nfor y in [-2, -1, 1, 2]\n   plot!([0, 1], [0, y])\n   text(1.1, y, \"1+i \" * string(y))\nend\nxlims!(-3, 3)\nylims!(-3, 3)\nhline!([0]; aux...)\nvline!([0,1]; aux...)\nplot!()","category":"page"},{"location":"ch14/#練習：対数関数（複素数）","page":"第14回：複素数","title":"◀ 練習：対数関数（複素数）","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数 z = x + i の自然対数 logz の実数部と虚数部を描け． その結果を，ガウス平面上の z の軌跡を描いて，考察せよ．","category":"page"},{"location":"ch14/#三角関数と双曲線関数","page":"第14回：複素数","title":"▶ 三角関数と双曲線関数","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"双曲線関数 cosht sinht や三角関数 cost sint は，指数関数 exp(z) を用いて，定義されることもある．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\ncosh x = dfracexp(x)+exp(-x)2 \nsinh x = dfracexp(x)-exp(-x)2 \ncos x = dfracexp(ix)+exp(-ix)2 \nsin x = dfracexp(ix)-exp(-ix)2i\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"したがって，三角関数に純虚数を与えると，双曲線関数となる．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"beginaligned\ncos ix  = cosh x \nsin ix  = i sinh x\nendaligned","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"上の等式がなりたつことを，プロットで観察しよう．","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"closeall() #hide\nplot(aspect_ratio=:equal, xlabel=\"real part\", ylabel=\"imag part\")\nxlims!(-1.8, 1.8)\nylims!(-1.8, 1.8)\nplot!(xlabel=\"x\")\n\nxs = range(-1, 1, length = 21)\ncz = cos.(im * xs)\nplot!(xs, real.(cz), lc=1, label = \"real cos(ix)\")\nplot!(xs, cosh.(xs), lc=2, shape=:circle, label = \"cosh(x)\")\n#\nsz = sin.(im * xs)\nplot!(xs, imag.(sz), lc=3, label = \"imag sin(ix)\")\nplot!(xs, sinh.(xs), lc=4, shape=:circle, label = \"sinh(x)\")\n#\nhline!([0]; aux...)\nvline!([0]; aux...)\nplot!()","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"## ■ 複素数を定義域とする関数","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"（案）微分方程式の境界値問題\n\n## ★ 今回のまとめ","category":"page"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"（案）微分方程式の初期値問題","category":"page"},{"location":"ch14/#今回のまとめ","page":"第14回：複素数","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch14/","page":"第14回：複素数","title":"第14回：複素数","text":"複素数\n複素数のベクトル・行列\n複素数の加減乗除\nガウス平面\nオイラーの公式\n極座標表示\n複素数に拡張された関数\n応用：伝達関数","category":"page"},{"location":"LICENSE/#MIT-License","page":"MIT License","title":"MIT License","text":"","category":"section"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"Copyright (c) 2018–2024 Hiroharu Sugawara","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.","category":"page"},{"location":"LICENSE/","page":"MIT License","title":"MIT License","text":"THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","category":"page"},{"location":"ch10/#ch10","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"","category":"section"},{"location":"ch10/#ベクトルを引数とする関数","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ベクトルを引数とする関数","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"■ 総和関数 sum のように，ベクトルを引数とする関数がある．","category":"page"},{"location":"ch10/#積","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 積","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Base.prod — Function","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [2, 3, 4];\nprod(v)\n\nr = 1;\nfor i = 1:length(v)\n   global r\n   r *= v[i]\nend\nr","category":"page"},{"location":"ch10/#ノルム","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ノルム","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"LinearAlgebra.norm — Function","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"「ノルム（norm）」は，ベクトル（や行列）の「大きさ」を一般化した関数である．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"LinearAlgebra パッケージの中で，関数 norm() が定義されている．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ノルムにはいくつかの定義がある． 単なる norm(v) は，2-norm を意味し，各要素の２乗平均値の和の平方根である．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\n\nusing LinearAlgebra\nnorm(v)\n@show sqrt(sum(v .^ 2))\n\nr = 0;\nfor i = 1:length(v)\n   global r\n   r += v[i]^2\nend\nsqrt(r)","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\n関数 abs.(v) は，ベクトルの各要素の絶対値からなるベクトルである．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\nabs.(v)","category":"page"},{"location":"ch10/#平均値・標準偏差","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 平均値・標準偏差","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics.mean — Function\nStatistics.stdm — Function","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ベクトルに格納されたデータの平均値や標準偏差を計算できる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics パッケージの関数 mean(v) は，ベクトル v の平均値を算出する．平均値は，各要素の総和 sum(v) を要素の数 n で除したものである．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Statistics パッケージの関数 std(v) は，ベクトル v の標準偏差を算出する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"単なる std(v) は，(n-1) で割った「偏りがない（unbiased）」標準偏差を算出する． 平均値を算出する． std(v, corrected=false) とすると，n で割った「偏った（biased）」標準偏差を算出する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = [1, 2, 3, 4, 5, 6, 7];\n# Statistics パッケージの読み込み\nusing Statistics\n# 平均値\nmean(v)\nsum(v) / length(v)\n# 偏りがない標準分散，n-1 で割る\nstd(v)\nsqrt(sum((v .- mean(v)) .^ 2) / (length(v) - 1))\n# 偏った標準分散，n で割る\nstd(v, corrected = false)\nsqrt(sum((v .- mean(v)) .^ 2) / (length(v)))","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\n標準分散の計算には，「偏りのない」定義を用いるのがよい．例えば，こちらを参照．→ 分散は n で割るか n − 1 で割るか","category":"page"},{"location":"ch10/#複数の数を引数とする関数","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 複数の数を引数とする関数","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Base.min — Function\nBase.max — Function","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"min(5, 1, 4, 2, 3)\nmax(5, 1, 4, 2, 3)","category":"page"},{"location":"ch10/#splatting-演算子","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ splatting 演算子","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"... splits one argument into many different arguments in function calls","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"...演算子は，関数呼び出しにおいて，ベクトルを，複数の引数に分けてから呼び出す．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"min([5, 1, 4, 2, 3]) # => exception\nmin([5, 1, 4, 2, 3]...) # min(5,1,4,2,3) と同じ","category":"page"},{"location":"ch10/#ベクトル要素への代入","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ ベクトル要素への代入","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"v = collect(1:10)\n# インデックス：整数\nv[4] = 0\nv","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"演算子 .= は，ベクトルの各要素に対する代入である． ベクトルの要素を，整数の等差数列で指定して，一度に更新できる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"# インデックス：範囲\nv[3:2:10] .= 0\nv\n# `=` では例外を発生する\nv[3:2:10] = 1 # => Exception","category":"page"},{"location":"ch10/#素数の生成：エラトステネスの篩","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"■ 素数の生成：エラトステネスの篩","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"エラトステネスの篩（ふるい）（sieve of eratosthenes）は， 素数を算出する方法の一つである． 以下の手順による．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"数 2 から n までの整数を並べる\n生き残っている中で最も小さい数 p を素数として残す．\n素数 p 自身を除く p の倍数をすべて消す\n以上の手順を，n まで調べたら終わり．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下のプログラムでは，配列 sieve を篩とする． 篩の初期値を 1:n とすると， 数字 i の篩は sieve[i] である． 篩で消された数 i には sieve[i] に 0 を格納することにする．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"nmax = 100\nsieve = collect(1:nmax);\nsieve[1] = 0;\nfor i = 2:nmax\n   if sieve[i] > 0\n      println(i)\n      for j = i*2:i:nmax\n         sieve[j] = 0\n      end\n   end\nend","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"上のプログラムで，変数 j に関する繰り返しは，1行で書ける．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"nmax = 100\nsieve = collect(1:nmax);\nsieve[1] = 0;\nfor i = 2:nmax\n   if sieve[i] > 0\n      # println(i)\n      sieve[i*2:i:nmax] .= 0\n   end\nend\n\nfor i = 1:nmax\n   if sieve[i] > 0\n      println(i)\n   end\nend","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ここで，sieve[i*2:i:nmax].=0 の文は， 等差数列 i*2:i:nmax で表される添字で示される配列 sieve のすべてに 0 を代入することを意味する． 範囲 i*2:i:nmax は， 初項 i*2，等差 i，末項 nmax の有限等差数列である．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"note: Note\nJulia には，素数を高速に計算する関数を含むパッケージが用意されている．Primes.primes — Function\nPrimes.isprime — Functionprimes(n) は，数 n までの素数を計算する．isprime(x)は，数 x が素数であるかどうかを判定する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"# import Pkg; Pkg.add(\"Primes\") # コメントを外してパッケージを設置する．一度だけ行えばよい\nusing Primes\nisprime(2)\nisprime(3)\nisprime(4)\nisprime.([2, 3, 4])\nprimes(100)","category":"page"},{"location":"ch10/#プロットデフォルトの設定10","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"プロットデフォルトの設定10","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\n\naux = (label=\"\", lc=:black, lw=0.5)\nusing Plots\nusing Plots.PlotMeasures\n\nPlots.reset_defaults()\ndefault(\n    size=(720,480),\n    framestyle=:box,thickness_scaling=2,\n    dpi=150,\n    guidefontsize=10,\n    tickfontsize=8,\n    legendfontsize=8,\n    aspect_ratio=:auto,\n    label=\"\",\n    legend_foreground_color=nothing,\n    legend_background_color=nothing,\n    grid=false,xlabel=\"\", ylabel=\"\",\n    palette=:Set1,\n    linewidth=2,\n    markershape=:none,\n    markersize=2,\n    markerstrokewidth=0,\n    warn_on_unsupported=true)","category":"page"},{"location":"ch10/#常微分方程式の初期値問題","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題","text":"","category":"section"},{"location":"ch10/#常微分方程式の初期値問題:Euler法","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題:Euler法","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"微分方程式","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"dfracdxdt =f(xt)","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"の解 x(t) （の近似値）を求めたい．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Euler 法による数値解法は，以下のような手順である．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"時刻 t_1 t_2 ldots を一定間隔 h とする． 上の式を，以下のように離散化する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracx_n+1-x_nh  = f(x_nt_n) \nx_n+1  = x_n + h f(x_nt_n)\nendaligned","category":"page"},{"location":"ch10/#例題：Euler法による解法","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"例題：Euler法による解法","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下の微分方程式を解いてみる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = 1-x^2 \nx(0)  = 0 \n 0  leq t leq 16\nendaligned","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h = 04 とする．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"f(x, t) = 1 - x^2\n#\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\n#\nx_now = 0 # initial condition\nfor i = 1:n\n   global x_now\n   t = ts[i]\n   x_next = x_now + h * f(x_now, t)\n   @show t, x_next\n   x_now = x_next\nend","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"解析解は，x = tanht である．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using Plots\nplot(xlabel=\"t\", ylabel=\"x\")\n\nx_now = 0 # initial condition\nfor i = 1:n\n   global x_now\n   t = ts[i]\n   scatter!([t], [x_now], mc=1, shape=:circle)\n   x_next = x_now + h * f(x_now, t)\n   @show t, x_next\n   x_now = x_next\nend\nplot!(ts, tanh.(ts), lc=2)","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"配列に計算結果を入れて，一気に描画する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"closeall() #hide\nplot(xlabel=\"t\", ylabel=\"x\")\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\nxs = zeros(n)\nxs[1] = 0 # initial condition\n\nfor i = 1:n-1\n   local x_now = xs[i]\n   t = ts[i]\n   x_next = x_now + h * f(x_now, t)\n   xs[i+1] = x_next\nend\nscatter!(ts, xs, mc=1, shape=:circle)\nplot!(ts, tanh.(ts), lc=2)","category":"page"},{"location":"ch10/#刻みを狭くする","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"刻みを狭くする","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h を 04 02 01 005 と小さくしてみる． 刻みを小さくすると，近似解が厳密解に近づいていくことが観察できる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"closeall() #hide\nplot(xlabel=\"t\", ylabel=\"x\")\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nfor k = 1:4\n   global h\n   ts = tmin:h:tmax\n   n = length(ts)\n   xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   scatter!(ts, xs, mc=1, shape=:circle,\n      label = \"h=\" * string(h))\n\n   h /= 2\nend\nplot!(ts, tanh.(ts), lc=2, lw = 0.5,\n   label = \"tanh(t)\")","category":"page"},{"location":"ch10/#正確な解との誤差評価","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"正確な解との誤差評価","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"closeall() #hide\nplot(xlabel=\"h\", xscale=:log10, yscale=:log10)\n\ntmin = 0\ntmax = 1.6\nh = 0.4\nfor k = 1:5\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue) / n\n   @show h, e\n   scatter!([h], [e], mc=1, shape=:circle)\n   h /= 2\nend\nxlims!(1e-2, 1)\nylims!(1e-4, 1e-1)\nplot()","category":"page"},{"location":"ch10/#常微分方程式の初期値問題:修正Euler法","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"▶ 常微分方程式の初期値問題:修正Euler法","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"修正Euler 法では，微分方程式","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"dfracdxdt =f(xt)","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"を，次のように離散化する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\nf_n  = f(x_n t_n) \noverlinex_n+1  = x_n + h f(x_nt) \noverlinef_n+1  = f(overlinex_n+1 t_n+1) \nx_n+1  = x_n + dfrach2 left(f_n + overlinef_n+1right)\nendaligned","category":"page"},{"location":"ch10/#例題：修正Euler法による解法","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"例題：修正Euler法による解法","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"（再掲）Euler法と同じ微分方程式を解いてみる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = 1-x^2 \nx(0)  = 0 \n 0  leq t leq 16\nendaligned","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h = 04 とする．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"#\ntmin = 0\ntmax = 1.6\nh = 0.4\nts = tmin:h:tmax\nn = length(ts)\nx_now = 0 # initial condition\n\nfor i = 1:n-1\n   global x_now\n   t = ts[i]\n   t_next = ts[i+1]\n   f_now = f(x_now, t)\n   x_mid = x_now + h * f_now\n   f_mid = f(x_mid, t_next)\n   x_next = x_now + (f_now + f_mid) * h / 2\n   @show t, x_next\n   x_now = x_next\nend","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"配列に計算結果を入れて，一気に描画する．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using Plots\nplot(xlabel=\"t\", ylabel=\"x\")\n\nn = length(ts)\nxs = zeros(n)\n\nxs[1] = 0 # initial condition\nfor i = 1:n-1\n   global xs\n   local x_now = xs[i]\n   t_next = ts[i+1]\n   t = ts[i]\n   f_now = f(x_now, t)\n   x_mid = x_now + h * f_now\n   f_mid = f(x_mid, t_next)\n   xs[i+1] = x_now + (f_now + f_mid) * h / 2\nend\nscatter!(ts, xs, lc=1)\nplot!(ts, tanh.(ts), lc=2)","category":"page"},{"location":"ch10/#刻みを狭くする-2","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"刻みを狭くする","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"刻み h を 04 02 01 005 と小さくしてみる． 刻みを小さくすると，近似解が厳密解に近づいていくことが観察できる．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"plot(xlabel=\"t\", ylabel=\"x\")\n\nh = 0.4\nfor k = 1:4\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue)\n   @show h, e\n   scatter!(ts, xs, mc=1, shape=:circle,\n      label = \"h=\" * string(h))\n   h /= 2\nend\nplot!(ts, tanh.(ts), lc=2,\n   label = \"tanh(t)\", lw = 0.5)\nplot!()","category":"page"},{"location":"ch10/#正確な解との誤差評価-2","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"正確な解との誤差評価","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\nusing Plots\nplot(xlabel=\"h\", xscale=:log10, yscale=:log10)\n\nh = 0.4\nfor k = 1:4\n   global h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      t = ts[i]\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e = norm(xs .- xtrue) / n\n   @show h, e\n   scatter!([h], [e], mc=1, shape=:circle)\n   h /= 2\nend\nxlims!(1e-2, 1)\nylims!(1e-5, 1e-1)\nplot!()","category":"page"},{"location":"ch10/#練習：常微分方程式の数値解の誤差","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習：常微分方程式の数値解の誤差","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"上の常微分方程式の数値解法の例について， Euler法による絶対誤差と，修正Euler法による絶対誤差を， 刻み幅 h に対する関数として，一つのプロットの上に表せ．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"結果は，例えば，以下のようになろう．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"using LinearAlgebra\nusing Plots\nplot(xlabel=\"h\", xscale=:log10, yscale=:log10)\n\nh = 0.4\nkmax = 8\nhs = zeros(kmax)\ne_euler = zeros(kmax)\ne_meuler = zeros(kmax)\n\nfor k = 1:kmax\n   global h\n   hs[k] = h\n   local ts = tmin:h:tmax\n   local n = length(ts)\n   local xs = zeros(n)\n   xs[1] = 0 #  initial condition\n\n   # Euler\n   for i = 1:n-1\n      local x_now = xs[i]\n      t = ts[i]\n      x_next = x_now + h * f(x_now, t)\n      xs[i+1] = x_next\n   end\n   xtrue = tanh.(ts)\n   e_euler[k] = norm(xs .- xtrue) / n\n\n   # modified Euler\n   xs[1] = 0 # initial condition\n   for i = 1:n-1\n      local x_now = xs[i]\n      t_next = ts[i+1]\n      t = ts[i]\n      f_now = f(x_now, t)\n      x_mid = x_now + h * f_now\n      f_mid = f(x_mid, t_next)\n      xs[i+1] = x_now + (f_now + f_mid) * h / 2\n   end\n   xtrue = tanh.(ts)\n   e_meuler[k] = norm(xs .- xtrue) / n\n   h /= 2\nend\nscatter!(hs, e_euler, mc=1, shape=:circle,\n   label = \"Euler\")\nscatter!(hs, e_meuler, mc=2, shape=:circle,\n   label = \"modified Euler\")\nxlims!(1e-3, 1)\nylims!(1e-6, 1e-1)\nplot!()","category":"page"},{"location":"ch10/#練習：-条件が成り立つまで繰り返す：微分方程式の初期値問題","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習： 条件が成り立つまで繰り返す：微分方程式の初期値問題","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"（少し難しいので，後回しにしてもよい）","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"Euler法ないし修正Euler法による微分方程式の数値解法を， 刻み幅 h を半分にしながら 20 回繰り返せ． ただし，絶対誤差が 10^-4 以下になったら，そこで終了せよ．","category":"page"},{"location":"ch10/#練習：常微分方程式・素性の悪い問題","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"◀● 練習：常微分方程式・素性の悪い問題","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"以下の微分方程式を解いてみよ．","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"beginaligned\ndfracdxdt  = x^2 \nx(0)  = dfrac12 \n 0  le t  2\nendaligned","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"解析解は，","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"x = dfrac12-t","category":"page"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"となり，t longrightarrow 0 で無限大に発散する「素性の悪い」方程式である．","category":"page"},{"location":"ch10/#今回のまとめ","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"★ 今回のまとめ","text":"","category":"section"},{"location":"ch10/","page":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","title":"第10回： ■ 配列要素の操作／▶常微分方程式の数値解法","text":"ベクトルを引数とする関数\n複数の数を引数とする関数\nsplatting 演算子\nベクトル要素への代入\nエラトステネスの篩：素数を算出する\n微分方程式の初期値問題，Euler法，修正Euler法","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = memoProgClass2024w","category":"page"},{"location":"#2024年度版","page":"Home","title":"2024年度版","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"この内容は，2024年度後期の授業（2024年10月から2025年1月）向けに公開するものです．","category":"page"},{"location":"","page":"Home","title":"Home","text":"実行結果は，Julia 1.10以上 （→ FAQ: Julia Releases ）により出力されたものです．","category":"page"},{"location":"#Preface","page":"Home","title":"Preface","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch00.md\",\n\t\"LICENSE.md\",\n\t\"LICENSEja.md\"\n]","category":"page"},{"location":"#Main","page":"Home","title":"Main","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch01.md\",\n\t\"ch02.md\",\n\t\"ch03.md\",\n\t\"ch04.md\",\n\t\"ch05.md\",\n\t\"ch06.md\",\n\t\"ch06.md\",\n\t\"ch07.md\",\n\t\"ch08.md\",\n\t\"ch08.md\",\n\t\"ch09.md\",\n\t\"ch10.md\",\n\t\"ch11.md\",\n\t\"ch12.md\",\n\t\"ch13.md\",\n\t\"ch14.md\"\n]\nDepth = 1:4","category":"page"},{"location":"","page":"Home","title":"Home","text":"## Appendices","category":"page"},{"location":"","page":"Home","title":"Home","text":"Pages=[\n\t\"ch0a.md\",\n\t\"ch0b.md\"\n]","category":"page"}]
}
